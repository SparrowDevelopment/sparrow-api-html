<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <!--[if IE]>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <![endif]-->
      <!-- Mobile Specific -->
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Sparrow API Documentation</title>
      <meta name="description" content="Sparrow API Documentation">
      <meta name="author" content="Sparrow">
      <meta name="copyright" content="Sparrow">
      <meta name="date" content="2014-12-02">
      <!-- Google Fonts -->
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400,500,600,700,800,900">
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Raleway:100,200,300,400,500,600,700,800,900">
      <!-- CSS Style -->
      <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
      <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="css/jquery.mobile-menu.css">
      <link rel="stylesheet" type="text/css" href="css/style.css" media="all">
      <link rel="stylesheet" type="text/css" href="css/responsive.css">
      <link rel="stylesheet" type="text/css" href="https://unpkg.com/highlightjs@9.10.0/styles/androidstudio.css">
   </head>
   <body id="pixxett-api">
      <div id="page">
         <!-- Header -->
         <header class="header" id="header">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-lg-1 col-sm-2">
                     <div class="mm-toggle-wrap">
                        <div class="mm-toggle"><i class="fa fa-align-justify"></i><span class="mm-label">Menu</span> </div>
                     </div>
                     <!-- Header Logo -->
                     <a class="header__block header__brand" href="#">
                        <h1> <img src="images/logo.png" alt="API UI logo"></h1>
                     </a>
                     <!-- End Header Logo -->
                  </div>
                  <div class="col-lg-11 col-sm-10 hidden-xs">
                     <div class="header__nav">
                        <div class="header__nav--left">
                        </div>
                        <div class="header__nav--right">
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </header>
         <!-- end header -->
         <!-- header service -->
         <div class="header-section-wrapper">
            <div class="header-section header-section-example">
               <div id="language">
                  <ul class="language-toggle">
                     
                     <li>
                        <input type="radio" class="language-toggle-source" name="language-toggle" id="toggle-lang-bash" data-language="bash" >
                        <label for="toggle-lang-bash" class="language-toggle-button language-toggle-button--bash">curl</label>
                     </li>
                    
                     <li>
                        <input type="radio" class="language-toggle-source" name="language-toggle" id="toggle-lang-php" data-language="php" >
                        <label for="toggle-lang-php" class="language-toggle-button language-toggle-button--php">PHP</label>
                     </li>
                    
                     <li>
                        <input type="radio" class="language-toggle-source" name="language-toggle" id="toggle-lang-ruby" data-language="ruby" >
                        <label for="toggle-lang-ruby" class="language-toggle-button language-toggle-button--ruby">Ruby</label>
                     </li>
                    
                     <li>
                        <input type="radio" class="language-toggle-source" name="language-toggle" id="toggle-lang-csharp" data-language="csharp" >
                        <label for="toggle-lang-csharp" class="language-toggle-button language-toggle-button--csharp">C#</label>
                     </li>
                    
                     <li>
                        <input type="radio" class="language-toggle-source" name="language-toggle" id="toggle-lang-python" data-language="python" >
                        <label for="toggle-lang-python" class="language-toggle-button language-toggle-button--python">Python</label>
                     </li>
                    
                  </ul>
               </div>
            </div>
         </div>
         <!-- End header service -->
         <!-- Sidebar -->
         <div id="documenter_sidebar">
            <div id="scrollholder" class="scrollholder">
               <div id="scroll" class="scroll">
                  <ol id="documenter_nav">
                     
                        <li>
                           <a class="current" href="#documenter-getting-started">Getting Started</a>
                           


                        </li>
                     
                        <li>
                           <a  href="#documenter-configuration">Configuration</a>
                           


                        </li>
                     
                        <li>
                           <a  href="#documenter-integration-details">Integration Details</a>
                           


                        </li>
                     
                        <li>
                           <a  href="#documenter-creating-a-sale">Creating a Sale</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-creating-a-sale-simple-sale">Simple Sale</a>
          


        </li>
     
        <li>
          <a href="#documenter-creating-a-sale-simple-sale-advanced-sale">Advanced Sale</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-separate-auth-capture">Creating an Authorization and Capture</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-separate-auth-capture-simple-auth">Simple Authorization</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-simple-auth-simple-capture">Simple Capture</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-simple-auth-simple-capture-Offline-Capture">Simple Offline Capture</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-simple-auth-simple-capture-Offline-Capture-Voice-capture">Voice Capture</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-simple-auth-simple-capture-Offline-Capture-Voice-capture-incremental-auth">Incremental Authorization</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-simple-auth-simple-capture-Offline-Capture-Voice-capture-incremental-auth-advanced-capture">Advanced Capture</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-issuing-a-refund">Issuing a Refund</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-issuing-a-refund-Simple-refund">Simple Refund</a>
          


        </li>
     
        <li>
          <a href="#documenter-issuing-a-refund-Simple-refund-advanced-refund">Advanced Refund</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-issuing-a-void">Issuing a Void</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-issuing-a-void-simple-void">Simple Void</a>
          


        </li>
     
        <li>
          <a href="#documenter-issuing-a-void-simple-void-advanced-void">Advanced Void</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-Creating-a-credit">Creating a Credit</a>
                           


                        </li>
                     
                        <li>
                           <a  href="#documenter-airline-passenger-sale">Airline Passenger Sale</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-airline-passenger-sale-passenger-sale">Passenger Sale</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-starcard">Military Star Card</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-starcard-simple-starcard">Simple Star Card</a>
          


        </li>
     
        <li>
          <a href="#documenter-starcard-simple-starcard-advanced-starcard">Advanced Star Card</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-ach">Automated Clearing House (ACH)/ eCheck</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-ach-simple-ach">Simple ACH</a>
          


        </li>
     
        <li>
          <a href="#documenter-ach-simple-ach-advanced-sale">Advanced ACH</a>
          


        </li>
     
        <li>
          <a href="#documenter-ach-simple-ach-advanced-sale-simple-echeck">Simple eCheck</a>
          


        </li>
     
        <li>
          <a href="#documenter-ach-simple-ach-advanced-sale-simple-echeck-advanced-echeck-sale">Advanced eCheck</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-ewallet">eWallet</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-ewallet-ewallet-credit">eWallet Simple Credit</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-fiserv">Fiserv</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-fiserv-fiserv-simple">Fiserv Simple Sale</a>
          


        </li>
     
        <li>
          <a href="#documenter-fiserv-fiserv-simple-fiserv-advanced">Advanced Fiserv Sale</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-chargeback">Chargeback Entry</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-chargeback-mark-chargeback">Mark as Chargeback</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-balance-inquiry">Balance Inquiry</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-balance-inquiry-check-balance">Retrieve Card Balance</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-decrypt-custom-field">Decrypt Custom Fields</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-decrypt-custom-field-decrypt">Decrypt Data</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-cc-verification">Credit Card Verification</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-cc-verification-card-verification">Account Verification</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-datavault">Data Vault</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer">Adding a Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer">Add Customer by Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type">Update Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type">Adding Payment Types to a Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types">Update Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type">Delete Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer">Delete Data Vault Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer">Retrieve Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer-get-payment-type">Retrieve Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer-get-payment-type-decrypt-payment-type">Decrypt Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer-get-payment-type-decrypt-payment-type-tokenized-payments">Tokenized Payments</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-payment-plans">Creating Payment Plans</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-payment-plans-create-plan">Creating a Payment Plan</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-create-plan-update-plan">Updating a Payment Plan</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-create-plan-update-plan-sequences">Building a Sequence</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-create-plan-update-plan-sequences-notifications">Notification Settings</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence">Add or Update a Sequence</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence">Delete a Sequence</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan">Delete a Plan</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan-assign-payment-plan">Assign Payment Plan</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan-assign-payment-plan-update-plan-assignment">Update Payment Plan Assignment</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan-assign-payment-plan-update-plan-assignment-cancel-plan-assignment">Cancel Payment Plan Assignment</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-invoicing">Invoicing</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-invoicing-create-merchant-invoice">Creating an Invoice</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-create-merchant-invoice-update-invoice">Update Invoice</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice">Retrieve Invoice</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice">Cancel Invoice</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice-cancel-inv-customer">Cancel Invoice by Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice-cancel-inv-customer-pay-inv-cc">Pay Invoice with a Credit Card</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice-cancel-inv-customer-pay-inv-cc-pay-inv-ach">Pay Invoice with a Bank Account</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-response-variables">Response Variables</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-response-variables-transaction-response-variables">Transaction Response Variables</a>
          


        </li>
     
        <li>
          <a href="#documenter-response-variables-transaction-response-variables-gateway-status">Gateway Status</a>
          


        </li>
     
        <li>
          <a href="#documenter-response-variables-transaction-response-variables-gateway-status-status">Status</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-processor-response-codes">Processor Response Codes</a>
                           

  <ol>
     
        <li>
          <a href="#documenter-processor-response-codes-avs-response-codes">AVS Response Codes</a>
          


        </li>
     
        <li>
          <a href="#documenter-processor-response-codes-avs-response-codes-cvv-response-codes">CVV Response Codes</a>
          


        </li>
     
        <li>
          <a href="#documenter-processor-response-codes-avs-response-codes-cvv-response-codes-military-star-responses">Military Star Responses</a>
          


        </li>
     
  </ol>


                        </li>
                     
                        <li>
                           <a  href="#documenter-code-samples">Code Samples</a>
                           


                        </li>
                     
                  </ol>
               </div>
            </div>
         </div>
         <!-- end sidebar -->
         <!-- Section Background -->
         <div id="background">
            <div class="background-actual"></div>
         </div>
         <!-- End Section Background -->
         <!-- main Content -->
         <div id="documenter_content" class="method-area-wrapper">
           
              
<section id="documenter-getting-started" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Getting Started</h1>
<p>The site describes the direct method for payments and value added features in
the Sparrow gateway and is referred to as the Services API.</p>
<p>The Services API URL is:</p>
<p><a href="https://secure.sparrowone.com/Payments/Services_api.aspx">https://secure.sparrowone.com/Payments/Services_api.aspx</a></p>
<p><code>Services_api.aspx</code> is an API implementation of secure payments. In this
fashion, merchants can seamlessly integrate gateway payment functions into their
checkout process using a direct post via HTTP.</p>

         </div>
      </div>
      
   </div>
</section>           

           
              
<section id="documenter-configuration" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Configure the Merchant Account</h1>
<h2>Merchant Key (mKey)</h2>
<p>When sending a payment transaction request to Sparrow a Merchant Key is
required. A sample Merchant Key follows:</p>
<pre class="language-none"><code class="language-none">MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO
</code></pre>
<p>Each Merchant Key represents the payment type (credit card, ACH, etc…) and
merchant account targeted for processing the transaction. This methodology
allows merchants to have multiple merchant accounts and payment types for
processing transactions. The transactions can be sent to a particular account
based on the merchant’s business rules.</p>
<p>For example, to process transaction send the Merchant key associated with a Visa
and MasterCard merchant account. (Discover and American Express cards are also
tied to the Visa/MasterCard Merchant Key.)</p>
<p>The <code>mKey</code> can be found inside the gateway under <code>Admin &gt; System Configuration &gt; Transaction Routing</code>.</p>

         </div>
      </div>
      
   </div>
</section>           

           
              
<section id="documenter-integration-details" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Integration Details</h1>
<h2>Services API</h2>
<p>To process payment through Services API send an HTTP POST request containing
payment fields to the Services API page.</p>
<p>Request should be formatted as HTML form post, i.e. content type should be
<code>application/x- www-form-urlencoded</code> and request body should be formatted
accordingly:</p>
<ol>
<li>
<p>The form field names and values are escaped: space characters are replaced
by <code>+</code>, and then reserved characters are escaped as per URL; that is,
non-alphanumeric characters are replaced by <code>%HH</code>, a percent sign and two
hexadecimal digits representing the ASCII code of the character. Line
breaks, as in multi-line text field values, are represented as CR LF pairs,
i.e. <code>%0D%0A</code>.</p>
</li>
<li>
<p>The fields are listed in the order they appear in the document with the name
separated from the value by <code>=</code> and the pairs separated from each other by
<code>&amp;</code>. Fields with null values may be omitted.</p>
</li>
</ol>

         </div>
      </div>
      
   </div>
</section>           

           
              
<section id="documenter-creating-a-sale" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Creating a Sale</h1>
<p>By sending the appropriate Merchant Key, along with the appropriate API fields
the merchant can direct a transaction to the appropriate merchant account for
transaction processing.</p>
<p></p>
<h3>Test and Validate a Sale</h3>
<p>Credit Card test transactions can be submitted with the following information:</p>
<pre class="language-none"><code class="language-none">Cardnum: 4111111111111111
</code></pre>
<pre class="language-none"><code class="language-none">Cardexp: 10/19
</code></pre>
<pre class="language-none"><code class="language-none">Amount: &gt; 1.00
</code></pre>
<pre class="language-none"><code class="language-none">CVV Match: 999
</code></pre>
<p>Forcing errors in test mode:</p>
<ul>
<li>
<p>To cause a decline pass an amount less than 1.00</p>
</li>
<li>
<p>To trigger an error message, pass an invalid card number</p>
</li>
<li>
<p>To simulate an AVS mismatch, pass 888 in the address1 field, and 77777 for
the zip</p>
</li>
</ul>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-creating-a-sale-simple-sale" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Simple Sale</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>sale</td>
<td>sale = Transaction Sale</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0711 = 7/2011)</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged (i.e. 10.00)</td>
</tr>
<tr>
<td>cvv</td>
<td></td>
<td></td>
<td>Card security code</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;amount=9.95&amp;cardnum=4111111111111111&amp;cardexp=1010&amp;cvv=999
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=sale&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
amount=9.95&amp;\
cvv=999"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10751328&amp;
xref=3829811833&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=sale&amp;
avsresponse=&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-php code-div ">
                 <div class="method-example-part">
                   <p>Sample request:</p>
<pre class="language-php"><code class="language-php">$c = <span class="hljs-keyword">new</span> Connection(<span class="hljs-string">'&lt;your Sparrow API key&gt;'</span>);

$ci = <span class="hljs-keyword">new</span> CardInfo([
  <span class="hljs-string">'number'</span>=&gt;<span class="hljs-string">'4111111111111111'</span>,
  <span class="hljs-string">'expiration'</span>=&gt;<span class="hljs-string">'1013'</span>,
  <span class="hljs-string">'cvv'</span>=&gt;<span class="hljs-string">'999'</span>,
]);
$res = $c-&gt;simpleSale(<span class="hljs-number">9.95</span>, $ci);

<span class="hljs-keyword">echo</span> $res-&gt;response; <span class="hljs-comment">// 1</span>
<span class="hljs-keyword">echo</span> $res-&gt;transid; <span class="hljs-comment">// 12345</span>
<span class="hljs-keyword">echo</span> $res-&gt;type; <span class="hljs-comment">// sale</span>
</code></pre>
<p></p>
<p>Sample API response:</p>
<p></p>
<pre class="language-php"><code class="language-php">object(Sparrow\Response)<span class="hljs-comment">#51 (12) {</span>
  [<span class="hljs-string">"response"</span>]=&gt;
  int(<span class="hljs-number">1</span>)
  [<span class="hljs-string">"textresponse"</span>]=&gt;
  string(<span class="hljs-number">7</span>) <span class="hljs-string">"SUCCESS"</span>
  [<span class="hljs-string">"transid"</span>]=&gt;
  string(<span class="hljs-number">8</span>) <span class="hljs-string">"10497840"</span>
  [<span class="hljs-string">"xref"</span>]=&gt;
  string(<span class="hljs-number">10</span>) <span class="hljs-string">"3779305439"</span>
  [<span class="hljs-string">"authcode"</span>]=&gt;
  string(<span class="hljs-number">6</span>) <span class="hljs-string">"123456"</span>
  [<span class="hljs-string">"orderid"</span>]=&gt;
  string(<span class="hljs-number">0</span>) <span class="hljs-string">""</span>
  [<span class="hljs-string">"type"</span>]=&gt;
  string(<span class="hljs-number">4</span>) <span class="hljs-string">"sale"</span>
  [<span class="hljs-string">"avsresponse"</span>]=&gt;
  string(<span class="hljs-number">0</span>) <span class="hljs-string">""</span>
  [<span class="hljs-string">"cvvresponse"</span>]=&gt;
  string(<span class="hljs-number">1</span>) <span class="hljs-string">"M"</span>
  [<span class="hljs-string">"coderesponse"</span>]=&gt;
  string(<span class="hljs-number">3</span>) <span class="hljs-string">"100"</span>
  [<span class="hljs-string">"codedescription"</span>]=&gt;
  string(<span class="hljs-number">24</span>) <span class="hljs-string">"Transaction was Approved"</span>
  [<span class="hljs-string">"status"</span>]=&gt;
  string(<span class="hljs-number">3</span>) <span class="hljs-string">"200"</span>
}
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.sale({
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">cardnum:</span> <span class="hljs-string">'4111111111111111'</span>,
  <span class="hljs-symbol">cardexp:</span> <span class="hljs-string">'1010'</span>,
  <span class="hljs-symbol">cvv:</span> <span class="hljs-string">'999'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '11037941'</span>
result.xref <span class="hljs-comment"># =&gt; '3877926163'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.type <span class="hljs-comment"># =&gt; 'sale'</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleSale(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032426</span>
result.XRef;    <span class="hljs-comment">// 3876731523</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-creating-a-sale-simple-sale-advanced-sale" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Advanced Sale</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>sale</td>
<td>Transaction Sale</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0719 = 7/2019</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>d.dd</td>
<td>Total amount to be charged (ie. 10.00)</td>
</tr>
<tr>
<td>cvv</td>
<td></td>
<td>card security code</td>
</tr>
<tr>
<td>currency</td>
<td>CCC (ISO 4217 alphabetic code)</td>
<td>Code of the payment currency. If currency is not specified, the default currency (USD) is assumed.</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td>skunumber_#</td>
<td></td>
<td>SKU number of the product being purchased (skunumber_1, skunumber_2, etc)</td>
</tr>
<tr>
<td>description_#</td>
<td></td>
<td>Description of the product being purchased</td>
</tr>
<tr>
<td>amount_#</td>
<td></td>
<td>Price of the single unit of a product being purchased</td>
</tr>
<tr>
<td>quantity_#</td>
<td></td>
<td>Number of units of a product being purchased</td>
</tr>
<tr>
<td>orderdesc</td>
<td></td>
<td>Order Description</td>
</tr>
<tr>
<td>orderid</td>
<td></td>
<td>Order ID</td>
</tr>
<tr>
<td>cardipaddress</td>
<td>ddd.ddd.ddd.ddd</td>
<td>IP address of the customer, can be used for fraud prevention in FBI Tools</td>
</tr>
<tr>
<td>tax</td>
<td>d.dd</td>
<td>Total tax amount</td>
</tr>
<tr>
<td>shipamount</td>
<td>d.dd</td>
<td>Total shipping amount</td>
</tr>
<tr>
<td>ponumber</td>
<td></td>
<td>Original Purchase Order</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td>Billing company</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td>Billing address2</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td>state</td>
<td>2 character abbreviation</td>
<td>Billing state</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
<tr>
<td>country</td>
<td>CC (ISO-3166)</td>
<td>Billing Country (ie. US)</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td>Billing phone number</td>
</tr>
<tr>
<td>fax</td>
<td></td>
<td>Billing fax number</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Billing Email Address</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td>Shipping first name</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td>Shipping last name</td>
</tr>
<tr>
<td>shipcompany</td>
<td></td>
<td>Shipping company</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td>Shipping Address</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td>Shipping Address - line 2</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td>Shipping City</td>
</tr>
<tr>
<td>shipstate</td>
<td>2 character abbreviation</td>
<td>Shipping State</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td>Shipping Zip Code</td>
</tr>
<tr>
<td>shipcountry</td>
<td>CC (ISO - 3166)</td>
<td>Shipping Country, ie US</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td>Shipping Phone Number</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td>Shipping Email</td>
</tr>
<tr>
<td>opt_amount_type_1</td>
<td>tip</td>
<td>Type of additional amount</td>
</tr>
<tr>
<td>opt_amount_value_1</td>
<td>d.dd</td>
<td>Value of additional amount (e.g. 1.00)</td>
</tr>
<tr>
<td>opt_amount_percentage_1</td>
<td></td>
<td>Percentage of additional amount (e.g. 10)</td>
</tr>
<tr>
<td>sendtransreceipttobillemail</td>
<td>true/false</td>
<td>If true receipt will be sent to email from Billing Information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoshippemail</td>
<td>true/false</td>
<td>If true receipt will be sent to email from Shipping Information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoemails</td>
<td>email@email.com</td>
<td>Send multiple transaction receipts to customers. Multiple email must be separated by commas.</td>
</tr>
<tr>
<td>token</td>
<td>[A-Z, 0-9]</td>
<td>Customer or customer payment info unique identifier.</td>
</tr>
<tr>
<td>saveclient</td>
<td>true / false</td>
<td>If parameter 'saveclient' = true and the customer is identified as new, then a new Data Vault client will be created with payment/contact info from the transaction data and DV token will be generated. The payment transaction will be assigned to this new DV client.</td>
</tr>
<tr>
<td>updateclient</td>
<td>true / false</td>
<td>If the parameter 'updateclient' = true and the DataVault finds the client according to customer identification rules, then the payment transaction will be assigned to the DataVault client and the DataVault client payment/contact info will be updated according to the transaction's data.</td>
</tr>
<tr>
<td>groupid</td>
<td>alphanumeric</td>
<td>Group ID of the Split Funding group. If groupid is defined for the transaction system splits it in accordance with group settings.</td>
</tr>
<tr>
<td>pinlessdebitindicator</td>
<td>true / false</td>
<td>For Chase Processor only. Indicator to process PIN-less debit transactions.</td>
</tr>
<tr>
<td>sendpaymentdesc</td>
<td>true / false</td>
<td>Overrides ‘Send Payment Descriptor’ account setting for the transaction.</td>
</tr>
<tr>
<td>electrcommind</td>
<td></td>
<td>Required for any 3DS-aware payment</td>
</tr>
<tr>
<td>securecavv</td>
<td></td>
<td>Required for any 3DS-aware payment</td>
</tr>
<tr>
<td>securexid</td>
<td></td>
<td>Required for any 3DS-aware payment</td>
</tr>
<tr>
<td>threedsecparesstatus</td>
<td></td>
<td>Optional for 3DS-aware payment. Used by OCBC processor only.</td>
</tr>
<tr>
<td>signatureverification</td>
<td></td>
<td>Optional for 3DS-aware payment</td>
</tr>
<tr>
<td>threedsecuretransactionid</td>
<td></td>
<td>Optional for 3DS-aware payment</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=57.85&amp;cardnum=4111111111111111&amp;cardexp=1010&amp;cvv=999&amp;skunumber_1=5558779&amp;description_1=menssweaterblue&amp;amount_1=50.00&amp;quantity_1=1&amp;tax=2.85&amp;shipamount=5.00&amp;firstname=John&amp;lastname=Smith&amp;address1=888+test+address&amp;city=Los+Angeles&amp;country=US&amp;state=CA&amp;phone=222-444-2938&amp;shipfirstname=John&amp;shiplastname=Smith&amp;shipaddress1=888+test+address&amp;shipcity=Los+Angeles&amp;shipstate=CA&amp;shipphone=2224442938
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=sale&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
amount=9.95&amp;\
cvv=999&amp;\
currency=USD&amp;\
firstname=John&amp;\
lastname=Doe&amp;\
skunumber_1=123&amp;\
skunumber_2=456&amp;\
description_1=Blue widget&amp;\
description_2=Brown widget&amp;\
amount_1=1.99&amp;\
amount_2=2.99&amp;\
quantity_1=1&amp;\
quantity_2=2&amp;\
orderdesc=Order Description&amp;\
orderid=11111&amp;\
cardipaddress=8.8.8.8&amp;\
tax=0.25&amp;\
shipamount=1.25&amp;\
ponumber=22222&amp;\
company=Sparrow One&amp;\
address1=16100 N 71st Street&amp;\
address2=Suite 170&amp;\
city=Scottsdale&amp;\
state=AZ&amp;\
zip=85254&amp;\
country=US&amp;\
email=john@norepy.com&amp;\
shipfirstname=Jane&amp;\
shiplastname=Doe&amp;\
shipcompany=Sparrow Two&amp;\
shipaddress1=16100 N 72nd Street&amp;\
shipaddress2=Suite 171&amp;\
shipcity=Pheonix&amp;\
shipstate=AZ&amp;\
shipzip=85004&amp;\
shipcountry=US&amp;\
shipphone=6025551234&amp;\
shipemail=jane@noreply.com"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750810&amp;
xref=3829708603&amp;
authcode=123456&amp;
orderid=11111&amp;
<span class="hljs-built_in">type</span>=sale&amp;
avsresponse=N&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AdvancedSale(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032425</span>
result.XRef;    <span class="hljs-comment">// 3876731470</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.sale({
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'57.85'</span>,
  <span class="hljs-symbol">cardnum:</span> <span class="hljs-string">'4111111111111111'</span>,
  <span class="hljs-symbol">cardexp:</span> <span class="hljs-string">'1010'</span>,
  <span class="hljs-symbol">cvv:</span> <span class="hljs-string">'999'</span>,
  <span class="hljs-symbol">skunumber_1:</span> <span class="hljs-string">'5558779'</span>,
  <span class="hljs-symbol">description_1:</span> <span class="hljs-string">'menssweaterblue'</span>,
  <span class="hljs-symbol">amount_1:</span> <span class="hljs-string">'50.00'</span>,
  <span class="hljs-symbol">quantity_1:</span> <span class="hljs-string">'1'</span>,
  <span class="hljs-symbol">tax:</span> <span class="hljs-string">'2.85'</span>,
  <span class="hljs-symbol">shipamount:</span> <span class="hljs-string">'5.00'</span>,
  <span class="hljs-symbol">firstname:</span> <span class="hljs-string">'John'</span>,
  <span class="hljs-symbol">lastname:</span> <span class="hljs-string">'Smith'</span>,
  <span class="hljs-symbol">address1:</span> <span class="hljs-string">'888 test address'</span>,
  <span class="hljs-symbol">city:</span> <span class="hljs-string">'Los Angeles'</span>,
  <span class="hljs-symbol">country:</span> <span class="hljs-string">'US'</span>,
  <span class="hljs-symbol">state:</span> <span class="hljs-string">'CA'</span>,
  <span class="hljs-symbol">phone:</span> <span class="hljs-string">'222-444-2938'</span>,
  <span class="hljs-symbol">shipfirstname:</span> <span class="hljs-string">'John'</span>,
  <span class="hljs-symbol">shiplastname:</span> <span class="hljs-string">'Smith'</span>,
  <span class="hljs-symbol">shipaddress1:</span> <span class="hljs-string">'888 test address'</span>,
  <span class="hljs-symbol">shipcity:</span> <span class="hljs-string">'Los Angeles'</span>,
  <span class="hljs-symbol">shipstate:</span> <span class="hljs-string">'CA'</span>,
  <span class="hljs-symbol">shipphone:</span> <span class="hljs-string">'2224442938'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '11037942'</span>
result.xref <span class="hljs-comment"># =&gt; '3877926187'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.type <span class="hljs-comment"># =&gt; 'sale'</span>
result.avsresponse <span class="hljs-comment"># =&gt; 'A'</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-separate-auth-capture" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Creating an Authorization and Capture</h1>
<p>A typical Sale has two parts, an Authorization and a Capture. Through the API,
merchants have the option to either run a complete sale or break the transaction
into two separate parts. Merchants who do not ship/deliver products on the same
day, offer future delivery of services or accept tips may want to use the auth
and capture method. Examples of these merchant types would be:</p>
<ul>
<li>
<p>Car Rentals</p>
</li>
<li>
<p>Hotels</p>
</li>
<li>
<p>Restaurants</p>
</li>
</ul>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-separate-auth-capture-simple-auth" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Simple Authorization</h3>
<p>Authorization transactions are processed immediately but are not flagged for
settlement. This process will verify funds availability and hold them until
capture (3-7 days). In order to settle an open auth, a subsequent capture must
be made.</p>
<p>An authorization may have all of the same fields as a Sale transaction, but with
<code>transtype=auth</code></p>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>auth</td>
<td>Authorization = Transaction Auth</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0711 = 7/2011)</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged (i.e. 10.00)</td>
</tr>
<tr>
<td>cvv</td>
<td></td>
<td></td>
<td>Card security code</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=auth&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;cardnum=4111111111111111&amp;cardexp=1010&amp;cvv=999
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=auth&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
amount=9.95&amp;\
cvv=999"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750806&amp;
xref=3829708674&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=auth&amp;
avsresponse=&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleAuthorization(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032439</span>
result.XRef;    <span class="hljs-comment">// 3876731939</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// auth</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.auth({
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">cardnum:</span> <span class="hljs-string">'4111111111111111'</span>,
  <span class="hljs-symbol">cardexp:</span> <span class="hljs-string">'1010'</span>,
  <span class="hljs-symbol">cvv:</span> <span class="hljs-string">'999'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '11037943'</span>
result.xref <span class="hljs-comment"># =&gt; '3877926217'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.type <span class="hljs-comment"># =&gt; 'auth'</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-separate-auth-capture-simple-auth-simple-capture" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Simple Capture</h3>
<p>Capture transactions flag existing authorizations for settlement. Only
authorizations can be captured. Captures can be submitted for an amount equal to
or less than the original authorization amount.</p>
<p></p>
<p>*In order to capture an amount that is higher than the original auth, please
contact support to make sure that the correct settings have been enabled for
your account.</p>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>capture</td>
<td>Capture = Transaction Capture</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transid</strong></td>
<td></td>
<td></td>
<td>Original Payment Gateway Transaction ID</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged (i.e. 10.00)</td>
</tr>
<tr>
<td>sendtransreceipttobillemail</td>
<td></td>
<td>true/false</td>
<td>If true receipt will be sent to email from Billing Information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoshipemail</td>
<td></td>
<td>true/false</td>
<td>If true receipt will be sent to email from Shipping Information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoemails</td>
<td></td>
<td>email@email.com</td>
<td>Additional list of emails to receive receipts</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=capture&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;transid=123456&amp;sendtransreceipttobillemail=true
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=capture&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transid=10750806&amp;\
cardexp=1019&amp;\
amount=9.95&amp;\
sendtransreceipttobillemail=true&amp;\
sendtransreceipttoshipemail=true&amp;\
sendtransreceipttoemails=email@email.com"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750806&amp;
xref=3829708674&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=capture&amp;
avsresponse=&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultSimpleAuthorization = <span class="hljs-keyword">await</span> _sparrow.SimpleAuthorization(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleCapture(
    transId: resultSimpleAuthorization.TransId, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT SimpleAuthorization:</p>
<pre class="language-csharp"><code class="language-csharp">resultSimpleAuthorization.Status;    <span class="hljs-comment">// 200</span>
resultSimpleAuthorization.Response;    <span class="hljs-comment">// 1</span>
resultSimpleAuthorization.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultSimpleAuthorization.TransId;    <span class="hljs-comment">// 11032440</span>
resultSimpleAuthorization.XRef;    <span class="hljs-comment">// 3876731948</span>
resultSimpleAuthorization.AuthCode;    <span class="hljs-comment">// 123456</span>
resultSimpleAuthorization.Type;    <span class="hljs-comment">// auth</span>
resultSimpleAuthorization.CodeResponse;    <span class="hljs-comment">// 100</span>
resultSimpleAuthorization.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032440</span>
result.XRef;    <span class="hljs-comment">// 3876731948</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// capture</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.capture({
  <span class="hljs-symbol">transid:</span> <span class="hljs-string">'10934003'</span>,
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.25'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '10934003'</span>
result.xref <span class="hljs-comment"># =&gt; '3865034963'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.type <span class="hljs-comment"># =&gt; 'capture'</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-separate-auth-capture-simple-auth-simple-capture-Offline-Capture" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Simple Offline Capture</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>offline</td>
<td>Offline Capture closes an open authorization which was manually obtained from the card issuer</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0711 = 7/2011)</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged (i.e. 10.00)</td>
</tr>
<tr>
<td><strong>authcode</strong></td>
<td></td>
<td>string</td>
<td>Auth code received from the issuer</td>
</tr>
<tr>
<td><strong>authdate</strong></td>
<td></td>
<td>MM/DD/YYYY</td>
<td>Date that auth code was obtained, required for Chase only</td>
</tr>
<tr>
<td>cvv</td>
<td></td>
<td></td>
<td>Card security code</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=offline&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;cardnum=4111111111111111&amp;cardexp=1010&amp;cvv=999&amp;authcode=987654&amp;authdate=03/25/2016
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=offline&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
amount=9.95&amp;\
authcode=123456&amp;\
authdate=01/31/2017&amp;\
cvv=999"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750801&amp;
xref=3829708552&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=offline&amp;
avsresponse=&amp;
cvvresponse=&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleOfflineCapture(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m, 
    authCode: <span class="hljs-string">"123456"</span>, 
    authDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>));
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032437</span>
result.XRef;    <span class="hljs-comment">// 3876731902</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// offline</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-separate-auth-capture-simple-auth-simple-capture-Offline-Capture-Voice-capture" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Voice Capture (for Visa Only)</h3>
<p>When you request an authorization through the system, the issuer might ask that
you call the acquirer to answer questions about the transaction. These
transaction types are sometimes known as <strong>Referrals.</strong> To capture verbally
authorized transactions, send the verbal authorization code in the capture
request.</p>
<p>You can use verbal authorization to capture an authorization that was declined
for any of these reasons:</p>
<p></p>
<p>•      Verbal authorization required</p>
<p>•      Card expired</p>
<p>•      Card refused</p>
<p>•      Invalid card</p>
<p></p>
<p>A verbal authorization works as follows:</p>
<p>1.    The authorization reply includes reason code 201, which indicates that the
issuing bank is requiring a verbal authorization.</p>
<p>2.    The merchant calls the acquirer to answer questions about the transaction.</p>
<p>3.    If the acquirer verbally authorizes the transaction, the merchant is given
a verbal authorization code.</p>
<p>4.    The merchant would include the verbal authorization code in the capture
request.</p>

         </div>
      </div>
      
   </div>
</section>           


   
<section id="documenter-separate-auth-capture-simple-auth-simple-capture-Offline-Capture-Voice-capture-incremental-auth" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Incremental Authorization (Lodging Industry only)</h3>
<p>The additional operation type, Incremental Authorization, is implemented for the
Lodging Industry only.</p>
<p>It is used to add an amount to an original open Authorization and can occur
multiple times. It cannot be applied to an already captured Authorization.</p>
<p>Please see details in the document “SPARROW API” in the First Data PTS and TSYS
sections.</p>

         </div>
      </div>
      
   </div>
</section>           


   
<section id="documenter-separate-auth-capture-simple-auth-simple-capture-Offline-Capture-Voice-capture-incremental-auth-advanced-capture" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Advanced Capture</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>capture</td>
<td>Capture = Transaction Capture</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transid</strong></td>
<td></td>
<td></td>
<td>Original Payment Gateway Transaction ID</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged (i.e. 10.00)</td>
</tr>
<tr>
<td>sendtransreceipttobillemail</td>
<td></td>
<td>true/false</td>
<td>If true receipt will be sent to email from Billing Information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoshipemail</td>
<td></td>
<td>true/false</td>
<td>If true receipt will be sent to email from Shipping Information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoemails</td>
<td></td>
<td>email@email.com</td>
<td>Additional list of emails to receive receipts</td>
</tr>
<tr>
<td>shiptracknum</td>
<td></td>
<td></td>
<td>Shipping Tracking Number</td>
</tr>
<tr>
<td>shipcarrier</td>
<td></td>
<td>ups/fedex/dhl/usps</td>
<td>Shipping Carrier</td>
</tr>
<tr>
<td>orderid</td>
<td></td>
<td></td>
<td>Order ID</td>
</tr>
<tr>
<td>opt_amount_type_#</td>
<td></td>
<td>tip/surcharge</td>
<td>Type of additional amount</td>
</tr>
<tr>
<td>opt_amount_value_#</td>
<td></td>
<td></td>
<td>Value of additional amount (1.00)</td>
</tr>
<tr>
<td>opt_amount_percentage_#</td>
<td></td>
<td></td>
<td>Percentage of additional amount (10)</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=capture&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;transid=123456&amp;sendtransreceipttobillemail=true&amp;orderid=54321
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-csharp code-div active-code">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultSimpleAuthorization = <span class="hljs-keyword">await</span> _sparrow.SimpleAuthorization(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AdvancedCapture(
    transId: resultSimpleAuthorization.TransId, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT SimpleAuthorization:</p>
<pre class="language-csharp"><code class="language-csharp">resultSimpleAuthorization.Status;    <span class="hljs-comment">// 200</span>
resultSimpleAuthorization.Response;    <span class="hljs-comment">// 1</span>
resultSimpleAuthorization.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultSimpleAuthorization.TransId;    <span class="hljs-comment">// 11032438</span>
resultSimpleAuthorization.XRef;    <span class="hljs-comment">// 3876731911</span>
resultSimpleAuthorization.AuthCode;    <span class="hljs-comment">// 123456</span>
resultSimpleAuthorization.Type;    <span class="hljs-comment">// auth</span>
resultSimpleAuthorization.CodeResponse;    <span class="hljs-comment">// 100</span>
resultSimpleAuthorization.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032438</span>
result.XRef;    <span class="hljs-comment">// 3876731911</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// capture</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.capture({
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">transid:</span> <span class="hljs-string">'123456'</span>,
  <span class="hljs-symbol">sendtransreceipttobillemail:</span> <span class="hljs-string">'true'</span>,
  <span class="hljs-symbol">orderid:</span> <span class="hljs-string">'54321'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '123456'</span>
result.xref <span class="hljs-comment"># =&gt; '3865035008'</span>
result.authcode <span class="hljs-comment"># =&gt; '654321'</span>
result.type <span class="hljs-comment"># =&gt; 'capture'</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-issuing-a-refund" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Issuing a Refund</h1>
<p>Transaction refunds will perform either a full or partial refund of an already
settled transaction. If the transaction has not need settled, it must be
<strong>voided</strong> instead.</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-issuing-a-refund-Simple-refund" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Simple Refund</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>refund</td>
<td>Refund</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transid</strong></td>
<td></td>
<td>Original payment gateway transaction ID</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>d.dd</td>
<td>Total amount to be refunded</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=refund&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transid=12345678&amp;amount=3.95
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=refund&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transid=10750794&amp;\
amount=9.95"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=3&amp;
textresponse=Flagged+<span class="hljs-keyword">for</span>+Review+by+Velocity+and+Duplicates+Policy+(Duplicate+Transactions+Rule).+Original+Transaction+ID%3a+10750789&amp;
transid=10750794&amp;
xref=3829708623&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=refund&amp;
avsresponse=&amp;
cvvresponse=M&amp;
coderesponse=&amp;
codedescription=&amp;
status=300&amp;
origtransid=10750789&amp;
origresponse=1&amp;
origtextresponse=SUCCESS
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultSimpleSale = <span class="hljs-keyword">await</span> _sparrow.SimpleSale(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleRefund(
    transId: resultSimpleSale.TransId, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT SimpleSale:</p>
<pre class="language-csharp"><code class="language-csharp">resultSimpleSale.Status;    <span class="hljs-comment">// 200</span>
resultSimpleSale.Response;    <span class="hljs-comment">// 1</span>
resultSimpleSale.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultSimpleSale.TransId;    <span class="hljs-comment">// 11032432</span>
resultSimpleSale.XRef;    <span class="hljs-comment">// 3876731707</span>
resultSimpleSale.AuthCode;    <span class="hljs-comment">// 123456</span>
resultSimpleSale.Type;    <span class="hljs-comment">// sale</span>
resultSimpleSale.CodeResponse;    <span class="hljs-comment">// 100</span>
resultSimpleSale.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032432</span>
result.XRef;    <span class="hljs-comment">// 3876731707</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// refund</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-issuing-a-refund-Simple-refund-advanced-refund" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Advanced Refund</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>refund</td>
<td>Refund</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transid</strong></td>
<td></td>
<td>Original payment gateway transaction ID</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>d.dd</td>
<td>Total amount to be refunded</td>
</tr>
<tr>
<td>opt_amount_type_#</td>
<td>tip/surcharge</td>
<td>Type of additional amount</td>
</tr>
<tr>
<td>opt_amount_value_#</td>
<td></td>
<td>Value of additional amount (1.00)</td>
</tr>
<tr>
<td>sendtransreceipttobillemail</td>
<td>true/false</td>
<td>If true a receipt will be sent to the email provided in the billing information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoshipemail</td>
<td>true/false</td>
<td>If true a receipt will be sent to the email provided in the shipping information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoemails</td>
<td>email@email.com</td>
<td>Send multiple transaction receipts to customers. Multiple email must be separated by commas.</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">transtype=refund&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transid=12345678&amp;amount=12.00&amp;sendtransreceipttoemails=John.Smith@email.com
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=refund&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transid=10750789&amp;\
amount=9.95&amp;\
sendtransreceipttobillemail=true&amp;\
sendtransreceipttoshipemail=true&amp;\
sendtransreceipttoemails=email@email.com"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750789&amp;
xref=3829708545&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=refund&amp;
avsresponse=&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultSimpleSale = <span class="hljs-keyword">await</span> _sparrow.SimpleSale(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AdvancedRefund(
    transId: resultSimpleSale.TransId, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT SimpleSale:</p>
<pre class="language-csharp"><code class="language-csharp">resultSimpleSale.Status;    <span class="hljs-comment">// 200</span>
resultSimpleSale.Response;    <span class="hljs-comment">// 1</span>
resultSimpleSale.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultSimpleSale.TransId;    <span class="hljs-comment">// 11032433</span>
resultSimpleSale.XRef;    <span class="hljs-comment">// 3876731759</span>
resultSimpleSale.AuthCode;    <span class="hljs-comment">// 123456</span>
resultSimpleSale.Type;    <span class="hljs-comment">// sale</span>
resultSimpleSale.CodeResponse;    <span class="hljs-comment">// 100</span>
resultSimpleSale.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032433</span>
result.XRef;    <span class="hljs-comment">// 3876731759</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// refund</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.refund({
  <span class="hljs-symbol">transid:</span> <span class="hljs-string">'10750789'</span>,
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">sendtransreceipttobillemail:</span> <span class="hljs-string">'true'</span>,
  <span class="hljs-symbol">sendtransreceipttoshipemail:</span> <span class="hljs-string">'true'</span>,
  <span class="hljs-symbol">sendtransreceipttoemails:</span> <span class="hljs-string">'email@email.com'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '10750789'</span>
result.xref <span class="hljs-comment"># =&gt; '3829708545'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.orderid <span class="hljs-comment"># =&gt; ''</span>
result.type <span class="hljs-comment"># =&gt; 'refund'</span>
result.avsresponse <span class="hljs-comment"># =&gt; ''</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-issuing-a-void" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Issuing a Void</h1>
<p>Transaction voids will cancel an existing sale, authorization or capture on the
same day that the original transaction was processed. Voids can only occur if
the transaction has not been settled.</p>
<p>If the transaction has been settled, a refund must be issued.</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-issuing-a-void-simple-void" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Simple Void</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>void</td>
<td>Void</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transid</strong></td>
<td></td>
<td>Original payment gateway transaction ID</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">transtype=void&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transid=12345678
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=void&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transid=10750790&amp;\
amount=9.95"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Transaction+Void+Successful&amp;
transid=10750790&amp;
xref=3829708544&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=void&amp;
avsresponse=&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultSimpleSale = <span class="hljs-keyword">await</span> _sparrow.SimpleSale(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleVoid(
    transId: resultSimpleSale.TransId);
</code></pre>
<p>RESULT SimpleSale:</p>
<pre class="language-csharp"><code class="language-csharp">resultSimpleSale.Status;    <span class="hljs-comment">// 200</span>
resultSimpleSale.Response;    <span class="hljs-comment">// 1</span>
resultSimpleSale.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultSimpleSale.TransId;    <span class="hljs-comment">// 11032436</span>
resultSimpleSale.XRef;    <span class="hljs-comment">// 3876731838</span>
resultSimpleSale.AuthCode;    <span class="hljs-comment">// 123456</span>
resultSimpleSale.Type;    <span class="hljs-comment">// sale</span>
resultSimpleSale.CodeResponse;    <span class="hljs-comment">// 100</span>
resultSimpleSale.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Transaction Void Successful</span>
result.TransId;    <span class="hljs-comment">// 11032436</span>
result.XRef;    <span class="hljs-comment">// 3876731838</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// void</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.void({
  <span class="hljs-symbol">transid:</span> <span class="hljs-string">'12345678'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'Transaction Void Successful'</span>
result.transid <span class="hljs-comment"># =&gt; '10750790'</span>
result.xref <span class="hljs-comment"># =&gt; '3829708544'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.orderid <span class="hljs-comment"># =&gt; ''</span>
result.type <span class="hljs-comment"># =&gt; 'void'</span>
result.avsresponse <span class="hljs-comment"># =&gt; ''</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-issuing-a-void-simple-void-advanced-void" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Advanced Void</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>void</td>
<td>Void</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transid</strong></td>
<td></td>
<td>Original payment gateway transaction ID</td>
</tr>
<tr>
<td>sendtransreceipttobillemail</td>
<td>true/false</td>
<td>If true a receipt will be sent to the email provided in the billing information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoshipemail</td>
<td>true/false</td>
<td>If true a receipt will be sent to the email provided in the shipping information if email is specified</td>
</tr>
<tr>
<td>sendtransreceipttoemails</td>
<td>email@email.com</td>
<td>Send multiple transaction receipts to customers. Multiple email must be separated by commas.</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">transtype=void&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transid=12345678&amp;sendtransreceipttoemails=John.Smith@email.com
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=void&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transid=10750800&amp;\
sendtransreceipttobillemail=true&amp;\
sendtransreceipttoshipemail=true&amp;\
sendtransreceipttoemails=email@email.com"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Transaction+Void+Successful&amp;
transid=10750800&amp;
xref=3829708562&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=void&amp;
avsresponse=&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultSimpleSale = <span class="hljs-keyword">await</span> _sparrow.SimpleSale(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AdvancedVoid(
    transId: resultSimpleSale.TransId);
</code></pre>
<p>RESULT SimpleSale:</p>
<pre class="language-csharp"><code class="language-csharp">resultSimpleSale.Status;    <span class="hljs-comment">// 200</span>
resultSimpleSale.Response;    <span class="hljs-comment">// 1</span>
resultSimpleSale.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultSimpleSale.TransId;    <span class="hljs-comment">// 11032435</span>
resultSimpleSale.XRef;    <span class="hljs-comment">// 3876731796</span>
resultSimpleSale.AuthCode;    <span class="hljs-comment">// 123456</span>
resultSimpleSale.Type;    <span class="hljs-comment">// sale</span>
resultSimpleSale.CodeResponse;    <span class="hljs-comment">// 100</span>
resultSimpleSale.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Transaction Void Successful</span>
result.TransId;    <span class="hljs-comment">// 11032435</span>
result.XRef;    <span class="hljs-comment">// 3876731796</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// void</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-Creating-a-credit" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Creating a Credit</h1>
<p>Transaction credits apply a positive amount to a cardholder’s card. Unlike a
refund, a credit is not associated with an original sale transaction.</p>

         </div>
      </div>
      
   </div>
</section>           

           
              
<section id="documenter-airline-passenger-sale" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Airline Passenger Sale</h1>
<p>Through our integration with the Airline Reporting Corporation
(<a href="https://www2.arccorp.com/">ARC</a>) we have the ability to offer
Airline Passenger Sales.</p>
<p>Passenger sales run similarly to traditional sale, auth and capture but all
passenger transactions are batched and executed each night via a separate
settlement operation.</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-airline-passenger-sale-passenger-sale" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Passenger Sale</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>passengersale</td>
<td>Transaction Sale</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0719 = 7/2019</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>d.dd</td>
<td>Total amount to be charged (ie. 10.00)</td>
</tr>
<tr>
<td>cvv</td>
<td></td>
<td>Card security code</td>
</tr>
<tr>
<td><strong>passengername</strong></td>
<td>[a-z, A-Z, 0-9, ‘ ’]</td>
<td>First and last name of the passenger, 1-20 characters</td>
</tr>
<tr>
<td>stopovercode1 stopovercode2 stopovercode3 stopovercode4 stopovercode5</td>
<td>‘ ’, ‘O’, ‘X’</td>
<td></td>
</tr>
<tr>
<td><strong>airportcode1</strong></td>
<td>[a-z, A-Z, 0-9]</td>
<td>Origination Airport Code, 3 characters</td>
</tr>
<tr>
<td>airportcode2 airportcode3 airportcode4 airportcode5</td>
<td>[a-z, A-Z, 0-9]</td>
<td>Codes for different trip legs, 3 characters</td>
</tr>
<tr>
<td>carriercoupon1 carriercoupon2 carriercoupon3 carriercoupon4</td>
<td>[a-z, A-Z, 0-9]</td>
<td>2 characters</td>
</tr>
<tr>
<td><strong>airlinecodenumber</strong></td>
<td>[a-z, A-Z, 0-9]</td>
<td>3 characters</td>
</tr>
<tr>
<td><strong>ticketnumber</strong></td>
<td>[0-9]</td>
<td>10 characters</td>
</tr>
<tr>
<td>classofservicecoupon1 classofservicecoupon2 classofservicecoupon3 classofservicecoupon4</td>
<td>[a-z, A-Z, 0-9]</td>
<td>1 or 2 characters</td>
</tr>
<tr>
<td><strong>flightdatecoupon1</strong></td>
<td>MM/DD/YYYY</td>
<td>Departure date</td>
</tr>
<tr>
<td><strong>flightdeparturetimecoupon1</strong></td>
<td>HH:mm (military)</td>
<td>Departure time</td>
</tr>
<tr>
<td>addressverificationcode</td>
<td>[a-z, A-Z, 0-9]</td>
<td>1 character</td>
</tr>
<tr>
<td><strong>approvalcode</strong></td>
<td>[a-z, A-Z, 0-9]</td>
<td>6 characters</td>
</tr>
<tr>
<td>transactionid</td>
<td>[a-z, A-Z, 0-9]</td>
<td>The field must be forwarded when sent from TSYS, or manually filled with zeros. 15 characters</td>
</tr>
<tr>
<td><strong>authcharindicator</strong></td>
<td>supported values: ‘ ’, ‘A’, ‘E’, ‘F’, ‘I’, ‘C’, ‘K’, ‘M’, ‘N’, ‘P’, ‘R’, ‘S’, ‘T’, ‘U’, ‘V’, ‘W’</td>
<td>Used as Returned Authorization Characteristics Indicator. Must contain the value returned in authorization response (ic case of online auth)</td>
</tr>
<tr>
<td>referencenumber</td>
<td>[a-z, A-Z, 0-9]</td>
<td>12 characters</td>
</tr>
<tr>
<td><strong>validationcode</strong></td>
<td>[a-z, A-Z, 0-9]</td>
<td>4 characters</td>
</tr>
<tr>
<td><strong>authresponsecode</strong></td>
<td>[a-zA-Z0-9 ] or two spaces</td>
<td>2 characters</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">Example
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=sale&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
amount=9.95&amp;\
cvv=999&amp;\
passengername=John Doe&amp;\
stopovercode1=O&amp;\
airportcode1=LAS&amp;\
airportcode2=CDG&amp;\
airportcode3=IAD&amp;\
airportcode4=CPH&amp;\
carriercoupon1 carriercoupon2 carriercoupon3 carriercoupon4=AA;BB&amp;\
airlinecodenumber=AA0&amp;\
ticketnumber=1234567890&amp;\
classofservicecoupon1 classofservicecoupon2 classofservicecoupon3 classofservicecoupon4=00;AA&amp;\
flightdatecoupon1=01/31/2017&amp;\
flightdeparturetimecoupon1=23:59&amp;\
addressverificationcode=A&amp;\
approvalcode=123456&amp;\
transactionid=1234567890&amp;\
authcharindicator=A&amp;\
referencenumber=123456789012&amp;\
validationcode=1234&amp;\
authresponsecode=AB"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750803&amp;
xref=3829708653&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=sale&amp;
avsresponse=&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.PassengerSale(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m, 
    passengerName: <span class="hljs-string">"John Doe"</span>, 
    airportCodes: <span class="hljs-keyword">new</span> []{ <span class="hljs-string">""</span> }, 
    airlineCodeNumber: <span class="hljs-string">"AA0"</span>, 
    ticketNumber: <span class="hljs-string">"1234567890"</span>, 
    flightDateCoupons: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    flightDepartureTimeCoupons: <span class="hljs-keyword">new</span> []{ <span class="hljs-string">""</span> }, 
    approvalCode: <span class="hljs-string">"123456"</span>, 
    authCharIndicator: Sparrow.AuthCharIndicator.A, 
    validationCode: <span class="hljs-string">"1234"</span>, 
    authResponseCode: <span class="hljs-string">"AB"</span>);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 500</span>
result.Response;    <span class="hljs-comment">// 3</span>
result.TextResponse;    <span class="hljs-comment">// Operation type is not supported by payment processor</span>
result.Type;    <span class="hljs-comment">// passengersale</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.passenger_sale({
  <span class="hljs-symbol">cardnum:</span> <span class="hljs-string">'4111111111111111'</span>,
  <span class="hljs-symbol">cardexp:</span> <span class="hljs-string">'1019'</span>,
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">cvv:</span> <span class="hljs-string">'999'</span>,
  <span class="hljs-symbol">passengername:</span> <span class="hljs-string">'John Doe'</span>,
  <span class="hljs-symbol">stopovercode1:</span> <span class="hljs-string">'O'</span>,
  <span class="hljs-symbol">airportcode1:</span> <span class="hljs-string">'LAS'</span>,
  <span class="hljs-symbol">airportcode2:</span> <span class="hljs-string">'CDG'</span>,
  <span class="hljs-symbol">airportcode3:</span> <span class="hljs-string">'IAD'</span>,
  <span class="hljs-symbol">airportcode4:</span> <span class="hljs-string">'CPH'</span>,
  <span class="hljs-symbol">carriercoupon4:</span> <span class="hljs-string">'AA;BB'</span>,
  <span class="hljs-symbol">airlinecodenumber:</span> <span class="hljs-string">'AA0'</span>,
  <span class="hljs-symbol">ticketnumber:</span> <span class="hljs-string">'1234567890'</span>,
  <span class="hljs-symbol">classofservicecoupon4:</span> <span class="hljs-string">'00;AA'</span>,
  <span class="hljs-symbol">flightdatecoupon1:</span> <span class="hljs-string">'01/31/2017'</span>,
  <span class="hljs-symbol">flightdeparturetimecoupon1:</span> <span class="hljs-string">'23:59'</span>,
  <span class="hljs-symbol">addressverificationcode:</span> <span class="hljs-string">'A'</span>,
  <span class="hljs-symbol">approvalcode:</span> <span class="hljs-string">'123456'</span>,
  <span class="hljs-symbol">transactionid:</span> <span class="hljs-string">'1234567890'</span>,
  <span class="hljs-symbol">authcharindicator:</span> <span class="hljs-string">'A'</span>,
  <span class="hljs-symbol">referencenumber:</span> <span class="hljs-string">'123456789012'</span>,
  <span class="hljs-symbol">validationcode:</span> <span class="hljs-string">'1234'</span>,
  <span class="hljs-symbol">authresponsecode:</span> <span class="hljs-string">'AB'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '10750803'</span>
result.xref <span class="hljs-comment"># =&gt; '3829708653'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.orderid <span class="hljs-comment"># =&gt; ''</span>
result.type <span class="hljs-comment"># =&gt; 'sale'</span>
result.avsresponse <span class="hljs-comment"># =&gt; ''</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-starcard" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Military Star Card</h3>
<p></p>
<p>The Military Star Card is a private-label line of credit offered by the Military
Exchange Credit Service and managed by the Army and Air Force Exchange Service.</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-starcard-simple-starcard" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Simple Star Card</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>sale</td>
<td>Transaction sale</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum​</strong></td>
<td></td>
<td>Card number</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>d.dd</td>
<td>Total amount to be refunded</td>
</tr>
<tr>
<td><strong>CID</strong></td>
<td>Custom Field</td>
<td>11 digit numerical code</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;cardnum=6019440000011111&amp;amount=20.00&amp;CID=52347800001
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=sale&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
amount=9.95&amp;\
cardexp=1019&amp;\
CID=12345678901"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750791&amp;
xref=3829708548&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=sale&amp;
avsresponse=&amp;
cvvresponse=&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleStarCard(
    cardNum: <span class="hljs-string">"4111111111111111"</span>, 
    amount: <span class="hljs-number">9.99</span>m, 
    CID: <span class="hljs-string">"12345678901"</span>);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 400</span>
result.TextResponse;    <span class="hljs-comment">// System Error: Reason Code: 002 CID value is invalid or non existant</span>
result.TransId;    <span class="hljs-comment">// 11032442</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeDescription;    <span class="hljs-comment">// Denied</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-starcard-simple-starcard-advanced-starcard" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Advanced Star Card</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>sale</td>
<td>Transaction Sale</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>d.dd</td>
<td>Total amount to be charged (ie. 10.00)</td>
</tr>
<tr>
<td><strong>CID</strong></td>
<td>custom field</td>
<td>11 digit numerical code</td>
</tr>
<tr>
<td>currency</td>
<td>CCC (ISO 4217 alphabetic code)</td>
<td>Code of the payment currency. If currency is not specified, the default currency (USD) is assumed.</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td>skunumber_#</td>
<td></td>
<td>SKU number of the product being purchased (skunumber_1, skunumber_2, etc)</td>
</tr>
<tr>
<td>description_#</td>
<td></td>
<td>Description of the product being purchased</td>
</tr>
<tr>
<td>amount_#</td>
<td></td>
<td>Price of the single unit of a product being purchased</td>
</tr>
<tr>
<td>quantity_#</td>
<td></td>
<td>Number of units of a product being purchased</td>
</tr>
<tr>
<td>orderdesc</td>
<td></td>
<td>Order Description</td>
</tr>
<tr>
<td>orderid</td>
<td></td>
<td>Order ID</td>
</tr>
<tr>
<td>cardipaddress</td>
<td>ddd.ddd.ddd.ddd</td>
<td>IP address of the customer, can be used for fraud prevention in FBI Tools</td>
</tr>
<tr>
<td>tax</td>
<td>d.dd</td>
<td>Total tax amount</td>
</tr>
<tr>
<td>shipamount</td>
<td>d.dd</td>
<td>Total shipping amount</td>
</tr>
<tr>
<td>ponumber</td>
<td></td>
<td>Original Purchase Order</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td>Billing company</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td>Billing address2</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td>state</td>
<td>2 character abbreviation</td>
<td>Billing state</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
<tr>
<td>country</td>
<td>CC (ISO-3166)</td>
<td>Billing Country (ie. US)</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td>Billing phone number</td>
</tr>
<tr>
<td>fax</td>
<td></td>
<td>Billing fax number</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Billing Email Address</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td>Shipping first name</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td>Shipping last name</td>
</tr>
<tr>
<td>shipcompany</td>
<td></td>
<td>Shipping company</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td>Shipping Address</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td>Shipping Address - line 2</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td>Shipping City</td>
</tr>
<tr>
<td>shipstate</td>
<td>2 character abbreviation</td>
<td>Shipping State</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td>Shipping Zip Code</td>
</tr>
<tr>
<td>shipcountry</td>
<td>CC (ISO - 3166)</td>
<td>Shipping Country, ie US</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td>Shipping Phone Number</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td>Shipping Email</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=57.85&amp;cardnum=6019440000011111&amp;CID=12345678911&amp;cvv=999&amp;skunumber_1=5558779&amp;description_1=menssweaterblue&amp;amount_1=50.00&amp;quantity_1=1&amp;tax=2.85&amp;shipamount=5.00&amp;firstname=John&amp;lastname=Smith&amp;address1=888+test+address&amp;city=Los+Angeles&amp;country=US&amp;state=CA&amp;phone=222-444-2938&amp;shipfirstname=John&amp;shiplastname=Smith&amp;shipaddress1=888+test+address&amp;shipcity=Los+Angeles&amp;shipstate=CA&amp;shipphone=2224442938
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=sale&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
amount=9.95&amp;\
CID=12345678901&amp;\
currency=USD&amp;\
firstname=John&amp;\
lastname=Doe&amp;\
skunumber_1=123&amp;\
skunumber_2=456&amp;\
description_1=Blue widget&amp;\
description_2=Brown widget&amp;\
amount_1=1.99&amp;\
amount_2=2.99&amp;\
quantity_1=1&amp;\
quantity_2=2&amp;\
orderdesc=Order Description&amp;\
orderid=11111&amp;\
cardipaddress=8.8.8.8&amp;\
tax=0.25&amp;\
shipamount=1.25&amp;\
ponumber=22222&amp;\
company=Sparrow One&amp;\
address1=16100 N 71st Street&amp;\
address2=Suite 170&amp;\
city=Scottsdale&amp;\
state=AZ&amp;\
zip=85254&amp;\
country=US&amp;\
email=john@norepy.com&amp;\
shipfirstname=Jane&amp;\
shiplastname=Doe&amp;\
shipcompany=Sparrow Two&amp;\
shipaddress1=16100 N 72nd Street&amp;\
shipaddress2=Suite 171&amp;\
shipcity=Pheonix&amp;\
shipstate=AZ&amp;\
shipzip=85004&amp;\
shipcountry=US&amp;\
shipphone=6025551234&amp;\
shipemail=jane@noreply.com"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750808&amp;
xref=3829708587&amp;
authcode=123456&amp;
orderid=11111&amp;
<span class="hljs-built_in">type</span>=sale&amp;
avsresponse=N&amp;
cvvresponse=&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AdvancedStarCard(
    cardNum: <span class="hljs-string">"4111111111111111"</span>, 
    cardExp: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    amount: <span class="hljs-number">9.99</span>m, 
    CID: <span class="hljs-string">"12345678901"</span>);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 400</span>
result.TextResponse;    <span class="hljs-comment">// System Error: Reason Code: 002 CID value is invalid or non existant</span>
result.TransId;    <span class="hljs-comment">// 11032441</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeDescription;    <span class="hljs-comment">// Denied</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-ach" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>ACH and eCheck</h3>
<p></p>
<p>Automated Clearing House (ACH) is an electronic network for financial
transactions in the United States. ACH allows merchants to debit and credit
funds directly to and from client’s banks accounts.</p>
<p></p>
<p>ACH/ eCheck Test Transaction Information</p>
<p>Bank name: <code>First Test Bank</code></p>
<p>Routing number: <code>110000000</code></p>
<p>Account number: <code>1234567890123 / 3210987654321</code></p>
<p>Account type: <code>P / B</code></p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-ach-simple-ach" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Simple ACH</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>sale/ refund/ credit</td>
<td>sale- transaction sale, refund- transaction refund, credit- transaction credit</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>bankname​</strong></td>
<td></td>
<td></td>
<td>Customers bank name</td>
</tr>
<tr>
<td><strong>routing</strong></td>
<td></td>
<td></td>
<td>Customers bank routing number</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td></td>
<td></td>
<td>Customers bank account number</td>
</tr>
<tr>
<td><strong>achaccounttype</strong></td>
<td></td>
<td>checking/savings</td>
<td>Customers type of bank account</td>
</tr>
<tr>
<td><strong>achaccountsubtype</strong></td>
<td></td>
<td>business/personal</td>
<td>Customers type of bank account</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td></td>
<td>Billing Company</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;bankname=BankofAmerica&amp;routing=123456789&amp;account=11111999&amp;achaccounttype=checking&amp;achaccountsubtype=personal
</code></pre>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;bankname=BankofAmerica&amp;routing=123456789&amp;account=11111999&amp;achaccounttype=checking&amp;achaccountsubtype=business&amp;company=CompanyName
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=sale&amp;\
mkey=<span class="hljs-variable">$ACH_M_KEY</span>&amp;\
bankname=First Test Bank&amp;\
routing=110000000&amp;\
account=1234567890123&amp;\
achaccounttype=checking&amp;\
achaccountsubtype=personal&amp;\
amount=9.95&amp;\
firstname=John&amp;\
lastname=Doe"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=00&amp;
textresponse=SUCCESS&amp;
transid=10750797&amp;
xref=3829708697&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=sale&amp;
avsresponse=&amp;
cvvresponse=&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleACH(
    bankAccount: <span class="hljs-keyword">new</span> Sparrow.BankAccount{ BankName = <span class="hljs-string">"First Test Bank"</span>, Routing = <span class="hljs-string">"110000000"</span>, Account = <span class="hljs-string">"1234567890123"</span>, AchAccountType = Sparrow.AchAccountType.Checking, AchAccountSubType = Sparrow.AchAccountSubType.Personal }, 
    amount: <span class="hljs-number">9.99</span>m, 
    contactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> });
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032420</span>
result.XRef;    <span class="hljs-comment">// 3876731380</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.sale({
  <span class="hljs-symbol">bankname:</span> <span class="hljs-string">'First Test Bank'</span>,
  <span class="hljs-symbol">routing:</span> <span class="hljs-string">'110000000'</span>,
  <span class="hljs-symbol">account:</span> <span class="hljs-string">'1234567890123'</span>,
  <span class="hljs-symbol">achaccounttype:</span> <span class="hljs-string">'checking'</span>,
  <span class="hljs-symbol">achaccountsubtype:</span> <span class="hljs-string">'personal'</span>,
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">firstname:</span> <span class="hljs-string">'John'</span>,
  <span class="hljs-symbol">lastname:</span> <span class="hljs-string">'Doe"'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '00'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '11037938'</span>
result.xref <span class="hljs-comment"># =&gt; '3877926141'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.type <span class="hljs-comment"># =&gt; 'sale'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-ach-simple-ach-advanced-sale" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Advanced ACH</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>sale/ refund/ credit</td>
<td>sale- transaction sale, refund- transaction refund, credit- transaction credit</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>bankname​</strong></td>
<td></td>
<td></td>
<td>Customers bank name</td>
</tr>
<tr>
<td><strong>routing</strong></td>
<td></td>
<td></td>
<td>Customers bank routing number</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td></td>
<td></td>
<td>Customers bank account number</td>
</tr>
<tr>
<td><strong>achaccounttype</strong></td>
<td></td>
<td>checking/savings</td>
<td>Customers type of bank account</td>
</tr>
<tr>
<td><strong>achaccountsubtype</strong></td>
<td></td>
<td>business/personal</td>
<td>Customers type of bank account</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged</td>
</tr>
<tr>
<td>orderdesc</td>
<td></td>
<td></td>
<td>Order Description</td>
</tr>
<tr>
<td>orderid</td>
<td></td>
<td></td>
<td>Order ID</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td></td>
<td>Billing first name, should be from 1-100 characters</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td></td>
<td>Billing last name, should be from 1-100 characters</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td></td>
<td>Billing Company</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td></td>
<td>Billing address. Should be from 1-200 alpha-numeric characters and can include # - : ;</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td></td>
<td>Billing address - line 2. Should be from 1-200 alpha-numeric characters and can include # - : ;</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td></td>
<td>Billing city, should be 1-50 alpha characters</td>
</tr>
<tr>
<td>state</td>
<td></td>
<td></td>
<td>Billing state (2 character abbreviation)</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
<tr>
<td>country</td>
<td></td>
<td>cc</td>
<td>Billing country (ie. US)</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td></td>
<td>Billing phone number, 10 digits</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td></td>
<td>Billing email address</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td></td>
<td>Shipping first name, should be from 1-100 characters. Required for PayPal processor if shipping address is entered.</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td></td>
<td>Shipping last name, should be from 1-100 characters. Required for PayPal processor if shipping address is entered.</td>
</tr>
<tr>
<td>shipcompany</td>
<td></td>
<td></td>
<td>Shipping company</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td></td>
<td>Shipping address. Should be from 1-200 alpha-numeric characters and can include # - : ;</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td></td>
<td>Shipping address - line 2. Should be from 1-200 alpha-numeric characters and can include # - : ;</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td></td>
<td>Shipping city, should be 1-50 alpha characters</td>
</tr>
<tr>
<td>shipstate</td>
<td></td>
<td></td>
<td>Shipping state, 2 character abbreviation</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td></td>
<td>Shipping postal code. If the country is US the zip code format must be: [5 digits: XXXXX] or [9 digits XXXXX-XXXX]</td>
</tr>
<tr>
<td>shipcountry</td>
<td></td>
<td>cc</td>
<td>Shipping country (ie. US)</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td></td>
<td>Shipping phone number, 10 digits</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td></td>
<td>Shipping email</td>
</tr>
<tr>
<td>saveclient</td>
<td></td>
<td>true/false</td>
<td>If parameter 'saveclient' = true and the customer is identified as new, then a new Data Vault client will be created with payment/contact info from the transaction data and DV token will be generated. The payment transaction will be assigned to this new DV client.</td>
</tr>
<tr>
<td>updateclient</td>
<td></td>
<td></td>
<td>If the parameter 'updateclient' = true and the DataVault finds the client according to customer identification rules, then the payment transaction will be assigned to the DataVault client and the DataVault client payment/contact info will be updated according to the transaction's data.</td>
</tr>
<tr>
<td>opt_amount_type_#</td>
<td></td>
<td></td>
<td>Type of additional amount (Tip)</td>
</tr>
<tr>
<td>opt_amount_value_#</td>
<td></td>
<td>d.dd</td>
<td>Value of the additional amount (10.00)</td>
</tr>
<tr>
<td>opt_amount_percentage_#</td>
<td></td>
<td></td>
<td>Percentage of additional amount (20)</td>
</tr>
<tr>
<td>birthdate</td>
<td></td>
<td>MM/DD/YYYY</td>
<td>Birthdate of the customer</td>
</tr>
<tr>
<td>checknumber</td>
<td></td>
<td></td>
<td>Check number. 1-15 alphanumeric characters</td>
</tr>
<tr>
<td>driverlicensenumber</td>
<td></td>
<td></td>
<td>Drivers license number, 1-50 alphanumeric characters</td>
</tr>
<tr>
<td>driverlicensecountry</td>
<td></td>
<td>cc</td>
<td>Drivers license country</td>
</tr>
<tr>
<td>driverlicensestate</td>
<td></td>
<td>cc</td>
<td>Drivers license state</td>
</tr>
<tr>
<td>courtesycardid</td>
<td></td>
<td>[a-z, A-Z, 0-9]</td>
<td>This field is optional only for GETI ACH, for other processors can be ignored. From 1 to 50 characters.</td>
</tr>
<tr>
<td>sendtransreceipttobillemail</td>
<td></td>
<td>true/false</td>
<td>If true, this will send a transaction receipt to the billing email if present</td>
</tr>
<tr>
<td>sendtransreceipttoshipemail</td>
<td></td>
<td>true/false</td>
<td>If true, this will send a transaction receipt to the shipping email if present</td>
</tr>
<tr>
<td>sendtransreceipttoemails</td>
<td></td>
<td>email@email.com</td>
<td>Send multiple transaction receipts to customers. Multiple email must be separated by commas.</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;bankname=BankofAmerica&amp;routing=123456789&amp;account=11111999&amp;achaccounttype=checking&amp;achaccountsubtype=personal&amp;firstname=Henry&amp;lastname=Johnson&amp;phone=8526547896&amp;email=hjohnson@test.com
</code></pre>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;bankname=BankofAmerica&amp;routing=123456789&amp;account=11111999&amp;achaccounttype=checking&amp;achaccountsubtype=business&amp;company=CompanyName&amp;firstname=Henry&amp;lastname=Johnson&amp;phone=8526547896&amp;email=hjohnson@test.com
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=sale&amp;\
mkey=<span class="hljs-variable">$ACH_M_KEY</span>&amp;\
bankname=First Test Bank&amp;\
routing=110000000&amp;\
account=1234567890123&amp;\
achaccounttype=checking&amp;\
achaccountsubtype=personal&amp;\
amount=9.95&amp;\
orderdesc=Order Description&amp;\
orderid=11111&amp;\
firstname=John&amp;\
lastname=Doe&amp;\
company=Sparrow One&amp;\
address1=16100 N 71st Street&amp;\
address2=Suite 170&amp;\
city=Scottsdale&amp;\
state=AZ&amp;\
zip=85254&amp;\
country=US&amp;\
phone=7025551234&amp;\
email=john@norepy.com&amp;\
shipaddress1=16100 N 72nd Street&amp;\
shipaddress2=Suite 171&amp;\
shipcity=Pheonix&amp;\
shipstate=AZ&amp;\
shipzip=85004&amp;\
shipcountry=US&amp;\
shipphone=6025551234&amp;\
shipemail=jane@noreply.com&amp;\
saveclient=true&amp;\
updateclient=true&amp;\
opt_amount_type_1=surcharge&amp;\
opt_amount_value_1=1.01&amp;\
opt_amount_percentage_1=18&amp;\
birthdate=01/31/2000&amp;\
checknumber=123&amp;\
driverlicensenumber=1234567890&amp;\
driverlicensecountry=US&amp;\
driverlicensestate=AZ&amp;\
sendtransreceipttobillemail=true&amp;\
sendtransreceipttoshipemail=true&amp;\
paymentdescriptor=Custom Payment Descriptor"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=00&amp;
textresponse=SUCCESS%2c+Customer+with+token+%27I07IO05HGP0NXIQM%27+successfully+updated%2c+Payment+transaction+successfully+assigned+to+the+customer+with+token+%27I07IO05HGP0NXIQM%27&amp;
transid=10750811&amp;
xref=3829708723&amp;
authcode=123456&amp;
orderid=11111&amp;
<span class="hljs-built_in">type</span>=sale&amp;
avsresponse=&amp;
cvvresponse=&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200&amp;
token=I07IO05HGP0NXIQM
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AdvancedACH(
    bankAccount: <span class="hljs-keyword">new</span> Sparrow.BankAccount{ BankName = <span class="hljs-string">"First Test Bank"</span>, Routing = <span class="hljs-string">"110000000"</span>, Account = <span class="hljs-string">"1234567890123"</span>, AchAccountType = Sparrow.AchAccountType.Checking, AchAccountSubType = Sparrow.AchAccountSubType.Personal }, 
    amount: <span class="hljs-number">9.99</span>m, 
    contactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> });
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032419</span>
result.XRef;    <span class="hljs-comment">// 3876731375</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.sale({
  <span class="hljs-symbol">bankname:</span> <span class="hljs-string">'First Test Bank'</span>,
  <span class="hljs-symbol">routing:</span> <span class="hljs-string">'110000000'</span>,
  <span class="hljs-symbol">account:</span> <span class="hljs-string">'1234567890123'</span>,
  <span class="hljs-symbol">achaccounttype:</span> <span class="hljs-string">'checking'</span>,
  <span class="hljs-symbol">achaccountsubtype:</span> <span class="hljs-string">'personal'</span>,
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">orderdesc:</span> <span class="hljs-string">'Order Description'</span>,
  <span class="hljs-symbol">orderid:</span> <span class="hljs-string">'11111'</span>,
  <span class="hljs-symbol">firstname:</span> <span class="hljs-string">'John'</span>,
  <span class="hljs-symbol">lastname:</span> <span class="hljs-string">'Doe'</span>,
  <span class="hljs-symbol">company:</span> <span class="hljs-string">'Sparrow One'</span>,
  <span class="hljs-symbol">address1:</span> <span class="hljs-string">'16100 N 71st Street'</span>,
  <span class="hljs-symbol">address2:</span> <span class="hljs-string">'Suite 170'</span>,
  <span class="hljs-symbol">city:</span> <span class="hljs-string">'Scottsdale'</span>,
  <span class="hljs-symbol">state:</span> <span class="hljs-string">'AZ'</span>,
  <span class="hljs-symbol">zip:</span> <span class="hljs-string">'85254'</span>,
  <span class="hljs-symbol">country:</span> <span class="hljs-string">'US'</span>,
  <span class="hljs-symbol">phone:</span> <span class="hljs-string">'7025551234'</span>,
  <span class="hljs-symbol">email:</span> <span class="hljs-string">'john@norepy.com'</span>,
  <span class="hljs-symbol">shipaddress1:</span> <span class="hljs-string">'16100 N 72nd Street'</span>,
  <span class="hljs-symbol">shipaddress2:</span> <span class="hljs-string">'Suite 171'</span>,
  <span class="hljs-symbol">shipcity:</span> <span class="hljs-string">'Pheonix'</span>,
  <span class="hljs-symbol">shipstate:</span> <span class="hljs-string">'AZ'</span>,
  <span class="hljs-symbol">shipzip:</span> <span class="hljs-string">'85004'</span>,
  <span class="hljs-symbol">shipcountry:</span> <span class="hljs-string">'US'</span>,
  <span class="hljs-symbol">shipphone:</span> <span class="hljs-string">'6025551234'</span>,
  <span class="hljs-symbol">shipemail:</span> <span class="hljs-string">'jane@noreply.com'</span>,
  <span class="hljs-symbol">saveclient:</span> <span class="hljs-string">'true'</span>,
  <span class="hljs-symbol">updateclient:</span> <span class="hljs-string">'true'</span>,
  <span class="hljs-symbol">opt_amount_type_1:</span> <span class="hljs-string">'surcharge'</span>,
  <span class="hljs-symbol">opt_amount_value_1:</span> <span class="hljs-string">'1.01'</span>,
  <span class="hljs-symbol">opt_amount_percentage_1:</span> <span class="hljs-string">'18'</span>,
  <span class="hljs-symbol">birthdate:</span> <span class="hljs-string">'01/31/2000'</span>,
  <span class="hljs-symbol">checknumber:</span> <span class="hljs-string">'123'</span>,
  <span class="hljs-symbol">driverlicensenumber:</span> <span class="hljs-string">'1234567890'</span>,
  <span class="hljs-symbol">driverlicensecountry:</span> <span class="hljs-string">'US'</span>,
  <span class="hljs-symbol">driverlicensestate:</span> <span class="hljs-string">'AZ'</span>,
  <span class="hljs-symbol">sendtransreceipttobillemail:</span> <span class="hljs-string">'true'</span>,
  <span class="hljs-symbol">sendtransreceipttoshipemail:</span> <span class="hljs-string">'true'</span>,
  <span class="hljs-symbol">paymentdescriptor:</span> <span class="hljs-string">'Custom Payment Descriptor'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '00'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS, Customer with token 'LS8W4RO5S7SZKZCN' successfully updated, Payment transaction successfully assigned to the customer with token 'LS8W4RO5S7SZKZCN''</span>
result.transid <span class="hljs-comment"># =&gt; '11037939'</span>
result.xref <span class="hljs-comment"># =&gt; '3877926149'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.orderid <span class="hljs-comment"># =&gt; '11111'</span>
result.type <span class="hljs-comment"># =&gt; 'sale'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>
result.token <span class="hljs-comment"># =&gt; 'LS8W4RO5S7SZKZCN'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-ach-simple-ach-advanced-sale-simple-echeck" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Simple eCheck</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>sale/ refund</td>
<td>sale- transaction sale, refund- transaction refund</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>bankname​</strong></td>
<td></td>
<td></td>
<td>Customers bank name</td>
</tr>
<tr>
<td><strong>routing</strong></td>
<td></td>
<td></td>
<td>Customers bank routing number</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td></td>
<td></td>
<td>Customers bank account number</td>
</tr>
<tr>
<td><strong>achaccounttype</strong></td>
<td></td>
<td>business/personal</td>
<td>Customers type of eCheck account</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td></td>
<td>Billing Company</td>
</tr>
<tr>
<td><strong>firstname</strong></td>
<td></td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td><strong>lastname</strong></td>
<td></td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td><strong>address1</strong></td>
<td></td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td><strong>city</strong></td>
<td></td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td></td>
<td></td>
<td>Billing state (2 character abbreviation)</td>
</tr>
<tr>
<td><strong>zip</strong></td>
<td></td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
<tr>
<td><strong>country</strong></td>
<td></td>
<td>cc</td>
<td>Billing country (ie. US</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;bankname=BankofAmerica&amp;routing=110000000&amp;account=1234567890123&amp;achaccounttype=personal&amp;firstname=Henry&amp;lastname=Johnson&amp;address1=Main+Street+45&amp;city=Scottsdale&amp;zip=12345&amp;country=US&amp;state=AZ
</code></pre>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;bankname=BankofAmerica&amp;routing=110000000&amp;account=1234567890123&amp;achaccounttype=business&amp;company=CompanyName&amp;firstname=Henry&amp;lastname=Johnson&amp;address1=Main+Street+45&amp;city=Scottsdale&amp;zip=12345&amp;country=US&amp;state=AZ
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-csharp code-div active-code">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleECheck(
    bankAccount: <span class="hljs-keyword">new</span> Sparrow.BankAccount{ BankName = <span class="hljs-string">"First Test Bank"</span>, Routing = <span class="hljs-string">"110000000"</span>, Account = <span class="hljs-string">"1234567890123"</span>, AchAccountType = Sparrow.AchAccountType.Checking, AchAccountSubType = Sparrow.AchAccountSubType.Personal }, 
    amount: <span class="hljs-number">9.99</span>m, 
    contactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span>, Company = <span class="hljs-string">"Sparrow One"</span>, Address = <span class="hljs-keyword">new</span> Sparrow.Address{ Address1 = <span class="hljs-string">"16100 N 71st Street"</span>, City = <span class="hljs-string">"Scottsdale"</span>, State = <span class="hljs-string">"AZ"</span>, Zip = <span class="hljs-string">"85254"</span>, Country = <span class="hljs-string">"US"</span> } });
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032421</span>
result.XRef;    <span class="hljs-comment">// 3876731391</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.sale({
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">bankname:</span> <span class="hljs-string">'BankofAmerica'</span>,
  <span class="hljs-symbol">routing:</span> <span class="hljs-string">'110000000'</span>,
  <span class="hljs-symbol">account:</span> <span class="hljs-string">'1234567890123'</span>,
  <span class="hljs-symbol">achaccounttype:</span> <span class="hljs-string">'checking'</span>,
  <span class="hljs-symbol">achaccountsubtype:</span> <span class="hljs-string">'business'</span>,
  <span class="hljs-symbol">company:</span> <span class="hljs-string">'CompanyName'</span>,
  <span class="hljs-symbol">firstname:</span> <span class="hljs-string">'Henry'</span>,
  <span class="hljs-symbol">lastname:</span> <span class="hljs-string">'Johnson'</span>,
  <span class="hljs-symbol">address1:</span> <span class="hljs-string">'Main Street 45'</span>,
  <span class="hljs-symbol">city:</span> <span class="hljs-string">'Scottsdale'</span>,
  <span class="hljs-symbol">zip:</span> <span class="hljs-string">'12345'</span>,
  <span class="hljs-symbol">country:</span> <span class="hljs-string">'US'</span>,
  <span class="hljs-symbol">state:</span> <span class="hljs-string">'AZ'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '00'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '11037947'</span>
result.xref <span class="hljs-comment"># =&gt; '3877926400'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.type <span class="hljs-comment"># =&gt; 'sale'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-ach-simple-ach-advanced-sale-simple-echeck-advanced-echeck-sale" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Advanced eCheck</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>sale/ refund/ credit</td>
<td>sale- transaction sale, refund- transaction refund, credit- transaction credit</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>bankname​</strong></td>
<td></td>
<td></td>
<td>Customers bank name</td>
</tr>
<tr>
<td><strong>routing</strong></td>
<td></td>
<td></td>
<td>Customers bank routing number</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td></td>
<td></td>
<td>Customers bank account number</td>
</tr>
<tr>
<td><strong>achaccounttype</strong></td>
<td></td>
<td>business/personal</td>
<td>Customers type of eCheck account</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged</td>
</tr>
<tr>
<td><strong>firstname</strong></td>
<td></td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td><strong>lastname</strong></td>
<td></td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td></td>
<td>Billing Company</td>
</tr>
<tr>
<td><strong>address1</strong></td>
<td></td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td><strong>city</strong></td>
<td></td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td></td>
<td></td>
<td>Billing state (2 character abbreviation)</td>
</tr>
<tr>
<td><strong>zip</strong></td>
<td></td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
<tr>
<td><strong>country</strong></td>
<td></td>
<td>cc</td>
<td>Billing country (ie. US)</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td></td>
<td>Billing address - line 2</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td></td>
<td>Billing phone number, 10 digits</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td></td>
<td>Billing email address</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td></td>
<td>Shipping first name</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td></td>
<td>Shipping last name</td>
</tr>
<tr>
<td>shipcompany</td>
<td></td>
<td></td>
<td>Shipping company</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td></td>
<td>Shipping address</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td></td>
<td>Shipping address - line 2</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td></td>
<td>Shipping city</td>
</tr>
<tr>
<td>shipstate</td>
<td></td>
<td></td>
<td>Shipping state, 2 character abbreviation</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td></td>
<td>Shipping postal code. If the country is US the zip code format must be: [5 digits: XXXXX] or [9 digits XXXXX-XXXX]</td>
</tr>
<tr>
<td>shipcountry</td>
<td></td>
<td>cc</td>
<td>Shipping country (ie. US)</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td></td>
<td>Shipping phone number, 10 digits</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td></td>
<td>Shipping email</td>
</tr>
<tr>
<td>orderdesc</td>
<td></td>
<td></td>
<td>Order Description</td>
</tr>
<tr>
<td>orderid</td>
<td></td>
<td></td>
<td>Order ID</td>
</tr>
<tr>
<td>saveclient</td>
<td></td>
<td>true/false</td>
<td>If parameter 'saveclient' = true and the customer is identified as new, then a new Data Vault client will be created with payment/contact info from the transaction data and DV token will be generated. The payment transaction will be assigned to this new DV client.</td>
</tr>
<tr>
<td>updateclient</td>
<td></td>
<td></td>
<td>If the parameter 'updateclient' = true and the DataVault finds the client according to customer identification rules, then the payment transaction will be assigned to the DataVault client and the DataVault client payment/contact info will be updated according to the transaction's data.</td>
</tr>
<tr>
<td>opt_amount_type_#</td>
<td></td>
<td></td>
<td>Type of additional amount (Tip)</td>
</tr>
<tr>
<td>opt_amount_value_#</td>
<td></td>
<td>d.dd</td>
<td>Value of the additional amount (10.00)</td>
</tr>
<tr>
<td>opt_amount_percentage_#</td>
<td></td>
<td></td>
<td>Percentage of additional amount (20)</td>
</tr>
<tr>
<td>sendtransreceipttobillemail</td>
<td></td>
<td>true/false</td>
<td>If true, this will send a transaction receipt to the billing email if present</td>
</tr>
<tr>
<td>sendtransreceipttoshipemail</td>
<td></td>
<td>true/false</td>
<td>If true, this will send a transaction receipt to the shipping email if present</td>
</tr>
<tr>
<td>sendtransreceipttoemails</td>
<td></td>
<td>email@email.com</td>
<td>Send multiple transaction receipts to customers. Multiple email must be separated by commas.</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;bankname=BankofAmerica&amp;routing=110000000&amp;account=1234567890123&amp;achaccounttype=personal&amp;firstname=Henry&amp;lastname=Johnson&amp;address1=Main+Street+45&amp;city=Scottsdale&amp;zip=12345&amp;country=US&amp;state=AZ&amp;phone=8526547896&amp;email=hjohnson@test.com
</code></pre>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;bankname=BankofAmerica&amp;routing=110000000&amp;account=1234567890123&amp;achaccounttype=business&amp;company=CompanyName&amp;firstname=Henry&amp;lastname=Johnson&amp;address1=Main+Street+45&amp;city=Scottsdale&amp;zip=12345&amp;country=US&amp;state=AZ&amp;phone=8526547896&amp;email=hjohnson@test.com
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-csharp code-div active-code">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AdvancedECheck(
    bankAccount: <span class="hljs-keyword">new</span> Sparrow.BankAccount{ BankName = <span class="hljs-string">"First Test Bank"</span>, Routing = <span class="hljs-string">"110000000"</span>, Account = <span class="hljs-string">"1234567890123"</span>, AchAccountType = Sparrow.AchAccountType.Checking, AchAccountSubType = Sparrow.AchAccountSubType.Personal }, 
    amount: <span class="hljs-number">9.99</span>m, 
    contactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span>, Company = <span class="hljs-string">"Sparrow One"</span>, Address = <span class="hljs-keyword">new</span> Sparrow.Address{ Address1 = <span class="hljs-string">"16100 N 71st Street"</span>, City = <span class="hljs-string">"Scottsdale"</span>, State = <span class="hljs-string">"AZ"</span>, Zip = <span class="hljs-string">"85254"</span>, Country = <span class="hljs-string">"US"</span> } });
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032418</span>
result.XRef;    <span class="hljs-comment">// 3876731357</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.sale({
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">bankname:</span> <span class="hljs-string">'BankofAmerica'</span>,
  <span class="hljs-symbol">routing:</span> <span class="hljs-string">'110000000'</span>,
  <span class="hljs-symbol">account:</span> <span class="hljs-string">'1234567890123'</span>,
  <span class="hljs-symbol">achaccounttype:</span> <span class="hljs-string">'checking'</span>,
  <span class="hljs-symbol">achaccountsubtype:</span> <span class="hljs-string">'business'</span>,
  <span class="hljs-symbol">company:</span> <span class="hljs-string">'CompanyName'</span>,
  <span class="hljs-symbol">firstname:</span> <span class="hljs-string">'Henry'</span>,
  <span class="hljs-symbol">lastname:</span> <span class="hljs-string">'Johnson'</span>,
  <span class="hljs-symbol">address1:</span> <span class="hljs-string">'Main Street 45'</span>,
  <span class="hljs-symbol">city:</span> <span class="hljs-string">'Scottsdale'</span>,
  <span class="hljs-symbol">zip:</span> <span class="hljs-string">'12345'</span>,
  <span class="hljs-symbol">country:</span> <span class="hljs-string">'US'</span>,
  <span class="hljs-symbol">state:</span> <span class="hljs-string">'AZ'</span>,
  <span class="hljs-symbol">phone:</span> <span class="hljs-string">'8526547896'</span>,
  <span class="hljs-symbol">email:</span> <span class="hljs-string">'hjohnson@test.com'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '00'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '11037948'</span>
result.xref <span class="hljs-comment"># =&gt; '3877926406'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.type <span class="hljs-comment"># =&gt; 'sale'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-ewallet" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>eWallet</h3>
<p>An eWallet is a device, website, software system or database which facilitates
transactions securely by storing a consumers credit card or bank account within
a password protected system.</p>
<p>SPARROW currently supports the PayPal eWallet. eWallet operations can be
processed via both the Services API and Checkout API.</p>
<ul>
<li>
<p>The Services API can be used to process credit operations only</p>
</li>
<li>
<p>The Checkout API must be used for Sale transactions. The customer must be
directed to the PayPal Express Checkout page where they will login to their
PayPal account to pay securely</p>
</li>
</ul>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-ewallet-ewallet-credit" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>eWallet Simple Credit</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>credit</td>
<td>credit- funds being pushed to the customer</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>ewalletaccount​</strong></td>
<td></td>
<td></td>
<td>eWallet account credentials (ie email address associated with the customers paypal account)</td>
</tr>
<tr>
<td>ewallet type​</td>
<td></td>
<td>PayPal</td>
<td>Currently PayPal is the only eWallet type supported</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged (i.e. 10.00)</td>
</tr>
<tr>
<td>currency</td>
<td></td>
<td>ccc</td>
<td>Code of the payment currency. If not currency is specified, the default is USD</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=credit&amp;mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;amount=9.95&amp;ewalletaccount=user@example.com&amp;ewallettype=paypal&amp;currency=USD
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=credit&amp;\
mkey=<span class="hljs-variable">$E_WALLET_M_KEY</span>&amp;\
ewalletaccount=user@example.com&amp;\
ewallet type=PayPal&amp;\
amount=9.95&amp;\
currency=USD"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Successful&amp;
transid=10750788&amp;
xref=KYAN63Z749J92&amp;
authcode=&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=credit&amp;
avsresponse=&amp;
cvvresponse=&amp;
coderesponse=&amp;
codedescription=&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.EWalletSimpleCredit(
    ewallet: <span class="hljs-keyword">new</span> Sparrow.Ewallet{ EwalletAccount = <span class="hljs-string">"user@example.com"</span> }, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Successful</span>
result.TransId;    <span class="hljs-comment">// 11032427</span>
result.XRef;    <span class="hljs-comment">// A2M3983N76ZKS</span>
result.Type;    <span class="hljs-comment">// credit</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.credit({
  <span class="hljs-symbol">ewalletaccount:</span> <span class="hljs-string">'user@example.com'</span>,
  <span class="hljs-symbol">ewallet_type:</span> <span class="hljs-string">'PayPal'</span>,
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">currency:</span> <span class="hljs-string">'USD'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'Successful'</span>
result.transid <span class="hljs-comment"># =&gt; '11037949'</span>
result.xref <span class="hljs-comment"># =&gt; '3RBFE4Q3T5XBJ'</span>
result.type <span class="hljs-comment"># =&gt; 'credit'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-fiserv" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Fiserv</h3>
<p></p>
<p>Fiserv provides a private label, closed loop line of credit for its partners.</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-fiserv-fiserv-simple" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Fiserv Simple Sale</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>sale</td>
<td>sale = Transaction Sale</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0711 = 7/2011)</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td></td>
<td>d.dd</td>
<td>Total amount to be charged (i.e. 10.00)</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;amount=9.95&amp;cardnum=000123456789002&amp;cardexp=1010
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=sale&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
amount=9.95"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750802&amp;
xref=3829708633&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=sale&amp;
avsresponse=&amp;
cvvresponse=&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.FiservSimpleSale(
    cardNum: <span class="hljs-string">"4111111111111111"</span>, 
    cardExp: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032429</span>
result.XRef;    <span class="hljs-comment">// 3876731632</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.sale({
  <span class="hljs-symbol">cardnum:</span> <span class="hljs-string">'4111111111111111'</span>,
  <span class="hljs-symbol">cardexp:</span> <span class="hljs-string">'1019'</span>,
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '11037950'</span>
result.xref <span class="hljs-comment"># =&gt; '3877926499'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.type <span class="hljs-comment"># =&gt; 'sale'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-fiserv-fiserv-simple-fiserv-advanced" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Advanced Fiserv Sale</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>sale</td>
<td>Transaction Sale</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0719 = 7/2019</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>d.dd</td>
<td>Total amount to be charged (ie. 10.00)</td>
</tr>
<tr>
<td>cvv</td>
<td></td>
<td>card security code</td>
</tr>
<tr>
<td>currency</td>
<td>CCC (ISO 4217 alphabetic code)</td>
<td>Code of the payment currency. If currency is not specified, the default currency (USD) is assumed.</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td>skunumber_#</td>
<td></td>
<td>SKU number of the product being purchased (skunumber_1, skunumber_2, etc)</td>
</tr>
<tr>
<td>description_#</td>
<td></td>
<td>Description of the product being purchased</td>
</tr>
<tr>
<td>amount_#</td>
<td></td>
<td>Price of the single unit of a product being purchased</td>
</tr>
<tr>
<td>quantity_#</td>
<td></td>
<td>Number of units of a product being purchased</td>
</tr>
<tr>
<td>orderdesc</td>
<td></td>
<td>Order Description</td>
</tr>
<tr>
<td>orderid</td>
<td></td>
<td>Order ID</td>
</tr>
<tr>
<td>cardipaddress</td>
<td>ddd.ddd.ddd.ddd</td>
<td>IP address of the customer, can be used for fraud prevention in FBI Tools</td>
</tr>
<tr>
<td>tax</td>
<td>d.dd</td>
<td>Total tax amount</td>
</tr>
<tr>
<td>shipamount</td>
<td>d.dd</td>
<td>Total shipping amount</td>
</tr>
<tr>
<td>ponumber</td>
<td></td>
<td>Original Purchase Order</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td>Billing company</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td>Billing address2</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td>state</td>
<td>2 character abbreviation</td>
<td>Billing state</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
<tr>
<td>country</td>
<td>CC (ISO-3166)</td>
<td>Billing Country (ie. US)</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Billing Email Address</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td>Shipping first name</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td>Shipping last name</td>
</tr>
<tr>
<td>shipcompany</td>
<td></td>
<td>Shipping company</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td>Shipping Address</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td>Shipping Address - line 2</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td>Shipping City</td>
</tr>
<tr>
<td>shipstate</td>
<td>2 character abbreviation</td>
<td>Shipping State</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td>Shipping Zip Code</td>
</tr>
<tr>
<td>shipcountry</td>
<td>CC (ISO - 3166)</td>
<td>Shipping Country, ie US</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td>Shipping Phone Number</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td>Shipping Email</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=sale&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=57.85&amp;cardnum=4000123456789002&amp;cardexp=1010&amp;skunumber_1=5558779&amp;description_1=menssweaterblue&amp;amount_1=50.00&amp;quantity_1=1&amp;tax=2.85&amp;shipamount=5.00&amp;firstname=John&amp;lastname=Smith&amp;address1=888+test+address&amp;city=Los+Angeles&amp;country=US&amp;state=CA&amp;phone=222-444-2938&amp;shipfirstname=John&amp;shiplastname=Smith&amp;shipaddress1=888+test+address&amp;shipcity=Los+Angeles&amp;shipstate=CA&amp;shipphone=2224442938
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=sale&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
amount=9.95&amp;\
cvv=999&amp;\
currency=USD&amp;\
firstname=John&amp;\
lastname=Doe&amp;\
skunumber_1=123&amp;\
skunumber_2=456&amp;\
description_1=Blue widget&amp;\
description_2=Brown widget&amp;\
amount_1=1.99&amp;\
amount_2=2.99&amp;\
quantity_1=1&amp;\
quantity_2=2&amp;\
orderdesc=Order Description&amp;\
orderid=11111&amp;\
cardipaddress=8.8.8.8&amp;\
tax=0.25&amp;\
shipamount=1.25&amp;\
ponumber=22222&amp;\
company=Sparrow One&amp;\
address1=16100 N 71st Street&amp;\
address2=Suite 170&amp;\
city=Scottsdale&amp;\
state=AZ&amp;\
zip=85254&amp;\
country=US&amp;\
email=john@norepy.com&amp;\
shipfirstname=Jane&amp;\
shiplastname=Doe&amp;\
shipcompany=Sparrow Two&amp;\
shipaddress1=16100 N 72nd Street&amp;\
shipaddress2=Suite 171&amp;\
shipcity=Pheonix&amp;\
shipstate=AZ&amp;\
shipzip=85004&amp;\
shipcountry=US&amp;\
shipphone=6025551234&amp;\
shipemail=jane@noreply.com"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750809&amp;
xref=3829708566&amp;
authcode=123456&amp;
orderid=11111&amp;
<span class="hljs-built_in">type</span>=sale&amp;
avsresponse=N&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AdvancedFiservSale(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032428</span>
result.XRef;    <span class="hljs-comment">// 3876731622</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// sale</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.sale({
  <span class="hljs-symbol">cardnum:</span> <span class="hljs-string">'4111111111111111'</span>,
  <span class="hljs-symbol">cardexp:</span> <span class="hljs-string">'1019'</span>,
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">cvv:</span> <span class="hljs-string">'999'</span>,
  <span class="hljs-symbol">currency:</span> <span class="hljs-string">'USD'</span>,
  <span class="hljs-symbol">firstname:</span> <span class="hljs-string">'John'</span>,
  <span class="hljs-symbol">lastname:</span> <span class="hljs-string">'Doe'</span>,
  <span class="hljs-symbol">skunumber_1:</span> <span class="hljs-string">'123'</span>,
  <span class="hljs-symbol">skunumber_2:</span> <span class="hljs-string">'456'</span>,
  <span class="hljs-symbol">description_1:</span> <span class="hljs-string">'Blue widget'</span>,
  <span class="hljs-symbol">description_2:</span> <span class="hljs-string">'Brown widget'</span>,
  <span class="hljs-symbol">amount_1:</span> <span class="hljs-string">'1.99'</span>,
  <span class="hljs-symbol">amount_2:</span> <span class="hljs-string">'2.99'</span>,
  <span class="hljs-symbol">quantity_1:</span> <span class="hljs-string">'1'</span>,
  <span class="hljs-symbol">quantity_2:</span> <span class="hljs-string">'2'</span>,
  <span class="hljs-symbol">orderdesc:</span> <span class="hljs-string">'Order Description'</span>,
  <span class="hljs-symbol">orderid:</span> <span class="hljs-string">'11111'</span>,
  <span class="hljs-symbol">cardipaddress:</span> <span class="hljs-string">'8.8.8.8'</span>,
  <span class="hljs-symbol">tax:</span> <span class="hljs-string">'0.25'</span>,
  <span class="hljs-symbol">shipamount:</span> <span class="hljs-string">'1.25'</span>,
  <span class="hljs-symbol">ponumber:</span> <span class="hljs-string">'22222'</span>,
  <span class="hljs-symbol">company:</span> <span class="hljs-string">'Sparrow One'</span>,
  <span class="hljs-symbol">address1:</span> <span class="hljs-string">'16100 N 71st Street'</span>,
  <span class="hljs-symbol">address2:</span> <span class="hljs-string">'Suite 170'</span>,
  <span class="hljs-symbol">city:</span> <span class="hljs-string">'Scottsdale'</span>,
  <span class="hljs-symbol">state:</span> <span class="hljs-string">'AZ'</span>,
  <span class="hljs-symbol">zip:</span> <span class="hljs-string">'85254'</span>,
  <span class="hljs-symbol">country:</span> <span class="hljs-string">'US'</span>,
  <span class="hljs-symbol">email:</span> <span class="hljs-string">'john@norepy.com'</span>,
  <span class="hljs-symbol">shipfirstname:</span> <span class="hljs-string">'Jane'</span>,
  <span class="hljs-symbol">shiplastname:</span> <span class="hljs-string">'Doe'</span>,
  <span class="hljs-symbol">shipcompany:</span> <span class="hljs-string">'Sparrow Two'</span>,
  <span class="hljs-symbol">shipaddress1:</span> <span class="hljs-string">'16100 N 72nd Street'</span>,
  <span class="hljs-symbol">shipaddress2:</span> <span class="hljs-string">'Suite 171'</span>,
  <span class="hljs-symbol">shipcity:</span> <span class="hljs-string">'Pheonix'</span>,
  <span class="hljs-symbol">shipstate:</span> <span class="hljs-string">'AZ'</span>,
  <span class="hljs-symbol">shipzip:</span> <span class="hljs-string">'85004'</span>,
  <span class="hljs-symbol">shipcountry:</span> <span class="hljs-string">'US'</span>,
  <span class="hljs-symbol">shipphone:</span> <span class="hljs-string">'6025551234'</span>,
  <span class="hljs-symbol">shipemail:</span> <span class="hljs-string">'jane@noreply.com'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '11037951'</span>
result.xref <span class="hljs-comment"># =&gt; '3877926535'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.orderid <span class="hljs-comment"># =&gt; '11111'</span>
result.type <span class="hljs-comment"># =&gt; 'sale'</span>
result.avsresponse <span class="hljs-comment"># =&gt; 'N'</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-chargeback" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Chargeback Entry</h1>
<p>The Chargeback operation changes the transaction status from **successful **to
**dispute. **This operation also updates the Customer Scoring system and removes
the transaction amount from the successful transactions total within the Reports
module.</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-chargeback-mark-chargeback" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Marking a successful transaction as a Chargeback</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>chargeback</td>
<td>Chargeback will mark the transaction as “disputed”</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transid</strong></td>
<td></td>
<td>Original payment gateway transaction ID</td>
</tr>
<tr>
<td><strong>reason</strong></td>
<td>alphanumeric</td>
<td>Description of the reason for the chargeback</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=chargeback&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transid=12345678&amp;reason=fraudulent+transaction
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=chargeback&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transid=10750804&amp;\
reason=Reason for chargeback"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Reason+<span class="hljs-keyword">for</span>+chargeback&amp;
transid=10750804&amp;
xref=3829708661&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=chargeback&amp;
avsresponse=&amp;
cvvresponse=M&amp;
coderesponse=&amp;
codedescription=&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultSimpleSale = <span class="hljs-keyword">await</span> _sparrow.SimpleSale(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.MarkSuccessfulTransactionAsChargeback(
    transId: resultSimpleSale.TransId, 
    reason: <span class="hljs-string">"Testing for Success"</span>);
</code></pre>
<p>RESULT SimpleSale:</p>
<pre class="language-csharp"><code class="language-csharp">resultSimpleSale.Status;    <span class="hljs-comment">// 200</span>
resultSimpleSale.Response;    <span class="hljs-comment">// 1</span>
resultSimpleSale.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultSimpleSale.TransId;    <span class="hljs-comment">// 11032423</span>
resultSimpleSale.XRef;    <span class="hljs-comment">// 3876731424</span>
resultSimpleSale.AuthCode;    <span class="hljs-comment">// 123456</span>
resultSimpleSale.Type;    <span class="hljs-comment">// sale</span>
resultSimpleSale.CodeResponse;    <span class="hljs-comment">// 100</span>
resultSimpleSale.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Testing for Success</span>
result.TransId;    <span class="hljs-comment">// 11032423</span>
result.XRef;    <span class="hljs-comment">// 3876731424</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// chargeback</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.chargeback({
  <span class="hljs-symbol">transid:</span> <span class="hljs-string">'10934104'</span>,
  <span class="hljs-symbol">reason:</span> <span class="hljs-string">'Card reported lost'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'Card reported lost'</span>
result.transid <span class="hljs-comment"># =&gt; '10934104'</span>
result.xref <span class="hljs-comment"># =&gt; '3865091326'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.type <span class="hljs-comment"># =&gt; 'chargeback'</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-balance-inquiry" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Balance Inquiry</h3>
<p>The Balance Inquiry operation returns the available card balance</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-balance-inquiry-check-balance" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Retrieve Card Balance</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>balanceinquire</td>
<td>Balanceinquire returns the available card balance</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0719 = 7/2019)</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">transtype=balanceinquire&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;amount=9.95&amp;cardnum=4111111111111111&amp;cardexp=0719
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=balanceinquire&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4005562231212149&amp;\
cardexp=1225"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=3&amp;
textresponse=Operation+<span class="hljs-built_in">type</span>+is+not+supported+by+payment+processor&amp;
<span class="hljs-built_in">type</span>=balanceinquire&amp;
coderesponse=&amp;
codedescription=&amp;
status=500
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.RetrieveCardBalance(
    cardNum: <span class="hljs-string">"4111111111111111"</span>);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 500</span>
result.Response;    <span class="hljs-comment">// 3</span>
result.TextResponse;    <span class="hljs-comment">// Operation type is not supported by payment processor</span>
result.Type;    <span class="hljs-comment">// balanceinquire</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-decrypt-custom-field" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Decrypting Custom Fields</h3>
<p>The merchant has the ability to decrypt custom fields via the API using the Data
Vault client and the name of the custom field. Commonly encrypted fields may be:</p>
<ul>
<li>
<p>Social Security Number</p>
<ul>
<li>
<p>Drivers License Number</p>
</li>
<li>
<p>Custom Identifier</p>
</li>
</ul>
</li>
</ul>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-decrypt-custom-field-decrypt" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Decrypting Custom Fields</h3>
<p></p>
<table>
<thead>
<tr>
<th>VariableName</th>
<th></th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td></td>
<td>decrypt</td>
<td>The decrypt operation returns the value of the custom field</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>fieldname</strong></td>
<td></td>
<td></td>
<td>Custom field name</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td></td>
<td>alphanumeric string</td>
<td>This is a unique Data Vault customer identifier or Data Vault payment type identifier</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">transtype=decrypt&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;fieldname=socialsecurity&amp;token=H6FV89KL156
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=decrypt&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
fieldname=customField1&amp;\
customertoken=CustomerToken&amp;\
paymenttoken=PaymentToken"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=3&amp;
textresponse=Internal+processing+error
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.DecryptCustomFields(
    fieldName: <span class="hljs-string">"customField1"</span>, 
    token: resultAddCustomer.CustomerToken);
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token 'B9AOSCDWHD5UDQM0' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// B9AOSCDWHD5UDQM0</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// EUWP2KMWLGJB9AZ4</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 3</span>
result.TextResponse;    <span class="hljs-comment">// Custom field 'customField1' not found.</span>
result.CustomerToken;    <span class="hljs-comment">// B9AOSCDWHD5UDQM0</span>
result.Token;    <span class="hljs-comment">// B9AOSCDWHD5UDQM0</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-cc-verification" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Credit Card Verification</h3>
<p>An Account Verification transaction is used when certain aspects of the credit
card are needed prior to a purchase. An Account Verification transaction would
be sent in as a normal Authorization request (not a Sale) with the amount of
$0, and the following can be checked by the Issuer:</p>
<ul>
<li>
<p>Credit Card number-Checks to see if the card number is on file with the
Issuer, and if in good standing</p>
<ul>
<li>
<p>AVS-Checks the address of the cardholder</p>
</li>
<li>
<p>CVN-Checks the Card verification Number of the credit card</p>
</li>
</ul>
</li>
</ul>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-cc-verification-card-verification" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Account Verification</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>auth</td>
<td>auth</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td>MMYY</td>
<td>Credit card expiration (ie 0719 = 07/2019)</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>d.dd</td>
<td>Total amount to be charged should be 0.00</td>
</tr>
<tr>
<td>cvv</td>
<td></td>
<td>Card security code</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">transtype=auth&amp;mkey=HNJ45D23MKLO85J2D00LOP&amp;cardnum=4111111111111111&amp;cardexp=1019&amp;amount=0.00&amp;zip=85254
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=auth&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
amount=9.95&amp;\
cvv=999&amp;\
zip=85254"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
transid=10750787&amp;
xref=3829708536&amp;
authcode=123456&amp;
orderid=&amp;
<span class="hljs-built_in">type</span>=auth&amp;
avsresponse=N&amp;
cvvresponse=M&amp;
coderesponse=100&amp;
codedescription=Transaction+was+Approved&amp;
status=200
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.VerifyAccount(
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, 
    amount: <span class="hljs-number">9.99</span>m);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Status;    <span class="hljs-comment">// 200</span>
result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.TransId;    <span class="hljs-comment">// 11032422</span>
result.XRef;    <span class="hljs-comment">// 3876731403</span>
result.AuthCode;    <span class="hljs-comment">// 123456</span>
result.Type;    <span class="hljs-comment">// auth</span>
result.CodeResponse;    <span class="hljs-comment">// 100</span>
result.CodeDescription;    <span class="hljs-comment">// Transaction was Approved</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.balance({
  <span class="hljs-symbol">cardnum:</span> <span class="hljs-string">'4111111111111111'</span>,
  <span class="hljs-symbol">cardexp:</span> <span class="hljs-string">'1019'</span>,
  <span class="hljs-symbol">amount:</span> <span class="hljs-string">'9.95'</span>,
  <span class="hljs-symbol">cvv:</span> <span class="hljs-string">'999'</span>,
  <span class="hljs-symbol">zip:</span> <span class="hljs-string">'85254"'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.transid <span class="hljs-comment"># =&gt; '10750787'</span>
result.xref <span class="hljs-comment"># =&gt; '3829708536'</span>
result.authcode <span class="hljs-comment"># =&gt; '123456'</span>
result.orderid <span class="hljs-comment"># =&gt; ''</span>
result.type <span class="hljs-comment"># =&gt; 'auth'</span>
result.avsresponse <span class="hljs-comment"># =&gt; 'N'</span>
result.cvvresponse <span class="hljs-comment"># =&gt; 'M'</span>
result.coderesponse <span class="hljs-comment"># =&gt; '100'</span>
result.codedescription <span class="hljs-comment"># =&gt; 'Transaction was Approved'</span>
result.status <span class="hljs-comment"># =&gt; '200'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-datavault" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Data Vault</h3>
<p>The Data Vault is designed to store and recall client’s payment information for
efficient, repeatable transactions. Through using tokenization, all necessary
consumer information is stored adhering to PCI Level 1 compliance.</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-datavault-adding-a-customer" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Adding a Customer</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>transtype</strong></td>
<td>addcustomer</td>
<td>Add customer will create a new Data Vault entry</td>
</tr>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>secured merchant account key</td>
</tr>
<tr>
<td><strong>firstname</strong></td>
<td></td>
<td>Customer’s first name</td>
</tr>
<tr>
<td><strong>lastname</strong></td>
<td></td>
<td>Customer’s last name</td>
</tr>
<tr>
<td>customerid</td>
<td></td>
<td>External customer identifier</td>
</tr>
<tr>
<td>note</td>
<td></td>
<td>Customer note</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td>Default address</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td>Default address2</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>Default city</td>
</tr>
<tr>
<td>state</td>
<td>2 character abbreviation</td>
<td>Default state</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
<tr>
<td>country</td>
<td>CC (ISO-3166)</td>
<td>Default Country (ie. US)</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td>Default billing phone number</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Default Email Address</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td>Default Shipping first name</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td>Default Shipping last name</td>
</tr>
<tr>
<td>shipcompany</td>
<td></td>
<td>Default Shipping company</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td>Default Shipping Address</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td>Default Shipping Address - line 2</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td>Default Shipping City</td>
</tr>
<tr>
<td>shipstate</td>
<td>2 character abbreviation</td>
<td>Default Shipping State</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td>Default Shipping Zip Code</td>
</tr>
<tr>
<td>shipcountry</td>
<td>CC (ISO - 3166)</td>
<td>Default Shipping Country, ie US</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td>Default Shipping Phone Number</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td>Default Shipping Email</td>
</tr>
<tr>
<td>username</td>
<td></td>
<td>Client user name. This field is required if the Client Service Portal is enabled and ‘password’ or ‘clientuseremail’ is specified</td>
</tr>
<tr>
<td>password</td>
<td></td>
<td>Client user password. This field is required if the Client Service Portal is enabled and ‘username’ or ‘clientuseremail’ is specified</td>
</tr>
<tr>
<td>clientuseremail</td>
<td></td>
<td>Client user email. This field is required if the Client Service Portal is enabled and ‘password’ or ‘username’ is specified</td>
</tr>
<tr>
<td>paytype_#</td>
<td>creditcard/check/ach/starcard/ewallet</td>
<td>Type of payment info</td>
</tr>
<tr>
<td>company_#</td>
<td></td>
<td>Company name, specific to the payment type</td>
</tr>
<tr>
<td>firstname_#</td>
<td></td>
<td>Billing first name, specific to the payment type</td>
</tr>
<tr>
<td>lastname_#</td>
<td></td>
<td>Billing last name, specific to the payment type</td>
</tr>
<tr>
<td>address1_#</td>
<td></td>
<td>Billing address, specific to the payment type</td>
</tr>
<tr>
<td>address2_#</td>
<td></td>
<td>Billing address-line 2, specific to the payment type</td>
</tr>
<tr>
<td>city_#</td>
<td></td>
<td>Billing city, specific to the payment type</td>
</tr>
<tr>
<td>state_#</td>
<td></td>
<td>Billing state, 2 character abbreviation, specific to the payment type</td>
</tr>
<tr>
<td>zip_#</td>
<td></td>
<td>Billing zip, specific to payment type</td>
</tr>
<tr>
<td>country_#</td>
<td></td>
<td>Billing Country, specific to payment type</td>
</tr>
<tr>
<td>phone_#</td>
<td></td>
<td>Billing phone, specific to payment type</td>
</tr>
<tr>
<td>email_#</td>
<td></td>
<td>Billing email, specific to payment type</td>
</tr>
<tr>
<td>cardnum_#</td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td>cardexp_#</td>
<td>MMYY</td>
<td>Credit card expiration</td>
</tr>
<tr>
<td>bankname_#</td>
<td></td>
<td>ACH bank name</td>
</tr>
<tr>
<td>routing_#</td>
<td></td>
<td>ACH routing number</td>
</tr>
<tr>
<td>account_#</td>
<td></td>
<td>ACH account number</td>
</tr>
<tr>
<td>achaccounttype_#</td>
<td>checking/savings</td>
<td>ACH account type</td>
</tr>
<tr>
<td>achaccountsubtype</td>
<td>business/personal</td>
<td>ACH account sub type</td>
</tr>
<tr>
<td>payno_#</td>
<td>positive integer</td>
<td>Priority of the payment type among others when sending payment using the customertoken</td>
</tr>
<tr>
<td>ewalletaccount_#</td>
<td></td>
<td>eWallet account credentials, ie; email</td>
</tr>
<tr>
<td>ewallettype_#</td>
<td>paypal</td>
<td>Type of eWallet</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=addcustomer&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;firstname=Samantha&amp;lastname=Simmons&amp;address1=1234+N+Wells+street&amp;city=Phoenix&amp;state=AZ&amp;zip=85254&amp;email@sam@test.com&amp;phone=4801234567&amp;paytype_1=creditcard&amp;cardnum_1=4111111111111111&amp;cardexp_1=0220
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"transtype=addcustomer&amp;\
mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
firstname=John&amp;\
lastname=Doe&amp;\
note=Customer Note&amp;\
address1=16100 N 71st Street&amp;\
address2=Suite 170&amp;\
city=Scottsdale&amp;\
state=AZ&amp;\
zip=85254&amp;\
country=US&amp;\
email=john@norepy.com&amp;\
shipfirstname=Jane&amp;\
shiplastname=Doe&amp;\
shipcompany=Sparrow Two&amp;\
shipaddress1=16100 N 72nd Street&amp;\
shipaddress2=Suite 171&amp;\
shipcity=Pheonix&amp;\
shipstate=AZ&amp;\
shipzip=85004&amp;\
shipcountry=US&amp;\
shipphone=6025551234&amp;\
shipemail=jane@noreply.com&amp;\
username=JohnDoe17101717530877&amp;\
password=Password123&amp;\
clientuseremail=john@norepy.com&amp;\
paytype_1=creditcard&amp;\
paytype_2=check&amp;\
firstname_1=John&amp;\
firstname_2=John&amp;\
lastname_1=Doe&amp;\
lastname_2=Doe&amp;\
address1_1=123 Main Street&amp;\
address1_2=321 1st Street&amp;\
address2_1=Suite 1&amp;\
address2_2=Suite 2&amp;\
city_1=Pheonix&amp;\
city_2=Scottsdale&amp;\
state_1=AZ&amp;\
state_2=AZ&amp;\
zip_1=85111&amp;\
zip_2=85222&amp;\
country_1=US&amp;\
country_2=US&amp;\
phone_1=6025551234&amp;\
phone_2=6025554321&amp;\
email_1=john@norepy.com&amp;\
email_2=jane@noreploy.com&amp;\
cardnum_1=4111111111111111&amp;\
cardnum_2=4111111111111111&amp;\
cardexp_1=1019&amp;\
cardexp_2=1019&amp;\
bankname_1=&amp;\
bankname_2=First Test Bank&amp;\
routing_1=&amp;\
routing_2=110000000&amp;\
account_1=&amp;\
account_2=1234567890123&amp;\
achaccounttype_1=&amp;\
achaccounttype_2=personal&amp;\
payno_1=1&amp;\
payno_2=2"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Customer+with+token+%27F6OE0IN0I5HSV6AJ%27+successfully+created&amp;
<span class="hljs-built_in">type</span>=addcustomer&amp;
customertoken=F6OE0IN0I5HSV6AJ&amp;
paymenttoken_1=9K7US80YUQ1LPN27&amp;
paymenttoken_2=OZA3QU7CYG57D88R
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Customer with token 'MDQE3APBQWNPLB0N' successfully created</span>
result.Type;    <span class="hljs-comment">// addcustomer</span>
result.CustomerToken;    <span class="hljs-comment">// MDQE3APBQWNPLB0N</span>
result.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// L5UM9ALNJR2XWQH5</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.addcustomer({
  <span class="hljs-symbol">firstname:</span> <span class="hljs-string">'John'</span>,
  <span class="hljs-symbol">lastname:</span> <span class="hljs-string">'Doe'</span>,
  <span class="hljs-symbol">paytype_1:</span> <span class="hljs-string">'starcard'</span>,
  <span class="hljs-symbol">cardnum_1:</span> <span class="hljs-string">'6019440000011111'</span>,
  <span class="hljs-symbol">CID:</span> <span class="hljs-string">'52347800001'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'Customer with token 'LDX59BK4441R46J7' successfully created'</span>
result.type <span class="hljs-comment"># =&gt; 'addcustomer'</span>
result.customertoken <span class="hljs-comment"># =&gt; 'LDX59BK4441R46J7'</span>
result.paymenttoken_1 <span class="hljs-comment"># =&gt; 'I5ZVHNONDI5YIGKG'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Add Customer by Payment Type:</h3>
<p>Below are the minimum fields required to add a new Data Vault customer for each
supported payment type.</p>
<p></p>
<h3>Credit Card</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>addcustomer</td>
<td>Add a new Data Vault Customer</td>
</tr>
<tr>
<td>token</td>
<td>alphanumeric string</td>
<td>Unique customer or payment info identifier</td>
</tr>
<tr>
<td><strong>firstname</strong></td>
<td></td>
<td>Customer’s first nam</td>
</tr>
<tr>
<td><strong>lastname</strong></td>
<td></td>
<td>Customer’s last name</td>
</tr>
<tr>
<td><strong>paytype_#</strong></td>
<td>creditcard</td>
<td>Type of payment info</td>
</tr>
<tr>
<td><strong>cardnum_#</strong></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp_#</strong></td>
<td>MMYY</td>
<td>Credit card expiration</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=addcustomer&amp;firstname=John&amp;lastname=Doe&amp;paytype_1=creditcard&amp;cardnum_1=4111111111111111&amp;cardexp_1=0220
</code></pre>
<h3>ACH</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>addcustomer</td>
<td>Add a new Data Vault Customer</td>
</tr>
<tr>
<td>token</td>
<td>alphanumeric string</td>
<td>Unique customer or payment info identifier</td>
</tr>
<tr>
<td><strong>firstname</strong></td>
<td></td>
<td>Customer’s first name</td>
</tr>
<tr>
<td><strong>lastname</strong></td>
<td></td>
<td>Customer’s last name</td>
</tr>
<tr>
<td><strong>paytype_#</strong></td>
<td>ach</td>
<td>Type of payment info</td>
</tr>
<tr>
<td><strong>bankname_#</strong></td>
<td></td>
<td>Bank name</td>
</tr>
<tr>
<td><strong>routing_#</strong></td>
<td></td>
<td>Bank routing number</td>
</tr>
<tr>
<td><strong>account_#</strong></td>
<td></td>
<td>Bank account number</td>
</tr>
<tr>
<td><strong>achaccounttype_#</strong></td>
<td>checking / savings</td>
<td>Type of ACH account</td>
</tr>
<tr>
<td><strong>achaccountsubtype_#</strong></td>
<td>business / personal</td>
<td>Subtype of ACH account</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=addcustomer&amp;firstname=John&amp;lastname=Doe&amp;paytype_1=ach&amp;bankname_1=wellsfargo&amp;achaccounttype_1=checking&amp;achaccountsubtype_1=personal&amp;routing_1=223456&amp;account_1=123456789
</code></pre>
<p></p>
<h3>Star Card</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>addcustomer</td>
<td>Add a new Data Vault Customer</td>
</tr>
<tr>
<td>token</td>
<td>alphanumeric string</td>
<td>Unique customer or payment info identifier</td>
</tr>
<tr>
<td><strong>firstname</strong></td>
<td></td>
<td>Customer’s first name</td>
</tr>
<tr>
<td><strong>lastname</strong></td>
<td></td>
<td>Customer’s last name</td>
</tr>
<tr>
<td><strong>paytype_#</strong></td>
<td>starcard</td>
<td>Type of payment info</td>
</tr>
<tr>
<td><strong>cardnum_#</strong></td>
<td></td>
<td>Credit Card number</td>
</tr>
<tr>
<td><strong>CID</strong></td>
<td>custom field</td>
<td>11 digit numerical</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=addcustomer&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;firstname=John&amp;lastname=Doe&amp;paytype_1=starcard&amp;cardnum_1=6019440000011111&amp;CID=52347800001
</code></pre>
<p></p>
<h3>eWallet</h3>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>addcustomer</td>
<td>Add a new Data Vault Customer</td>
</tr>
<tr>
<td>token</td>
<td>alphanumeric string</td>
<td>Unique customer or payment info identifier</td>
</tr>
<tr>
<td><strong>firstname</strong></td>
<td></td>
<td>Customer’s first name</td>
</tr>
<tr>
<td><strong>lastname</strong></td>
<td></td>
<td>Customer’s last name</td>
</tr>
<tr>
<td><strong>paytype_#</strong></td>
<td>ewallet</td>
<td>Type of payment info</td>
</tr>
<tr>
<td>ewallettype_#</td>
<td>paypal</td>
<td>Type of eWallet</td>
</tr>
<tr>
<td><strong>ewalletaccount_#</strong></td>
<td>email</td>
<td>eWallet credentials (email)</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=addcustomer&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;firstname=John&amp;lastname=Doe&amp;paytype_1=ewallet&amp;ewallettype_1=paypal&amp;ewalletaccount_1=email@email.com
</code></pre>
<p>Command Line:</p>
<pre class="language-none"><code class="language-none">curl -d &quot;mkey=$ACH_M_KEY&amp;\
transtype=addcustomer&amp;\
firstname=John&amp;\
lastname=Doe&amp;\
paytype_1=creditcard&amp;\
cardnum_1=4111111111111111&amp;\
cardexp_1=1019&quot; \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-none"><code class="language-none">response=00&amp;
textresponse=Customer+with+token+%27OZMGG9YB5DPF663X%27+successfully+created&amp;
type=addcustomer&amp;
customertoken=OZMGG9YB5DPF663X&amp;
paymenttoken_1=WSJE7RYNRQPLJIRC
</code></pre>

         </div>
      </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Update Customer</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>updatecustomer</td>
<td>This transaction type will update the current client information with any new data fields provided</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumericstring</td>
<td>Unique customer identifier</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td>Billing address, line 2</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td>state</td>
<td>2 character abbreviation</td>
<td>Billing state</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing zip</td>
</tr>
<tr>
<td>country</td>
<td>CC (ISO-3166)</td>
<td>Billing country</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td>Billing phone</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Billing email</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td>Shipping first name</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td>Shipping last name</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td>Shipping address1</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td>Shipping address2</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td>Shipping city</td>
</tr>
<tr>
<td>shipstate</td>
<td></td>
<td>Shipping state</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td>Shipping zip</td>
</tr>
<tr>
<td>shipcountry</td>
<td></td>
<td>Shipping country</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td>Shipping phone</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td>Shipping email</td>
</tr>
<tr>
<td>username</td>
<td></td>
<td>Client Service Portal username</td>
</tr>
<tr>
<td>password</td>
<td></td>
<td>Client Service Portal password</td>
</tr>
<tr>
<td>clientuseremail</td>
<td></td>
<td>Client Service Portal email</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=updatecustomer&amp;token=B31388EA20ABF2776C93&amp;address1=939+St.+Winnie’s+st.&amp;city=Forest+City
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=updatecustomer&amp;\
token=O3BEZTT2UHCS7USA&amp;\
firstname=John&amp;\
lastname=Doe&amp;\
address1=16100 N 71st Street&amp;\
address2=Suite 170&amp;\
city=Scottsdale&amp;\
state=AZ&amp;\
zip=85254&amp;\
country=US&amp;\
phone=7025551234&amp;\
email=john@norepy.com&amp;\
shipfirstname=Jane&amp;\
shiplastname=Doe&amp;\
shipaddress1=16100 N 72nd Street&amp;\
shipaddress2=Suite 171&amp;\
shipcity=Pheonix&amp;\
shipstate=AZ&amp;\
shipzip=85004&amp;\
shipcountry=US&amp;\
shipphone=6025551234"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Customer+with+token+%27O3BEZTT2UHCS7USA%27+successfully+updated&amp;
<span class="hljs-built_in">type</span>=updatecustomer&amp;
customertoken=O3BEZTT2UHCS7USA
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.UpdateCustomer(
    token: resultAddCustomer.CustomerToken);
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token 'G7HJV1U70S1290OZ' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// G7HJV1U70S1290OZ</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// 2HXUOE6WDW6ZBER2</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Customer with token 'G7HJV1U70S1290OZ' successfully updated</span>
result.Type;    <span class="hljs-comment">// updatecustomer</span>
result.CustomerToken;    <span class="hljs-comment">// G7HJV1U70S1290OZ</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.updatecustomer({
  <span class="hljs-symbol">token:</span> <span class="hljs-string">'B31388EA20ABF2776C93'</span>,
  <span class="hljs-symbol">address1:</span> <span class="hljs-string">'939 St. Winnie’s st.'</span>,
  <span class="hljs-symbol">city:</span> <span class="hljs-string">'Forest City'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'Customer with token 'O3BEZTT2UHCS7USA' successfully updated'</span>
result.type <span class="hljs-comment"># =&gt; 'updatecustomer'</span>
result.customertoken <span class="hljs-comment"># =&gt; 'O3BEZTT2UHCS7USA'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Adding Payment Types to a Customer</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>updatecustomer</td>
<td>This transaction type will update the current client information with any new data fields provided</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumericstring</td>
<td>Unique customer identifier</td>
</tr>
<tr>
<td><strong>operationtype_#</strong></td>
<td>addpaytype</td>
<td></td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=updatecustomer&amp;token=B31388EA20ABF2776C93&amp;operationtype_1=addpaytype&amp;paytype_1=creditcard&amp;cardnum_1=4111111111111111&amp;cardexp_1=0226&amp;firstname_1=John&amp;lastname_1=Smith&amp;operationtype_2=addpaytype&amp;paytype_2=creditcard&amp;cardnum_2=5454545454545454&amp;cardexp_2=0720&amp;firstname_2=John&amp;lastname_2=Smith
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   No content for this section.
                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AddPaymentTypesToCustomer(
    token: resultAddCustomer.CustomerToken, 
    paymentTypeToAdd: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentTypeToAdd{ PaymentType = <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) }, BankAccount = <span class="hljs-keyword">new</span> Sparrow.BankAccount{ BankName = <span class="hljs-string">"First Test Bank"</span>, Routing = <span class="hljs-string">"110000000"</span>, Account = <span class="hljs-string">"1234567890123"</span>, AchAccountType = Sparrow.AchAccountType.Checking, AchAccountSubType = Sparrow.AchAccountSubType.Personal }, Ewallet = <span class="hljs-keyword">new</span> Sparrow.Ewallet{ EwalletAccount = <span class="hljs-string">"user@example.com"</span> } } } });
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token '645GRTD1SIXLJ5U5' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// 645GRTD1SIXLJ5U5</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// QEU8KSUON36XUWLI</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Customer with token '645GRTD1SIXLJ5U5' successfully updated</span>
result.Type;    <span class="hljs-comment">// updatecustomer</span>
result.CustomerToken;    <span class="hljs-comment">// 645GRTD1SIXLJ5U5</span>
result.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// 76XRTBDSCGBYBGAA</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">api.addcustomer({
  <span class="hljs-symbol">firstname:</span> <span class="hljs-string">'John'</span>,
  <span class="hljs-symbol">lastname:</span> <span class="hljs-string">'Doe'</span>,
  <span class="hljs-symbol">paytype_1:</span> <span class="hljs-string">'ewallet'</span>,
  <span class="hljs-symbol">ewallettype_1:</span> <span class="hljs-string">'paypal'</span>,
  <span class="hljs-symbol">ewalletaccount_1:</span> <span class="hljs-string">'email@email.com'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">
result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'Customer with token 'NA2TF8AJGI5CAKCB' successfully created'</span>
result.type <span class="hljs-comment"># =&gt; 'addcustomer'</span>
result.customertoken <span class="hljs-comment"># =&gt; 'NA2TF8AJGI5CAKCB'</span>
result.paymenttoken_1 <span class="hljs-comment"># =&gt; '48TXLSRFTOAQK680'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Update Payment Type</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>updatecustomer</td>
<td>This transaction type will update the current client information with any new data fields provided</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumericstring</td>
<td>Unique customer identifier</td>
</tr>
<tr>
<td><strong>operationtype_#</strong></td>
<td>updatepaytype</td>
<td></td>
</tr>
<tr>
<td><strong>token_#</strong></td>
<td>alphanumericstring</td>
<td>Unique payment type identifier</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=updatecustomer&amp;token=B31388EA20ABF2776C93&amp;operationtype_1=updatepaytype&amp;token_1=0HEUX6NFECQG8QCQ&amp;cardnum_1=4111111111111112&amp;operationtype_2=updatepaytype&amp;token_2=4K8NSZSGGPMHGEW4&amp;cardexp_2=0421
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   No content for this section.
                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.UpdatePaymentType(
    token: resultAddCustomer.CustomerToken, 
    paymentTypeToUpdate: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentTypeToUpdate{ Token = resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>], PaymentType = <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } } });
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token '1UILWG9UZ3AQKMRL' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// 1UILWG9UZ3AQKMRL</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// DWLGPFIBBUG8555V</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Customer with token '1UILWG9UZ3AQKMRL' successfully updated</span>
result.Type;    <span class="hljs-comment">// updatecustomer</span>
result.CustomerToken;    <span class="hljs-comment">// 1UILWG9UZ3AQKMRL</span>
result.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// DWLGPFIBBUG8555V</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Delete Payment Type</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>updatecustomer</td>
<td>This transaction type will update the current client information with any new data fields provided</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumericstring</td>
<td>Unique customer identifier</td>
</tr>
<tr>
<td><strong>token_#</strong></td>
<td>alphanumericstring</td>
<td>Token of the payment type to be deleted</td>
</tr>
<tr>
<td><strong>operationtype_#</strong></td>
<td>deletepaytype</td>
<td>Delete a specific payment type</td>
</tr>
</tbody>
</table>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=updatecustomer&amp;\
token_1=SXZ27VYHGBSMYDNH&amp;\
operationtype_1=deletepaytype&amp;\
token=EBVX61KPEIUZXV7B"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Customer+with+token+%27EBVX61KPEIUZXV7B%27+successfully+updated&amp;
<span class="hljs-built_in">type</span>=updatecustomer&amp;
customertoken=EBVX61KPEIUZXV7B&amp;
paymenttoken_1=SXZ27VYHGBSMYDNH
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.DeletePaymentType(
    token: resultAddCustomer.CustomerToken, 
    paymentTypeToDelete: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentTypeToDelete{ Token = resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>] } });
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token 'YKFAA8JWGNX0GLLV' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// YKFAA8JWGNX0GLLV</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// A7E9RB07JBCD0MYP</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Customer with token 'YKFAA8JWGNX0GLLV' successfully updated</span>
result.Type;    <span class="hljs-comment">// updatecustomer</span>
result.CustomerToken;    <span class="hljs-comment">// YKFAA8JWGNX0GLLV</span>
result.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// A7E9RB07JBCD0MYP</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.delete_payment_type({
  <span class="hljs-symbol">token:</span> <span class="hljs-string">'LFC0KIYV18APRLCH'</span>,
  <span class="hljs-symbol">operationtype_1:</span> <span class="hljs-string">'deletepaytype'</span>,
  <span class="hljs-symbol">token_1:</span> <span class="hljs-string">'QQ8TR7J8P0IQ9TOL'</span>,
  <span class="hljs-symbol">achaccounttype_1:</span> <span class="hljs-string">'savings'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'Customer with token 'LFC0KIYV18APRLCH' successfully updated'</span>
result.type <span class="hljs-comment"># =&gt; 'updatecustomer'</span>
result.customertoken <span class="hljs-comment"># =&gt; 'LFC0KIYV18APRLCH'</span>
result.paymenttoken_1 <span class="hljs-comment"># =&gt; 'QQ8TR7J8P0IQ9TOL'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Delete Data Vault Customer</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>deletecustomer</td>
<td>This transaction type will update the current client information with any new data fields provided</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumericstring</td>
<td>Unique customer identifier</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=deletecustomer&amp;token=B31388EA20ABF2776C93
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=deletecustomer&amp;\
token=FX60NPVJY2Y18KZA"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
<span class="hljs-built_in">type</span>=deletecustomer
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.DeleteDataVaultCustomer(
    token: resultAddCustomer.CustomerToken);
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token 'BY7F1K0J4252GRGD' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// BY7F1K0J4252GRGD</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// UBY9KEP6DXUOUOFX</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.Type;    <span class="hljs-comment">// deletecustomer</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.delete_customer({
  <span class="hljs-symbol">token:</span> <span class="hljs-string">'LFC0KIYV18APRLCH'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'SUCCESS'</span>
result.type <span class="hljs-comment"># =&gt; 'deletecustomer'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Retrieve Customer</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>getcustomer</td>
<td></td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumeric string</td>
<td>Unique customer identifier</td>
</tr>
</tbody>
</table>
<p></p>
<p>Response from the gateway will be as follows:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>response</strong></td>
<td></td>
<td>Operation result code</td>
</tr>
<tr>
<td><strong>textresponse</strong></td>
<td></td>
<td>Textual response</td>
</tr>
<tr>
<td><strong>customertoken</strong></td>
<td>alphanumeric string</td>
<td>Customer unique identifier</td>
</tr>
<tr>
<td><strong>CustomerStatus</strong></td>
<td></td>
<td>Customer status</td>
</tr>
<tr>
<td>CustomerID</td>
<td></td>
<td>External customer identifier</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td>Billing company name</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td>Billing address – line 2</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing postal code</td>
</tr>
<tr>
<td>country</td>
<td>CC (ISO-3166)</td>
<td>Billing country (ie. US)</td>
</tr>
<tr>
<td>state</td>
<td>2 character abbreviation</td>
<td>Billing state</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td>Billing phone number</td>
</tr>
<tr>
<td>fax</td>
<td></td>
<td>Billing fax number</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Billing email address</td>
</tr>
<tr>
<td>shipcompany</td>
<td></td>
<td>Shipping company name</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td>Shipping first name</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td>Shipping last name</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td>Shipping address</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td>Shipping address – line 2</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td>Shipping city</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td>Shipping postal code</td>
</tr>
<tr>
<td>shipcountry</td>
<td>CC (ISO-3166)</td>
<td>Billing country (ie. US)</td>
</tr>
<tr>
<td>shipstate</td>
<td>2 character abbreviation</td>
<td>Shipping state</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td>Shipping phone number</td>
</tr>
<tr>
<td>shipfax</td>
<td></td>
<td>Shipping fax number</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td>Shipping email address</td>
</tr>
<tr>
<td>token_#</td>
<td>alphanumeric string</td>
<td>Payment Type unique identifier</td>
</tr>
<tr>
<td>paytype_#</td>
<td>creditcard / check / ach / starcard / cash /ewallet</td>
<td>Type of payment info</td>
</tr>
<tr>
<td>payno_#</td>
<td>positive integer</td>
<td>Priority of the payment type among others, when sending payment using customer’s token</td>
</tr>
<tr>
<td>account_#</td>
<td></td>
<td>Masked account number</td>
</tr>
<tr>
<td>paymentdescription_#</td>
<td>alphanumeric string</td>
<td>Description of Data Vault payment info</td>
</tr>
<tr>
<td>cardexp_#</td>
<td>MMYY</td>
<td>Credit card expiration date (ie. 0719 = 7/2019)</td>
</tr>
<tr>
<td>useAccountUpdater_#</td>
<td>true / false</td>
<td>If true, the account updater updates this payment info</td>
</tr>
<tr>
<td>company_#</td>
<td></td>
<td>Billing company name, specific for the payment type</td>
</tr>
<tr>
<td>firstname_#</td>
<td></td>
<td>Billing first name, specific for the payment type</td>
</tr>
<tr>
<td>lastname_#</td>
<td></td>
<td>Billing last name , specific for the payment type</td>
</tr>
<tr>
<td>address1_#</td>
<td></td>
<td>Billing address , specific for the payment type</td>
</tr>
<tr>
<td>address2_#</td>
<td></td>
<td>Billing address – line 2, specific for the payment type</td>
</tr>
<tr>
<td>city_#</td>
<td></td>
<td>Billing city, specific for the payment type</td>
</tr>
<tr>
<td>zip_#</td>
<td></td>
<td>Billing postal code, specific for the payment type</td>
</tr>
<tr>
<td>country_#</td>
<td>CC (ISO-3166)</td>
<td>Billing country (ie. US), specific for the payment type</td>
</tr>
<tr>
<td>state_#</td>
<td>2 character abbreviation</td>
<td>Billing state, specific for the payment type</td>
</tr>
<tr>
<td>phone_#</td>
<td></td>
<td>Billing phone number, specific for the payment type</td>
</tr>
<tr>
<td>fax_#</td>
<td></td>
<td>Billing fax number, specific for the payment type</td>
</tr>
<tr>
<td>email_#</td>
<td></td>
<td>Billing email address, specific for the payment type</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">
mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;transtype=getcustomer&amp;token=VGHBVEKS8TDRKUC2
</code></pre>
<p></p>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">response=1&amp;textresponse=Processed&amp;customertoken=VGHBVEKS8TDRKUC2&amp;CustomerStatus=Active&amp;company=&amp;firstname=John&amp;lastname=Smith&amp;address1=330+Stewart+Street&amp;address2=&amp;city=Indianapolis&amp;email=&amp;country=US&amp;state=IN&amp;phone=&amp;fax=&amp;zip=46268&amp;shipcompany=&amp;shipfirstname=&amp;shiplastname=&amp;shipaddress1=&amp;shipaddress2=&amp;shipcity=&amp;shipemail=&amp;shipphone=&amp;shipfax=&amp;shipzip=&amp;paytype_1=CreditCard&amp;payno_1=1&amp;paymentdescription_1=&amp;cardexp_1=1221&amp;account_1=411111******1111&amp;company_1=&amp;firstname_1=John&amp;lastname_1=Smith&amp;address1_1=1947+Sumner+Street&amp;address2_1=&amp;city_1=Rancho+Dominguez&amp;email_1=&amp;country_1=US&amp;state_1=CA&amp;phone_1=&amp;fax_1=&amp;zip_1=90220&amp;useAccountUpdater_1=True&amp;token_1=6AWRPCF8C4DZ6UU2
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   No content for this section.
                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.RetrieveCustomer(
    token: resultAddCustomer.CustomerToken);
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token 'XIE6MFCW2C26RYZ1' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// XIE6MFCW2C26RYZ1</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// M9NWKGFXTI195F54</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Processed</span>
result.CustomerToken;    <span class="hljs-comment">// XIE6MFCW2C26RYZ1</span>
result.FirstName;    <span class="hljs-comment">// John</span>
result.LastName;    <span class="hljs-comment">// Doe</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.get_customer({
  <span class="hljs-symbol">token:</span> <span class="hljs-string">'LFC0KIYV18APRLCH'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'Processed'</span>
result.customertoken <span class="hljs-comment"># =&gt; 'LFC0KIYV18APRLCH'</span>
result.CustomerStatus <span class="hljs-comment"># =&gt; 'Active'</span>
result.firstname <span class="hljs-comment"># =&gt; 'Dude'</span>
result.lastname <span class="hljs-comment"># =&gt; 'Fella'</span>
result.paytype_1 <span class="hljs-comment"># =&gt; 'CreditCard'</span>
result.payno_1 <span class="hljs-comment"># =&gt; '1'</span>
result.cardexp_1 <span class="hljs-comment"># =&gt; '1019'</span>
result.account_1 <span class="hljs-comment"># =&gt; '411111******1111'</span>
result.useAccountUpdater_1 <span class="hljs-comment"># =&gt; 'False'</span>
result.token_1 <span class="hljs-comment"># =&gt; 'QQ8TR7J8P0IQ9TOL'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer-get-payment-type" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Retrieve Payment Type</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>getcustomer</td>
<td></td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumeric string</td>
<td>Unique payment type identifier</td>
</tr>
</tbody>
</table>
<p></p>
<p>Response from the gateway will be as follows:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>response</strong></td>
<td></td>
<td>Operation result code</td>
</tr>
<tr>
<td><strong>textresponse</strong></td>
<td></td>
<td>Textual response</td>
</tr>
<tr>
<td><strong>customertoken</strong></td>
<td>alphanumeric string</td>
<td>Customer unique identifier</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td></td>
<td>Payment Type unique identifier</td>
</tr>
<tr>
<td><strong>paytype</strong></td>
<td>creditcard / check / ach / starcard / cash /ewallet</td>
<td>Type of payment info</td>
</tr>
<tr>
<td><strong>payno</strong></td>
<td>positive integer</td>
<td>Priority of the payment type among others, when sending payment using customer’s token</td>
</tr>
<tr>
<td>account</td>
<td></td>
<td>Masked account number</td>
</tr>
<tr>
<td>paymentdescription</td>
<td>alphanumeric string</td>
<td>Description of Data Vault payment info</td>
</tr>
<tr>
<td>cardexp</td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0719 = 7/2019)</td>
</tr>
<tr>
<td>useAccountUpdater</td>
<td>true / false</td>
<td>If true, the account updater updates this payment info</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td>Billing company name</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td>Billing address – line 2</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing postal code</td>
</tr>
<tr>
<td>country</td>
<td>CC (ISO-3166)</td>
<td>Billing country (ie. US)</td>
</tr>
<tr>
<td>state</td>
<td>2 character abbreviation</td>
<td>Billing state</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td>Billing phone number</td>
</tr>
<tr>
<td>fax</td>
<td></td>
<td>Billing fax number</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Billing email address</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;transtype=getcustomer&amp;token=6AWRPCF7C4DZ6UU2
</code></pre>
<p></p>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">response=1&amp;textresponse=Processed&amp;paytype=CreditCard&amp;payno=1&amp;paymentdescription=&amp;cardexp=1221&amp;account=411111******1111&amp;company=&amp;firstname=John&amp;lastname=Smith&amp;address1=1947+Sumner+Street&amp;address2=&amp;city=Rancho+Dominguez&amp;email=&amp;country=US&amp;state=CA&amp;phone=&amp;fax=&amp;zip=90220&amp;useAccountUpdater=True&amp;token=6AWRPCF7C4DZ6UU2&amp;customertoken=VGHBVEKS1TDRKUC2
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   No content for this section.
                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.RetrievePaymentType(
    token: resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>]);
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token 'YHD8GOI55SHOJ4PU' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// YHD8GOI55SHOJ4PU</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// LK118CERCRMEND0W</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Processed</span>
result.CustomerToken;    <span class="hljs-comment">// YHD8GOI55SHOJ4PU</span>
result.FirstName;    <span class="hljs-comment">// John</span>
result.LastName;    <span class="hljs-comment">// Doe</span>
result.PayType;    <span class="hljs-comment">// CreditCard</span>
result.PayNo;    <span class="hljs-comment">// 1</span>
result.CardExp;    <span class="hljs-comment">// 1019</span>
result.Account;    <span class="hljs-comment">// 411111******1111</span>
result.Token;    <span class="hljs-comment">// LK118CERCRMEND0W</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.get_payment_type({
  <span class="hljs-symbol">token:</span> <span class="hljs-string">'QQ8TR7J8P0IQ9TOL'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.response <span class="hljs-comment"># =&gt; '1'</span>
result.textresponse <span class="hljs-comment"># =&gt; 'Processed'</span>
result.paytype <span class="hljs-comment"># =&gt; 'CreditCard'</span>
result.payno <span class="hljs-comment"># =&gt; '1'</span>
result.cardexp <span class="hljs-comment"># =&gt; '1019'</span>
result.account <span class="hljs-comment"># =&gt; '411111******1111'</span>
result.useAccountUpdater <span class="hljs-comment"># =&gt; 'False'</span>
result.token <span class="hljs-comment"># =&gt; 'QQ8TR7J8P0IQ9TOL'</span>
result.customertoken <span class="hljs-comment"># =&gt; 'LFC0KIYV18APRLCH'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer-get-payment-type-decrypt-payment-type" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Decrypt Payment Type</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>decrypt</td>
<td></td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumeric string</td>
<td>Unique payment type identifier</td>
</tr>
</tbody>
</table>
<p></p>
<p>Response for Credit Card payment type:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>response</strong></td>
<td></td>
<td>Operation result code</td>
</tr>
<tr>
<td><strong>textresponse</strong></td>
<td></td>
<td>Textual response</td>
</tr>
<tr>
<td><strong>customertoken</strong></td>
<td>alphanumeric string</td>
<td>Customer unique identifier</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumeric string</td>
<td>Payment Type unique identifier</td>
</tr>
<tr>
<td><strong>paytype</strong></td>
<td>creditcard</td>
<td>Type of payment info</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0719 = 7/2019)</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;transtype=decrypt&amp;token=6AWRPCF7C2DZ6UU2
</code></pre>
<p></p>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">response=1&amp;textresponse=Processed&amp;cardnum=4111111111111111&amp;cardexp=1221&amp;customertoken=VGHBVEKS2TDRKUC1&amp;token=6AWRPCF7C2DZ6UU2&amp;paytype=CreditCard
</code></pre>
<p></p>
<p>Response for ACH payment type:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>response</strong></td>
<td></td>
<td>Operation result code</td>
</tr>
<tr>
<td><strong>textresponse</strong></td>
<td></td>
<td>Textual response</td>
</tr>
<tr>
<td><strong>customertoken</strong></td>
<td>alphanumeric string</td>
<td>Customer unique identifier</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumeric string</td>
<td>Payment Type unique identifier</td>
</tr>
<tr>
<td><strong>paytype</strong></td>
<td>ach</td>
<td>Type of payment info</td>
</tr>
<tr>
<td><strong>bankname</strong></td>
<td></td>
<td>Bank name</td>
</tr>
<tr>
<td><strong>routing</strong></td>
<td></td>
<td>Bank routing number</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td></td>
<td>Bank account number</td>
</tr>
<tr>
<td><strong>achaccounttype</strong></td>
<td>checking / savings</td>
<td>Type of account</td>
</tr>
<tr>
<td><strong>achaccountsubtype</strong></td>
<td>business / personal</td>
<td>Subtype of account</td>
</tr>
<tr>
<td>checknumber</td>
<td></td>
<td>Check Number</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td>Company name</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;transtype=decrypt&amp;token=LZCBU040WXKKXHR1
</code></pre>
<p></p>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">response=1&amp;textresponse=Processed&amp;bankname=Bank+name&amp;routing=123456&amp;account=987654321&amp;achaccounttype=Checking&amp;achaccountsubtype=Personal&amp;checknumber=5678&amp;customertoken=VGHBVEKS1TDRKUC1&amp;token=LZCBU040WXKKXHR1&amp;paytype=Ach&amp;firstname=John&amp;lastname=Smith
</code></pre>
<p></p>
<p>Response for eCheck payment type:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>response</strong></td>
<td></td>
<td>Operation result code</td>
</tr>
<tr>
<td><strong>textresponse</strong></td>
<td></td>
<td>Textual response</td>
</tr>
<tr>
<td><strong>customertoken</strong></td>
<td>alphanumeric string</td>
<td>Customer unique identifier</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumeric string</td>
<td>Payment Type unique identifier</td>
</tr>
<tr>
<td><strong>paytype</strong></td>
<td>check</td>
<td>Type of payment info</td>
</tr>
<tr>
<td><strong>bankname</strong></td>
<td></td>
<td>Bank name</td>
</tr>
<tr>
<td><strong>routing</strong></td>
<td></td>
<td>Bank routing number</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td></td>
<td>Bank account number</td>
</tr>
<tr>
<td><strong>achaccounttype</strong></td>
<td>business / personal</td>
<td>Type of account</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td>Company name</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;transtype=decrypt&amp;token=A5MQFQPQ9KY8B5E1
</code></pre>
<p></p>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">response=1&amp;textresponse=Processed&amp;bankname=Bank+name&amp;routing=123456789&amp;account=987654321&amp;achaccounttype=Business&amp;customertoken=VGHBVEKS1TDRKUC1&amp;token=A5MQFQPQ9KY8B5E1&amp;paytype=Check&amp;company=Beasts+of+Beauty
</code></pre>
<p></p>
<p>Response for Star Card payment type:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>response</strong></td>
<td></td>
<td>Operation result code</td>
</tr>
<tr>
<td><strong>textresponse</strong></td>
<td></td>
<td>Textual response</td>
</tr>
<tr>
<td><strong>customertoken</strong></td>
<td>alphanumeric string</td>
<td>Customer unique identifier</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumeric string</td>
<td>Payment Type unique identifier</td>
</tr>
<tr>
<td><strong>paytype</strong></td>
<td>starcard</td>
<td>Type of payment info</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td>Credit card number</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;transtype=decrypt&amp;token=ODUFV8P12KRM8QK1
</code></pre>
<p></p>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">response=1&amp;textresponse=Processed&amp;cardnum=6019451602641830&amp;customertoken=VGHBVEKS1TDRKUC1&amp;token=ODUFV8P12KRM8QK1&amp;paytype=StarCard
</code></pre>
<p></p>
<p>Response for eWallet payment type:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>response</strong></td>
<td></td>
<td>Operation result code</td>
</tr>
<tr>
<td><strong>textresponse</strong></td>
<td></td>
<td>Textual response</td>
</tr>
<tr>
<td><strong>customertoken</strong></td>
<td>alphanumeric string</td>
<td>Customer unique identifier</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumeric string</td>
<td>Payment Type unique identifier</td>
</tr>
<tr>
<td><strong>paytype</strong></td>
<td>ewallet</td>
<td>Type of payment info</td>
</tr>
<tr>
<td><strong>ewalletaccount</strong></td>
<td></td>
<td>eWallet account credentials</td>
</tr>
<tr>
<td><strong>ewallettype</strong></td>
<td>paypal</td>
<td>Type of eWallet</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;transtype=decrypt&amp;token=3MK4184FCER633W1
</code></pre>
<p></p>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">response=1&amp;textresponse=Processed&amp;ewallettype=PayPal&amp;ewalletaccount=test%40email.com&amp;customertoken=VGHBVEKS1TDRKUC1&amp;token=3MK4184FCER633W1&amp;paytype=EWallet
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   No content for this section.
                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer-get-payment-type-decrypt-payment-type-tokenized-payments" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Tokenized Payments</h3>
<p></p>
<p>Sale, Auth and Credit operations could be processed using Data Vault client
info. For tokenized payment you can use token of the payment type or Data Vault
client's token. If client's token is used then the first client's payment type
will be used to process the payment. Please see an example below.</p>
<p></p>
<pre class="language-none"><code class="language-none">mkey=MTA6MzM6NTYgUE0tLVBheVRhY3RpeALO&amp;transtype=sale&amp;token=0558050763310762&amp;amount=10
</code></pre>
<p></p>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">response=1&amp;textresponse=SUCCESS&amp;transid=1007397&amp;xref=3393966934&amp;authcode=123456&amp;orderid=&amp;type=sale&amp;avsresponse=N&amp;cvvresponse=&amp;coderesponse=100&amp;codedescription=Transaction+was+Approved&amp;status=200
</code></pre>
<p></p>
<p>Merchant can check “Allow to override Billing information for tokenized
payments” option on the Configuration Values page (Merchant portal ⇢ Data Vault
⇢ Administration ⇢ Configuration Settings) to allow system to override billing
and shipping information with information from the tokenized API request.</p>
<p>If option is checked billing and shipping fields can be present in the request
even when token is specified. Parameters specified in the request will override
corresponding client's parameters for the payment. So payment will be processed
with specified parameters but Data Vault client's info won’t be updated.</p>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   No content for this section.
                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-payment-plans" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h2>Creating Custom Payment Plans</h2>
<p></p>
<p>Unique payment plans can be created to automatically bill customer using custom
amounts and frequencies</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-payment-plans-create-plan" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Creating a Payment Plan</h3>
<p>First we must describe our plan</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>addplan</td>
<td></td>
</tr>
<tr>
<td><strong>planname</strong></td>
<td>string</td>
<td>Payment plan name</td>
</tr>
<tr>
<td><strong>plandesc</strong></td>
<td>string</td>
<td>Payment plan description</td>
</tr>
<tr>
<td><strong>startdate</strong></td>
<td>MM/DD/YYYY</td>
<td>Starting day of the plan</td>
</tr>
<tr>
<td>defaultachmkey</td>
<td></td>
<td>Merchant key of ACH account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>defaultcreditcardmkey</td>
<td></td>
<td>Merchant key of Credit Card account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>defaultecheckmkey</td>
<td></td>
<td>Merchant key of eCheck account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>defaultstartcardmkey</td>
<td></td>
<td>Merchant key of Star Card account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>defaultewalletmkey</td>
<td></td>
<td>Merchant key of eWallet account with which plan payments should be processed by default</td>
</tr>
</tbody>
</table>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=addplan&amp;\
planname=PaymentPlan1&amp;\
plandesc=1st Payment Plan&amp;\
startdate=01/31/2017&amp;\
defaultachmkey=<span class="hljs-variable">$ACH_M_KEY</span>&amp;\
defaultcreditcardmkey=<span class="hljs-variable">$M_KEY</span>&amp;\
defaultcheckmkey=<span class="hljs-variable">$M_KEY</span>&amp;\
defaultstarcardmkey=<span class="hljs-variable">$M_KEY</span>&amp;\
defaulte_walletmkey=<span class="hljs-variable">$M_KEY</span>&amp;\
sequence_1=1&amp;\
sequence_2=2&amp;\
amount_1=1.99&amp;\
amount_2=2.99&amp;\
scheduletype_1=custom&amp;\
scheduletype_2=monthly&amp;\
scheduleday_1=7&amp;\
scheduleday_2=1&amp;\
duration_1=365&amp;\
duration_2=-1&amp;\
productid_1=abc&amp;\
productid_2=123&amp;\
description_1=Weekly&amp;\
description_2=Monthly&amp;\
notifyfailures=false&amp;\
userecycling=true&amp;\
retrycount=2&amp;\
retrytype=daily&amp;\
retryperiod=1&amp;\
autocreateclientaccounts=true"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
<span class="hljs-built_in">type</span>=addplan&amp;
plantoken=76Y5QQT2LV54J5SE
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.CreatePaymentPlan(
    planName: <span class="hljs-string">"PaymentPlan1"</span>, 
    planDesc: <span class="hljs-string">"1st Payment Plan"</span>, 
    startDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    sequenceSteps: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.SequenceStep{ Sequence = <span class="hljs-number">1</span>, Amount = <span class="hljs-number">9.99</span>m, ScheduleType = Sparrow.ScheduleType.Monthly, ScheduleDay = <span class="hljs-number">5</span>, Duration = <span class="hljs-number">12</span> } });
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.Type;    <span class="hljs-comment">// addplan</span>
result.PlanToken;    <span class="hljs-comment">// C17KAJUGB2SWV0OW</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-payment-plans-create-plan-update-plan" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Updating a Payment Plan</h3>
<p>Payment Plans can be updated by using the transaction type “updateplan”.</p>
<p></p>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>updateplan</td>
<td></td>
</tr>
<tr>
<td><strong>token</strong></td>
<td></td>
<td>Unique payment plan identifier</td>
</tr>
<tr>
<td>planname</td>
<td>string</td>
<td>Payment plan name</td>
</tr>
<tr>
<td>plandesc</td>
<td>string</td>
<td>Payment plan description</td>
</tr>
<tr>
<td>startdate</td>
<td>MM/DD/YYYY</td>
<td>Starting day of the plan</td>
</tr>
<tr>
<td>defaultachmkey</td>
<td></td>
<td>Merchant key of ACH account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>defaultcreditcardmkey</td>
<td></td>
<td>Merchant key of Credit Card account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>defaultecheckmkey</td>
<td></td>
<td>Merchant key of eCheck account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>defaultstartcardmkey</td>
<td></td>
<td>Merchant key of Star Card account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>defaultewalletmkey</td>
<td></td>
<td>Merchant key of eWallet account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>userecycling</td>
<td>true/false</td>
<td>Specifies whether to reprocess failed transactions in this plan</td>
</tr>
<tr>
<td>notifyfailures</td>
<td>true/false</td>
<td>Sends notification emails to the client in case of failed payments</td>
</tr>
<tr>
<td>retrycount</td>
<td>positive integer</td>
<td>Number of times to retry each failed transaction. This field is required if transaction recycling is activated, and ignored otherwise</td>
</tr>
<tr>
<td>retrytype</td>
<td>daily / weekly / monthly</td>
<td>Specifies the type of retry schedule</td>
</tr>
<tr>
<td>retryperiod</td>
<td>positive integer</td>
<td>Number of days between retry attempts. This field is required if retrytype=daily</td>
</tr>
<tr>
<td>retrydayofweek</td>
<td>string</td>
<td>This field is required if retrytype=weekly (monday, tuesday etc.)</td>
</tr>
<tr>
<td>retryfirstdayofmonth</td>
<td>positive integer</td>
<td>First date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>retryseconddayofmonth</td>
<td>positive integer</td>
<td>Second date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>autocreateclientaccounts</td>
<td>true / false</td>
<td>Creates username and password for Client Portal automatically when plan is assigned to the client</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">mkey=HMNK8687DVJHG45D4D3KL90&amp;transtype=updateplan&amp;token=HJFK87G5JBN0&amp;userecycling=false&amp;senderemail=accounting@test.com&amp;reviewonassignment=false
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=updateplan&amp;\
token=I4LYCSV3FMGDTA9G&amp;\
planname=PaymentPlan1&amp;\
plandesc=1st Payment Plan&amp;\
startdate=01/31/2017&amp;\
defaultachmkey=<span class="hljs-variable">$ACH_M_KEY</span>&amp;\
defaultcreditcardmkey=<span class="hljs-variable">$M_KEY</span>&amp;\
defaultcheckmkey=<span class="hljs-variable">$M_KEY</span>&amp;\
defaultstarcardmkey=<span class="hljs-variable">$M_KEY</span>&amp;\
defaulte_walletmkey=<span class="hljs-variable">$M_KEY</span>&amp;\
userrecycling=true&amp;\
notifyfailures=true&amp;\
retrycount=2&amp;\
retrytype=daily&amp;\
retryperiod=2&amp;\
autocreateclientaccounts=true"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
<span class="hljs-built_in">type</span>=updateplan
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultCreatePaymentPlan = <span class="hljs-keyword">await</span> _sparrow.CreatePaymentPlan(
    planName: <span class="hljs-string">"PaymentPlan1"</span>, 
    planDesc: <span class="hljs-string">"1st Payment Plan"</span>, 
    startDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    sequenceSteps: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.SequenceStep{ Sequence = <span class="hljs-number">1</span>, Amount = <span class="hljs-number">10.00</span>m, ScheduleType = Sparrow.ScheduleType.Monthly, ScheduleDay = <span class="hljs-number">5</span>, Duration = <span class="hljs-number">12</span> } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.UpdatePaymentPlan(
    token: resultCreatePaymentPlan.PlanToken, 
    sequenceSteps: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.SequenceStep{ Sequence = <span class="hljs-number">1</span>, Amount = <span class="hljs-number">20.00</span>m, ScheduleType = Sparrow.ScheduleType.Monthly, ScheduleDay = <span class="hljs-number">5</span>, Duration = <span class="hljs-number">12</span>, OperationType = Sparrow.OperationType.Updatesequence } });
</code></pre>
<p>RESULT CreatePaymentPlan:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreatePaymentPlan.Response;    <span class="hljs-comment">// 1</span>
resultCreatePaymentPlan.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultCreatePaymentPlan.Type;    <span class="hljs-comment">// addplan</span>
resultCreatePaymentPlan.PlanToken;    <span class="hljs-comment">// 0GHHZ4TB1FAUVVCN</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.Type;    <span class="hljs-comment">// updateplan</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-payment-plans-create-plan-update-plan-sequences" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Building a Sequence</h3>
<p>Now we define the sequences within the plan which determine how much the
customer will be charged and when</p>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>sequence_#<strong>​</strong></td>
<td>positive integer</td>
<td>The sequence number defines which set of payments should occur first, second third, etc; if multiple sequences are present</td>
</tr>
<tr>
<td><strong>amount_#​</strong></td>
<td>d.dd</td>
<td>Amount to be paid</td>
</tr>
<tr>
<td><strong>scheduletype_#</strong></td>
<td>monthly/ custom/ annual</td>
<td>Specifies the type of payment schedule. Supported types are: every month of a specified date, every N days, every year on a specified date</td>
</tr>
<tr>
<td><strong>scheduleday_#​</strong></td>
<td>positive integer</td>
<td>Day of the month for processing payments (scheduletype=monthly) or number of days between payments (scheduletype=custom)</td>
</tr>
<tr>
<td><strong>duration_#</strong></td>
<td>integer</td>
<td>Positive number of charges or -1 if no limit</td>
</tr>
<tr>
<td>productid_#</td>
<td>string</td>
<td>External ID for the product</td>
</tr>
<tr>
<td>description_#</td>
<td>string</td>
<td>Description of the sequence</td>
</tr>
<tr>
<td>notifyfailures</td>
<td>true/false</td>
<td>Sends notification emails to the client if failed payments occur</td>
</tr>
<tr>
<td>userecycling</td>
<td>true/false</td>
<td>Specifies whether to reprocess failed transactions for this plan</td>
</tr>
<tr>
<td>defaultewalletmkey</td>
<td></td>
<td>Merchant key of eWallet account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>retrycount</td>
<td>positive integer</td>
<td>Number of times to retry each failed transaction. This field is required if transaction recycling is activated, and ignored otherwise</td>
</tr>
<tr>
<td>retrytype</td>
<td>daily/ weekly/ monthly</td>
<td>Specifies the type of retry schedule. Supported types are: every month of a specified date, every N days, every year on a specified date</td>
</tr>
<tr>
<td>retryperiod</td>
<td>positive integer</td>
<td>Number of days between retry attempts. This field is required if retrytype=daily</td>
</tr>
<tr>
<td>retrydayofweek</td>
<td>string</td>
<td>This field is required if retrytype=weekly (monday, tuesday etc.)</td>
</tr>
<tr>
<td>retryfirstdayofmonth</td>
<td>positive integer</td>
<td>First date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>retryseconddayofmonth</td>
<td>positive integer</td>
<td>Second date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>autocreateclientaccounts</td>
<td>true/false</td>
<td>Creates username and password for Client Portal automatically when plan is assigned to the client</td>
</tr>
</tbody>
</table>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"amount_#=1.99;2.99&amp;\
scheduletype_#=monthly;custom&amp;\
duration=-1;-1&amp;\
productid_#=123;321&amp;\
description_#=Blue widget;Brown widget&amp;\
notifyfailures=true&amp;\
userecycling=true&amp;\
defaultewalletmkey=T6YQTCA3RK3IEW8R14ITSJBI&amp;\
retrycount=2&amp;\
retrytype=daily&amp;\
retryperiod=2&amp;\
autocreateclientaccounts=true"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=3&amp;
textresponse=Required+payment+field+transtype+is+missing
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-payment-plans-create-plan-update-plan-sequences-notifications" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Notification Settings</h3>
<p>We must also set notification settings to alert customers of successful
payments, passed due payment, plan changes, etc.</p>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>reviewonassignment<strong>​</strong></td>
<td>true/false</td>
<td>If “true” this will set the payment plan to pending until it is reviewed by the merchant admin</td>
</tr>
<tr>
<td>processimmediately<strong>​</strong></td>
<td>true/false</td>
<td>Specifies if new payments should be processed immediately or end of day</td>
</tr>
<tr>
<td>overridesender</td>
<td>true/false</td>
<td>Specifies whether to override sender email for customers notifications</td>
</tr>
<tr>
<td>senderemail</td>
<td>email</td>
<td>Sender email. This field is required if overridesender = true</td>
</tr>
<tr>
<td>notifyupcomingpayment</td>
<td>true/false</td>
<td>Specifies whether to notify customer about upcoming payment</td>
</tr>
<tr>
<td>notifydaysbeforeupcomingpayment</td>
<td>positive integer</td>
<td>Number of days before notification about upcoming payment should be sent to the client. This field is required if notifyupcomingpayment = true</td>
</tr>
<tr>
<td>notifyplansummary</td>
<td>true/false</td>
<td>Specifies whether to send merchant a Summarized Plan Report</td>
</tr>
<tr>
<td>notifyplansummaryinterval</td>
<td>daily / weekly / monthly / quaterly</td>
<td>Interval of plan summary notifications. This field is required if notifyplansummary = true</td>
</tr>
<tr>
<td>notifyplansummaryemails</td>
<td></td>
<td>Multiple addresses are separated by comma. This field is required if notifyplansummary = true</td>
</tr>
<tr>
<td>notifydailystats</td>
<td>true/false</td>
<td>Specifies whether to send merchant a Daily Plan Processing Statistics Report</td>
</tr>
<tr>
<td>notifydailystatsemails</td>
<td></td>
<td>Multiple addresses are separated by comma. This field is required if notifydailystats = true</td>
</tr>
<tr>
<td>notifyplancomplete</td>
<td>true/false</td>
<td>Specifies whether to notify merchant about plan completion</td>
</tr>
<tr>
<td>notifyplancompleteemails</td>
<td></td>
<td>Multiple addresses are separated by comma. This field is required if notifyplancomplete = true</td>
</tr>
<tr>
<td>notifydecline</td>
<td>true/false</td>
<td>Specifies whether to notify merchant about failed payments</td>
</tr>
<tr>
<td>notifydeclineemails</td>
<td></td>
<td>Multiple addresses are separated by comma. This field is required if notifydecline = true</td>
</tr>
<tr>
<td>notifyviaftp</td>
<td>true/false</td>
<td>Specifies whether to transfer transaction file via ftp</td>
</tr>
<tr>
<td>notifyviaftpurl</td>
<td>true/false</td>
<td>FTP address on which transaction file is transferred. This field is required if notifyviaftp = true</td>
</tr>
<tr>
<td>notifyviaftpusername</td>
<td></td>
<td>Username to access FTP address. This field is required if notifyviaftp = true</td>
</tr>
<tr>
<td>notifyviaftppassword</td>
<td></td>
<td>Password to access FTP address. This field is required if notifyviaftp = true</td>
</tr>
<tr>
<td>notifyflagged</td>
<td>true/false</td>
<td>Specifies whether to notify merchant about flagged for review payments</td>
</tr>
<tr>
<td>notifyflaggedemails</td>
<td></td>
<td>Multiple addresses are separated by comma. This field is required if notifyflagged = true</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=addplan&amp;planname=Monthly+fees&amp;plandesc=Some+long+description.&amp;startdate=4/13/2017&amp;sequence_1=1&amp;amount_1=12.45&amp;scheduletype_1=monthly&amp;scheduleday_1=5&amp;duration_1=10
</code></pre>
<p>***This request will create a new payment plan starting on April 13, 2017
with one sequence, defining 10 payments, each on 5th day of the month (i.e.
payments will be made on May 5, June 5, July 5, and so on).</p>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">""</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=3&amp;
textresponse=Required+payment+field+transtype+is+missing&amp;
errorcode=
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Adding or Updating a Sequence</h3>
<p>We can also add a new sequence or update an existing plan sequence.</p>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>operationtype_#</strong></td>
<td>addsequence/updatesequence</td>
<td>Addsequence will add a new sequence, whereas Updatesequence will update an existing sequence</td>
</tr>
<tr>
<td><strong>sequence_#​</strong></td>
<td>positive integer</td>
<td>The sequence number defines which set of payments should occur first, second third, etc; if multiple sequences are present</td>
</tr>
<tr>
<td><strong>amount_#​</strong></td>
<td>d.dd</td>
<td>Amount to be paid</td>
</tr>
<tr>
<td><strong>scheduletype_#</strong></td>
<td>monthly/ custom/ annual</td>
<td>Specifies the type of payment schedule. Supported types are: every month of a specified date, every N days, every year on a specified date</td>
</tr>
<tr>
<td><strong>scheduleday_#​</strong></td>
<td>positive integer</td>
<td>Day of the month for processing payments (scheduletype=monthly) or number of days between payments (scheduletype=custom)</td>
</tr>
<tr>
<td><strong>duration_#</strong></td>
<td>integer</td>
<td>Positive number of charges or -1 if no limit</td>
</tr>
<tr>
<td>productid_#</td>
<td>string</td>
<td>External ID for the product</td>
</tr>
<tr>
<td>description_#</td>
<td>string</td>
<td>Description of the sequence</td>
</tr>
<tr>
<td>newsequence_#</td>
<td>positive integer</td>
<td>New number for the sequence</td>
</tr>
<tr>
<td>notifyfailures</td>
<td>true/false</td>
<td>Sends notification emails to the client if failed payments occur</td>
</tr>
<tr>
<td>userecycling</td>
<td>true/false</td>
<td>Specifies whether to reprocess failed transactions for this plan</td>
</tr>
<tr>
<td>defaultewalletmkey</td>
<td></td>
<td>Merchant key of eWallet account with which plan payments should be processed by default</td>
</tr>
<tr>
<td>retrycount</td>
<td>positive integer</td>
<td>Number of times to retry each failed transaction. This field is required if transaction recycling is activated, and ignored otherwise</td>
</tr>
<tr>
<td>retrytype</td>
<td>daily/ weekly/ monthly</td>
<td>Specifies the type of retry schedule. Supported types are: every month of a specified date, every N days, every year on a specified date</td>
</tr>
<tr>
<td>retryperiod</td>
<td>positive integer</td>
<td>Number of days between retry attempts. This field is required if retrytype=daily</td>
</tr>
<tr>
<td>retrydayofweek</td>
<td>string</td>
<td>This field is required if retrytype=weekly (monday, tuesday etc.)</td>
</tr>
<tr>
<td>retryfirstdayofmonth</td>
<td>positive integer</td>
<td>First date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>retryseconddayofmonth</td>
<td>positive integer</td>
<td>Second date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>autocreateclientaccounts</td>
<td>true/false</td>
<td>Creates username and password for Client Portal automatically when plan is assigned to the client</td>
</tr>
</tbody>
</table>
<p></p>
<p>Add Sequence</p>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=updateplan&amp;token=HJFK87G5JBN0&amp;operationtype_1=addsequence&amp;sequence_1=2&amp;amount_1=9.99&amp;scheduletype_1=monthly&amp;scheduleday_1=5&amp;duration_1=12
</code></pre>
<p>Update Sequence</p>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=updateplan&amp;token=HJFK87G5JBN0&amp;operationtype_1=updatesequence&amp;sequence_1=2&amp;amount_1=10.99&amp;scheduletype_1=monthly&amp;scheduleday_1=5&amp;duration_1=12
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"amount_#=1.99;2.99&amp;\
scheduletype_#=monthly;custom&amp;\
duration=-1;-1&amp;\
productid_#=123;321&amp;\
description_#=Blue widget;Brown widget&amp;\
notifyfailures=true&amp;\
userecycling=true&amp;\
defaultewalletmkey=T6YQTCA3RK3IEW8R14ITSJBI&amp;\
retrycount=2&amp;\
retrytype=daily&amp;\
retryperiod=2&amp;\
autocreateclientaccounts=true"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=3&amp;
textresponse=Required+payment+field+transtype+is+missing&amp;
errorcode=
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Deleting a Sequence</h3>
<p>We can also delete a sequence.</p>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>operationtype_#</td>
<td>deletesequence</td>
<td>This will delete a sequence</td>
</tr>
<tr>
<td>sequence_#<strong>​</strong></td>
<td>positive integer</td>
<td>Sequence to be deleted</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;transtype=updateplan&amp;token=HJFK87G5JBN0&amp;operationtype_1=deletesequence&amp;sequence_1=2
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">""</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=3&amp;
textresponse=Required+payment+field+transtype+is+missing&amp;
errorcode=&amp;
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultCreatePaymentPlan = <span class="hljs-keyword">await</span> _sparrow.CreatePaymentPlan(
    planName: <span class="hljs-string">"PaymentPlan1"</span>, 
    planDesc: <span class="hljs-string">"1st Payment Plan"</span>, 
    startDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    sequenceSteps: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.SequenceStep{ Sequence = <span class="hljs-number">1</span>, Amount = <span class="hljs-number">9.99</span>m, ScheduleType = Sparrow.ScheduleType.Monthly, ScheduleDay = <span class="hljs-number">5</span>, Duration = <span class="hljs-number">12</span> } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.DeleteSequence(
    deleteSequenceSteps: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.SequenceStepToDelete{ Sequence = <span class="hljs-number">1</span> } }, 
    token: resultCreatePaymentPlan.PlanToken);
</code></pre>
<p>RESULT CreatePaymentPlan:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreatePaymentPlan.Response;    <span class="hljs-comment">// 1</span>
resultCreatePaymentPlan.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultCreatePaymentPlan.Type;    <span class="hljs-comment">// addplan</span>
resultCreatePaymentPlan.PlanToken;    <span class="hljs-comment">// X16TGWE4V6Z5X90W</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.Type;    <span class="hljs-comment">// updateplan</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Deleting a Plan</h3>
<p>We can also delete an entire plan.</p>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>deleteplan</td>
<td></td>
</tr>
<tr>
<td><strong>token</strong></td>
<td>alphanumeric string</td>
<td>Payment plan unique identifier</td>
</tr>
<tr>
<td>cancelpayments</td>
<td>true/false</td>
<td>Specifies whether to cancel pending payments caused by assignments of this plan. Default value is false</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">mkey=HMNK8687DVJHG45D4D3KL90&amp;transtype=deleteplan&amp;token=HJFK87G5JBN0&amp;cancelpayments=true
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=deleteplan&amp;\
token=315KMHH74U690DS5&amp;\
cancelpayments=true"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=SUCCESS&amp;
<span class="hljs-built_in">type</span>=deleteplan
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultCreatePaymentPlan = <span class="hljs-keyword">await</span> _sparrow.CreatePaymentPlan(
    planName: <span class="hljs-string">"PaymentPlan1"</span>, 
    planDesc: <span class="hljs-string">"1st Payment Plan"</span>, 
    startDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    sequenceSteps: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.SequenceStep{ Sequence = <span class="hljs-number">1</span>, Amount = <span class="hljs-number">9.99</span>m, ScheduleType = Sparrow.ScheduleType.Monthly, ScheduleDay = <span class="hljs-number">5</span>, Duration = <span class="hljs-number">12</span> } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.DeletePlan(
    token: resultCreatePaymentPlan.PlanToken);
</code></pre>
<p>RESULT CreatePaymentPlan:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreatePaymentPlan.Response;    <span class="hljs-comment">// 1</span>
resultCreatePaymentPlan.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultCreatePaymentPlan.Type;    <span class="hljs-comment">// addplan</span>
resultCreatePaymentPlan.PlanToken;    <span class="hljs-comment">// DRJWXFITUP47M13F</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
result.Type;    <span class="hljs-comment">// deleteplan</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan-assign-payment-plan" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Assigning a Payment Plan to a Customer</h3>
<p>Payment plans can be assigned to multiple Data Vault customers</p>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secure merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>assignplan</td>
<td></td>
</tr>
<tr>
<td><strong>customertoken</strong></td>
<td>alphanumeric string</td>
<td>Customer unique identifier</td>
</tr>
<tr>
<td><strong>plantoken</strong></td>
<td>alphanumeric string</td>
<td>Recurring payment plan unique identifier; used when assigning existing plan to the customer</td>
</tr>
<tr>
<td><strong>paymenttoken</strong></td>
<td>alphanumeric string</td>
<td>Token of the customer’s payment type, if they have multiple</td>
</tr>
<tr>
<td>startdate</td>
<td>MM/DD/YYYY</td>
<td>Day of the first payment of the plan; if not present the plan’s start date (if it exists) is used.</td>
</tr>
<tr>
<td>productid</td>
<td>string</td>
<td>External ID for the product</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Description of plan assignment</td>
</tr>
<tr>
<td>amount</td>
<td>d.dd</td>
<td>Amount purchased. This field is required for layaway plan assignment and ignored otherwise</td>
</tr>
<tr>
<td>notifyfailures</td>
<td>true/false</td>
<td>Sends notification emails to the client if failed payments occur</td>
</tr>
<tr>
<td>userecycling</td>
<td>true/false</td>
<td>Specifies whether to reprocess failed transactions for this plan</td>
</tr>
<tr>
<td>retrycount</td>
<td>positive integer</td>
<td>Number of times to retry each failed transaction. This field is required if transaction recycling is activated, and ignored otherwise</td>
</tr>
<tr>
<td>retrytype</td>
<td>daily/ weekly/ monthly</td>
<td>Specifies the type of retry schedule. Supported types are: every month of a specified date, every N days, every year on a specified date</td>
</tr>
<tr>
<td>retryperiod</td>
<td>positive integer</td>
<td>Number of days between retry attempts. This field is required if retrytype=daily</td>
</tr>
<tr>
<td>retrydayofweek</td>
<td>string</td>
<td>This field is required if retrytype=weekly (monday, tuesday etc.)</td>
</tr>
<tr>
<td>retryfirstdayofmonth</td>
<td>positive integer</td>
<td>First date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>retryseconddayofmonth</td>
<td>positive integer</td>
<td>Second date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>proratedpayment</td>
<td>true / false</td>
<td>Specifies whether to add prorated payment in this plan</td>
</tr>
<tr>
<td>routingkey</td>
<td></td>
<td>Merchant key of account with which plan payments should be processed by default. This account must be of the same type as selected customer’s payment type</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=JHG48D3V6N8HKFF3W221AA&amp;transtype=assignplan&amp;customertoken=HJG543D321HJK&amp;&amp;paymenttoken=9K7US80YUQ1LPN27&amp;plantoken=JHG78HJGF55&amp;startdate=10/01/2017&amp;notifyfailures=true
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=assignplan&amp;\
customertoken=F6OE0IN0I5HSV6AJ&amp;\
plantoken=76Y5QQT2LV54J5SE&amp;\
paymenttoken=9K7US80YUQ1LPN27&amp;\
startdate=01/31/2017&amp;\
notifyfailures=true&amp;\
userecycling=true&amp;\
retrycount=2&amp;\
retrytype=daily&amp;\
retryperiod=2&amp;\
notifyfailuresemails=jdoe@example.com"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Success&amp;
<span class="hljs-built_in">type</span>=assignplan&amp;
assignmenttoken=JCXG572GBX20NFDF
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> resultCreatePaymentPlan = <span class="hljs-keyword">await</span> _sparrow.CreatePaymentPlan(
    planName: <span class="hljs-string">"PaymentPlan1"</span>, 
    planDesc: <span class="hljs-string">"1st Payment Plan"</span>, 
    startDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    sequenceSteps: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.SequenceStep{ Sequence = <span class="hljs-number">1</span>, Amount = <span class="hljs-number">9.99</span>m, ScheduleType = Sparrow.ScheduleType.Monthly, ScheduleDay = <span class="hljs-number">5</span>, Duration = <span class="hljs-number">12</span> } });
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.AssignPaymentPlanToCustomer(
    customerToken: resultAddCustomer.CustomerToken, 
    planToken: resultCreatePaymentPlan.PlanToken, 
    paymentToken: resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>]);
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token '7P8FPQCQYSSYEFCL' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// 7P8FPQCQYSSYEFCL</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// DTLYC9IM2C4MH1PA</span>
</code></pre>
<p>RESULT CreatePaymentPlan:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreatePaymentPlan.Response;    <span class="hljs-comment">// 1</span>
resultCreatePaymentPlan.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultCreatePaymentPlan.Type;    <span class="hljs-comment">// addplan</span>
resultCreatePaymentPlan.PlanToken;    <span class="hljs-comment">// 7OOKMD2ATZ8MKX8V</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Success</span>
result.Type;    <span class="hljs-comment">// assignplan</span>
result.AssignmentToken;    <span class="hljs-comment">// OSS6DU853EXQSWID</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan-assign-payment-plan-update-plan-assignment" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Update Payment Plan Assignment</h3>
<p>Payment Plan assignments may be updated</p>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secure merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>updateassignment</td>
<td></td>
</tr>
<tr>
<td><strong>assignmenttoken</strong></td>
<td>alphanumeric string</td>
<td>Unique identifier of payment plan assignment</td>
</tr>
<tr>
<td>paymenttoken</td>
<td>alphanumeric string</td>
<td>Token of the customer’s payment type, if they have multiple</td>
</tr>
<tr>
<td>startdate</td>
<td>MM/DD/YYYY</td>
<td>Day of the first payment of the plan; if not present the plan’s start date (if it exists) is used.</td>
</tr>
<tr>
<td>productid</td>
<td>string</td>
<td>External ID for the product</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Description of plan assignment</td>
</tr>
<tr>
<td>notifyfailures</td>
<td>true/false</td>
<td>Sends notification emails to the client if failed payments occur</td>
</tr>
<tr>
<td>userecycling</td>
<td>true/false</td>
<td>Specifies whether to reprocess failed transactions for this plan</td>
</tr>
<tr>
<td>retrycount</td>
<td>positive integer</td>
<td>Number of times to retry each failed transaction. This field is required if transaction recycling is activated, and ignored otherwise</td>
</tr>
<tr>
<td>retrytype</td>
<td>daily/ weekly/ monthly</td>
<td>Specifies the type of retry schedule. Supported types are: every month of a specified date, every N days, every year on a specified date</td>
</tr>
<tr>
<td>retryperiod</td>
<td>positive integer</td>
<td>Number of days between retry attempts. This field is required if retrytype=daily</td>
</tr>
<tr>
<td>retrydayofweek</td>
<td>string</td>
<td>This field is required if retrytype=weekly (monday, tuesday etc.)</td>
</tr>
<tr>
<td>retryfirstdayofmonth</td>
<td>positive integer</td>
<td>First date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>retryseconddayofmonth</td>
<td>positive integer</td>
<td>Second date of retry schedule. This field is required if retrytype=monthly</td>
</tr>
<tr>
<td>proratedpayment</td>
<td>true / false</td>
<td>Specifies whether to add prorated payment in this plan</td>
</tr>
<tr>
<td>routingkey</td>
<td></td>
<td>Merchant key of account with which plan payments should be processed by default. This account must be of the same type as selected customer’s payment type</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=JHG48D3V6N8HKFF3W221AA&amp;transtype=updateassignment&amp;assignmenttoken=HJG54VKJ888&amp;startdate=11/01/2017&amp;proratedpayment=true
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=updateassignment&amp;\
assignmenttoken=4STIQWYX5NM9ZDKJ&amp;\
paymenttoken=E25BCVW6GPAY7LPA&amp;\
startdate=1/1/2018&amp;\
notifyfailures=true&amp;\
userecycling=true&amp;\
retrycount=3&amp;\
retrytype=daily&amp;\
retryperiod=2"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Success&amp;
<span class="hljs-built_in">type</span>=updateassignment&amp;
assignmenttoken=4STIQWYX5NM9ZDKJ
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> resultCreatePaymentPlan = <span class="hljs-keyword">await</span> _sparrow.CreatePaymentPlan(
    planName: <span class="hljs-string">"PaymentPlan1"</span>, 
    planDesc: <span class="hljs-string">"1st Payment Plan"</span>, 
    startDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    sequenceSteps: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.SequenceStep{ Sequence = <span class="hljs-number">1</span>, Amount = <span class="hljs-number">9.99</span>m, ScheduleType = Sparrow.ScheduleType.Monthly, ScheduleDay = <span class="hljs-number">5</span>, Duration = <span class="hljs-number">12</span> } });
<span class="hljs-keyword">var</span> resultAssignPaymentPlanToCustomer = <span class="hljs-keyword">await</span> _sparrow.AssignPaymentPlanToCustomer(
    customerToken: resultAddCustomer.CustomerToken, 
    planToken: resultCreatePaymentPlan.PlanToken, 
    paymentToken: resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>]);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.UpdatePaymentPlanAssignment(
    assignmentToken: resultAssignPaymentPlanToCustomer.AssignmentToken, 
    startDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>));
</code></pre>
<p>RESULT AssignPaymentPlanToCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAssignPaymentPlanToCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAssignPaymentPlanToCustomer.TextResponse;    <span class="hljs-comment">// Success</span>
resultAssignPaymentPlanToCustomer.Type;    <span class="hljs-comment">// assignplan</span>
resultAssignPaymentPlanToCustomer.AssignmentToken;    <span class="hljs-comment">// KB5UMCK91864GH2W</span>
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token 'CPEEHDA9OGDMOPBL' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// CPEEHDA9OGDMOPBL</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// ONAUCBX8EXRO6A55</span>
</code></pre>
<p>RESULT CreatePaymentPlan:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreatePaymentPlan.Response;    <span class="hljs-comment">// 1</span>
resultCreatePaymentPlan.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultCreatePaymentPlan.Type;    <span class="hljs-comment">// addplan</span>
resultCreatePaymentPlan.PlanToken;    <span class="hljs-comment">// 4170HM56ZU0RGVJD</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Success</span>
result.Type;    <span class="hljs-comment">// updateassignment</span>
result.AssignmentToken;    <span class="hljs-comment">// KB5UMCK91864GH2W</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan-assign-payment-plan-update-plan-assignment-cancel-plan-assignment" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Cancel Plan Assignment</h3>
<p>Payment Plan assignments may be cancelled both before and after the plan has
begun.</p>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secure merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>cancelassignment</td>
<td></td>
</tr>
<tr>
<td><strong>assignment​token</strong></td>
<td>alphanumeric string</td>
<td>Unique identifier of payment plan assignment</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">
mkey=JHG48D3V6N8HKFF3W221AA&amp;transtype=cancelassignment&amp;assignmenttoken=HJG54VKJ888
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=cancelassignment&amp;\
assignmenttoken=JCXG572GBX20NFDF"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">response=1&amp;
textresponse=Success&amp;
<span class="hljs-built_in">type</span>=cancelassignment
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultAddCustomer = <span class="hljs-keyword">await</span> _sparrow.AddCustomer(
    defaultContactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, 
    paymentType: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.PaymentType{ PayType = Sparrow.PayType.Creditcard, ContactInfo = <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> }, CreditCard = <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) } } });
<span class="hljs-keyword">var</span> resultCreatePaymentPlan = <span class="hljs-keyword">await</span> _sparrow.CreatePaymentPlan(
    planName: <span class="hljs-string">"PaymentPlan1"</span>, 
    planDesc: <span class="hljs-string">"1st Payment Plan"</span>, 
    startDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    sequenceSteps: <span class="hljs-keyword">new</span> []{ <span class="hljs-keyword">new</span> Sparrow.SequenceStep{ Sequence = <span class="hljs-number">1</span>, Amount = <span class="hljs-number">9.99</span>m, ScheduleType = Sparrow.ScheduleType.Monthly, ScheduleDay = <span class="hljs-number">5</span>, Duration = <span class="hljs-number">12</span> } });
<span class="hljs-keyword">var</span> resultAssignPaymentPlanToCustomer = <span class="hljs-keyword">await</span> _sparrow.AssignPaymentPlanToCustomer(
    customerToken: resultAddCustomer.CustomerToken, 
    planToken: resultCreatePaymentPlan.PlanToken, 
    paymentToken: resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>]);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.CancelPlanAssignment(
    assignmentToken: resultAssignPaymentPlanToCustomer.AssignmentToken);
</code></pre>
<p>RESULT AssignPaymentPlanToCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAssignPaymentPlanToCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAssignPaymentPlanToCustomer.TextResponse;    <span class="hljs-comment">// Success</span>
resultAssignPaymentPlanToCustomer.Type;    <span class="hljs-comment">// assignplan</span>
resultAssignPaymentPlanToCustomer.AssignmentToken;    <span class="hljs-comment">// IY3TGPWQVYX89QHS</span>
</code></pre>
<p>RESULT AddCustomer:</p>
<pre class="language-csharp"><code class="language-csharp">resultAddCustomer.Response;    <span class="hljs-comment">// 1</span>
resultAddCustomer.TextResponse;    <span class="hljs-comment">// Customer with token 'IP3KIQ30XODM2BWH' successfully created</span>
resultAddCustomer.Type;    <span class="hljs-comment">// addcustomer</span>
resultAddCustomer.CustomerToken;    <span class="hljs-comment">// IP3KIQ30XODM2BWH</span>
resultAddCustomer.PaymentTokens[<span class="hljs-number">0</span>];    <span class="hljs-comment">// OAXYBBOB2W5DLALY</span>
</code></pre>
<p>RESULT CreatePaymentPlan:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreatePaymentPlan.Response;    <span class="hljs-comment">// 1</span>
resultCreatePaymentPlan.TextResponse;    <span class="hljs-comment">// SUCCESS</span>
resultCreatePaymentPlan.Type;    <span class="hljs-comment">// addplan</span>
resultCreatePaymentPlan.PlanToken;    <span class="hljs-comment">// PRUDES37GWNMVZI6</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.Response;    <span class="hljs-comment">// 1</span>
result.TextResponse;    <span class="hljs-comment">// Success</span>
result.Type;    <span class="hljs-comment">// cancelassignment</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-invoicing" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h2>Invoicing</h2>
<p></p>
<p>Through the gateway, invoices can be created, stored and paid using a secure
payment page.</p>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-invoicing-create-merchant-invoice" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Creating an Invoice</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>createmerchantinvoice</td>
<td></td>
</tr>
<tr>
<td>customertoken</td>
<td>alphanumeric string</td>
<td>Unique data vault client identifier</td>
</tr>
<tr>
<td><strong>invoicedate</strong></td>
<td>MM/DD/YYYY</td>
<td>The date of the invoice</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>CCC (ISO 4217 alphabetic code)</td>
<td>Code of the payment currency</td>
</tr>
<tr>
<td><strong>invoicestatus</strong></td>
<td>draft / active</td>
<td>The status of the invoice. Only active invoices can be paid</td>
</tr>
<tr>
<td>invoicesource</td>
<td>CheckoutApi / DataVault</td>
<td>The source of the invoice. If not specified, the default value is DataVault</td>
</tr>
<tr>
<td>invoiceamount</td>
<td>d.dd</td>
<td>Total amount of invoice (i.e. 10.00). Required if product list is not specified</td>
</tr>
<tr>
<td>invoiceitemsku_#</td>
<td>alphanumeric</td>
<td>SKU number of the product being purchased. Required if one of the following fields is specified: invoiceitemdescription_#, invoiceitemprice_#, invoiceitemquantity_#</td>
</tr>
<tr>
<td>invoiceitemdescription_#</td>
<td>alphanumeric</td>
<td>Description of the product being purchased. Field supports 3000 characters. Required if one of the following fields is specified: invoiceitemsku_#, invoiceitemprice_#, invoiceitemquantity_#</td>
</tr>
<tr>
<td>invoiceitemprice_#</td>
<td>d.dd</td>
<td>Price of the single unit of a product being purchased. Required if one of the following fields is specified: invoiceitemsku_#, invoiceitemdescription_#, invoiceitemquantity_#</td>
</tr>
<tr>
<td>invoiceitemquantity_#</td>
<td>d.ddd</td>
<td>Number of units of a product being purchased. Required if one of the following fields is specified: invoiceitemsku_#, invoiceitemdescription_#, invoiceitemprice_#</td>
</tr>
<tr>
<td>sendpaymentlinkemail</td>
<td>email@email.com</td>
<td>If Invoice status is 'Active' email with Pay Invoice URL will be sent to specified email.</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=8VG63HD1LPBMIR5TPS7R52YV&amp;transtype=createmerchantinvoice&amp;customertoken=SBTQTLGTL2F31JPO&amp;invoicedate=12/30/2017&amp;currency=USD&amp;invoicestatus=Draft&amp;invoiceitemsku_1=123&amp;invoiceitemdescription_1=Services+Rendered&amp;invoiceitemprice_1=121.24&amp;invoiceitemquantity_1=1.253&amp;invoiceitemsku_2=223&amp;invoiceitemdescription_2=desc2&amp;invoiceitemprice_2=41.48&amp;invoiceitemquantity_2=2.653
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=createmerchantinvoice&amp;\
customertoken=YWVEUMYXUNARZ3VK&amp;\
invoicedate=12/01/2017&amp;\
currency=USD&amp;\
invoicestatus=draft&amp;\
invoicesource=DataVault&amp;\
invoiceamount=10.00&amp;\
invoiceitemsku_1=123&amp;\
invoiceitemsku_2=456&amp;\
invoiceitemdescription_1=Widget 1&amp;\
invoiceitemdescription_2=Widget 2&amp;\
invoiceitemprice_1=2.00&amp;\
invoiceitemprice_2=4.00&amp;\
invoiceitemquantity_1=1&amp;\
invoiceitemquantity_2=2"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">textresponse=invoice+has+been+successfully+created&amp;
invoicenumber=Inv-39031
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.CreateInvoice(
    invoiceDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    currency: <span class="hljs-string">"USD"</span>, 
    invoiceStatus: Sparrow.InvoiceStatus.Active, 
    invoiceAmount: <span class="hljs-number">10.00</span>m);
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.TextResponse;    <span class="hljs-comment">// invoice has been successfully created</span>
result.InvoiceNumber;    <span class="hljs-comment">// Inv-39706</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.create_invoice({
  <span class="hljs-symbol">invoicedate:</span> <span class="hljs-string">'10/15/2018'</span>,
  <span class="hljs-symbol">currency:</span> <span class="hljs-string">'USD'</span>,
  <span class="hljs-symbol">invoiceamount:</span> <span class="hljs-string">'212.95'</span>,
  <span class="hljs-symbol">invoicestatus:</span> <span class="hljs-string">'draft'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.textresponse <span class="hljs-comment"># =&gt; 'invoice has been successfully created'</span>
result.invoicenumber <span class="hljs-comment"># =&gt; 'Inv-39746'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-invoicing-create-merchant-invoice-update-invoice" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Update Invoice</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>updateinvoice</td>
<td></td>
</tr>
<tr>
<td><strong>invoicenumber</strong></td>
<td>Inv- [0-9]</td>
<td>Unique invoice identifier</td>
</tr>
<tr>
<td>customertoken</td>
<td>alphanumeric string</td>
<td>Unique data vault client identifier</td>
</tr>
<tr>
<td>invoicedate</td>
<td>MM/DD/YYYY</td>
<td>The date of the invoice</td>
</tr>
<tr>
<td>currency</td>
<td>CCC (ISO 4217 alphabetic code)</td>
<td>Code of the payment currency</td>
</tr>
<tr>
<td>invoicestatus</td>
<td>draft / active</td>
<td>The status of the invoice. Only active invoices can be paid</td>
</tr>
<tr>
<td>invoicesource</td>
<td>CheckoutApi / DataVault</td>
<td>The source of the invoice. If not specified, the default value is DataVault</td>
</tr>
<tr>
<td>invoiceamount</td>
<td>d.dd</td>
<td>Total amount of invoice (i.e. 10.00). Required if product list is not specified</td>
</tr>
<tr>
<td>invoiceitemsku_#</td>
<td>alphanumeric</td>
<td>SKU number of the product being purchased. Required if one of the following fields is specified: invoiceitemdescription_#, invoiceitemprice_#, invoiceitemquantity_#</td>
</tr>
<tr>
<td>invoiceitemdescription_#</td>
<td>alphanumeric</td>
<td>Description of the product being purchased. Field supports 3000 characters. Required if one of the following fields is specified: invoiceitemsku_#, invoiceitemprice_#, invoiceitemquantity_#</td>
</tr>
<tr>
<td>invoiceitemprice_#</td>
<td>d.dd</td>
<td>Price of the single unit of a product being purchased. Required if one of the following fields is specified: invoiceitemsku_#, invoiceitemdescription_#, invoiceitemquantity_#</td>
</tr>
<tr>
<td>invoiceitemquantity_#</td>
<td>d.ddd</td>
<td>Number of units of a product being purchased. Required if one of the following fields is specified: invoiceitemsku_#, invoiceitemdescription_#, invoiceitemprice_#</td>
</tr>
<tr>
<td>sendpaymentlinkemail</td>
<td>email@email.com</td>
<td>If Invoice status is 'Active' email with Pay Invoice URL will be sent to specified email.</td>
</tr>
</tbody>
</table>
<p>If any parameter is missing in the update invoice request system deletes it from
the invoice.</p>
<p></p>
<pre class="language-none"><code class="language-none">mkey=8VG63HD1LPBMIR5TPS7R52YV&amp;transtype=updateinvoice&amp;invoicenumber=Inv-80794&amp;invoicedate=12/30/2017&amp;currency=USD&amp;invoicestatus=Active&amp;invoiceitemsku_1=12345&amp;invoiceitemdescription_1=desc1&amp;invoiceitemprice_1=22.33&amp;invoiceitemquantity_1=1&amp;invoiceitemsku_2=223&amp;invoiceitemdescription_2=desc2&amp;invoiceitemprice_2=41.48&amp;invoiceitemquantity_2=2.653
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=updateinvoice&amp;\
invoicenumber=Inv-39031&amp;\
invoicedate=12/15/2017&amp;\
currency=USD&amp;\
invoicestatus=active&amp;\
invoicesource=DataVault&amp;\
invoiceamount=15.00"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">textresponse=Invoice+has+been+successfully+updated&amp;
invoicenumber=Inv-39031
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultCreateInvoice = <span class="hljs-keyword">await</span> _sparrow.CreateInvoice(
    invoiceDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    currency: <span class="hljs-string">"USD"</span>, 
    invoiceStatus: Sparrow.InvoiceStatus.Draft, 
    invoiceAmount: <span class="hljs-number">10.00</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.UpdateInvoice(
    invoiceNumber: resultCreateInvoice.InvoiceNumber, 
    invoiceStatus: Sparrow.InvoiceStatus.Active);
</code></pre>
<p>RESULT CreateInvoice:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreateInvoice.TextResponse;    <span class="hljs-comment">// invoice has been successfully created</span>
resultCreateInvoice.InvoiceNumber;    <span class="hljs-comment">// Inv-39710</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.TextResponse;    <span class="hljs-comment">// Invoice has been successfully updated</span>
result.InvoiceNumber;    <span class="hljs-comment">// Inv-39710</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.update_invoice({
  <span class="hljs-symbol">invoicenumber:</span> <span class="hljs-string">'Inv-39744'</span>,
  <span class="hljs-symbol">invoicestatus:</span> <span class="hljs-string">'active'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.textresponse <span class="hljs-comment"># =&gt; 'Invoice has been successfully updated'</span>
result.invoicenumber <span class="hljs-comment"># =&gt; 'Inv-39744'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Retrieve Invoice</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>getinvoice</td>
<td></td>
</tr>
<tr>
<td><strong>invoicenumber</strong></td>
<td>Inv- [0-9]</td>
<td>Unique invoice identifier</td>
</tr>
</tbody>
</table>
<p></p>
<p>Response from the gateway will be as follows:</p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>textresponse</strong></td>
<td></td>
<td>Textual response</td>
</tr>
<tr>
<td><strong>invoicenumber</strong></td>
<td>Inv-[0-9]</td>
<td>Unique invoice identifier</td>
</tr>
<tr>
<td><strong>invoiceamount</strong></td>
<td>d.dddd</td>
<td>Total amount of invoice (10.0000)</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>CCC</td>
<td>Code of the payment currency (ISO 4217 alphabetic code)</td>
</tr>
<tr>
<td><strong>invoicedate</strong></td>
<td>MM/DD/YYYY</td>
<td>The date of the invoice</td>
</tr>
<tr>
<td><strong>invoicestatus</strong></td>
<td>draft / active / canceled / canceledbycustomer / paid / failed</td>
<td>The date of the invoice. Only active invoices can be paid</td>
</tr>
<tr>
<td><strong>invoicepaymentlink</strong></td>
<td>URL</td>
<td>Payment link for the customer</td>
</tr>
<tr>
<td>invoiceitemid_#</td>
<td>numeric</td>
<td>Unique invoice item identifier</td>
</tr>
<tr>
<td>invoiceitemprice_#</td>
<td>d.dddd</td>
<td>Price of the single unit of a product being purchased</td>
</tr>
<tr>
<td>invoiceitemquantity_#</td>
<td>d.ddd</td>
<td>Number of units of a product being purchased</td>
</tr>
<tr>
<td>invoiceitemsku_#</td>
<td>alphanumeric</td>
<td>SKU number of the product being purchased</td>
</tr>
<tr>
<td>invoiceitemdescription_#</td>
<td>alphanumeric</td>
<td>Description of the product being purchased</td>
</tr>
<tr>
<td>invoiceitemamount_#</td>
<td>d.dddd</td>
<td>Amount of invoice item (10.0000)</td>
</tr>
</tbody>
</table>
<p>Item variables are required if invoice contains products.</p>
<p></p>
<pre class="language-none"><code class="language-none">mkey=8VG63HD1LPBMIR5TPS7R52YV&amp;transtype=getinvoice&amp;invoicenumber=Inv-80794
</code></pre>
<p></p>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">textresponse=Successful&amp;invoicenumber=Inv-80794&amp;invoiceamount=132.3800&amp;currency=USD&amp;invoicedate=12%2f30%2f2014&amp;invoicestatus=Active&amp;invoiceitemid_1=40464&amp;invoiceitemprice_1=22.3300&amp;invoiceitemquantity_1=1.000&amp;invoiceitemsku_1=12345&amp;invoiceitemdescription_1=desc1&amp;invoiceitemid_2=40465&amp;invoiceitemprice_2=41.4800&amp;invoiceitemquantity_2=2.653&amp;invoiceitemsku_2=223&amp;invoiceitemdescription_2=desc2
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=getinvoice&amp;\
invoicenumber=Inv-39030"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">textresponse=Success&amp;
invoicenumber=Inv-39030&amp;
invoiceamount=10.0000&amp;
currency=USD&amp;
invoicedate=12%2f01%2f2017&amp;
invoicestatus=Draft&amp;
invoiceitemid_1=3251&amp;
invoiceitemprice_1=2.0000&amp;
invoiceitemquantity_1=1.000&amp;
invoiceitemamount_1=2.0000&amp;
invoiceitemsku_1=123&amp;
invoiceitemdescription_1=Widget+1&amp;
invoiceitemid_2=3252&amp;
invoiceitemprice_2=4.0000&amp;
invoiceitemquantity_2=2.000&amp;
invoiceitemamount_2=8.0000&amp;
invoiceitemsku_2=456&amp;
invoiceitemdescription_2=Widget+2&amp;
customertoken=3F4JAWXXFDYSJ1JX
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultCreateInvoice = <span class="hljs-keyword">await</span> _sparrow.CreateInvoice(
    invoiceDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    currency: <span class="hljs-string">"USD"</span>, 
    invoiceStatus: Sparrow.InvoiceStatus.Active, 
    invoiceAmount: <span class="hljs-number">10.00</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.RetrieveInvoice(
    invoiceNumber: resultCreateInvoice.InvoiceNumber);
</code></pre>
<p>RESULT CreateInvoice:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreateInvoice.TextResponse;    <span class="hljs-comment">// invoice has been successfully created</span>
resultCreateInvoice.InvoiceNumber;    <span class="hljs-comment">// Inv-39707</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.TextResponse;    <span class="hljs-comment">// Success</span>
result.InvoiceNumber;    <span class="hljs-comment">// Inv-39707</span>
result.InvoiceAmount;    <span class="hljs-comment">// 10.0000</span>
result.Currency;    <span class="hljs-comment">// USD</span>
result.InvoiceDate;    <span class="hljs-comment">// 10/21/2019</span>
result.InvoiceStatus;    <span class="hljs-comment">// Active</span>
result.InvoicePaymentLink;    <span class="hljs-comment">// https://secure.sparrowone.com/Payments/Payment.aspx?token=D5A731D92F086B1C</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.get_invoice({
  <span class="hljs-symbol">invoicenumber:</span> <span class="hljs-string">'Inv-39744'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.textresponse <span class="hljs-comment"># =&gt; 'Success'</span>
result.invoicenumber <span class="hljs-comment"># =&gt; 'Inv-39744'</span>
result.invoiceamount <span class="hljs-comment"># =&gt; '212.9500'</span>
result.currency <span class="hljs-comment"># =&gt; 'USD'</span>
result.invoicedate <span class="hljs-comment"># =&gt; '10/15/2018'</span>
result.invoicestatus <span class="hljs-comment"># =&gt; 'Draft'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Cancel Invoice</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>cancelinvoice</td>
<td></td>
</tr>
<tr>
<td><strong>invoicenumber</strong></td>
<td>Inv- [0-9]</td>
<td>Unique invoice identifier</td>
</tr>
<tr>
<td><strong>invoicestatusreason</strong></td>
<td>alphanumeric</td>
<td>The reason of canceling the invoice</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=8VG63HD1LPBMIR5TPS7R52YV&amp;transtype=cancelinvoice&amp;invoicenumber=Inv-80794&amp;invoicestatusreason=end+of+contract
</code></pre>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">textresponse=invoice+has+been+successfully+canceled&amp;invoicenumber=Inv-80794
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=cancelinvoice&amp;\
invoicenumber=Inv-39028&amp;\
invoicestatusreason=Testing Cancel Feature"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">textresponse=invoice+has+been+successfully+canceled&amp;
invoicenumber=Inv-39028
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultCreateInvoice = <span class="hljs-keyword">await</span> _sparrow.CreateInvoice(
    invoiceDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    currency: <span class="hljs-string">"USD"</span>, 
    invoiceStatus: Sparrow.InvoiceStatus.Active, 
    invoiceAmount: <span class="hljs-number">10.00</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.CancelInvoice(
    invoiceNumber: resultCreateInvoice.InvoiceNumber, 
    invoiceStatusReason: <span class="hljs-string">"Testing"</span>);
</code></pre>
<p>RESULT CreateInvoice:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreateInvoice.TextResponse;    <span class="hljs-comment">// invoice has been successfully created</span>
resultCreateInvoice.InvoiceNumber;    <span class="hljs-comment">// Inv-39705</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.TextResponse;    <span class="hljs-comment">// invoice has been successfully canceled</span>
result.InvoiceNumber;    <span class="hljs-comment">// Inv-39705</span>
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-ruby"><code class="language-ruby">
api.cancel_invoice({
  <span class="hljs-symbol">invoicenumber:</span> <span class="hljs-string">'Inv-39745'</span>,
  <span class="hljs-symbol">invoicestatusreason:</span> <span class="hljs-string">'Customer allergic to product'</span>,
})

</code></pre>
<p>RESULT:</p>
<pre class="language-ruby"><code class="language-ruby">

result.textresponse <span class="hljs-comment"># =&gt; 'invoice has been successfully canceled'</span>
result.invoicenumber <span class="hljs-comment"># =&gt; 'Inv-39745'</span>

</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice-cancel-inv-customer" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Cancel Invoice by Customer</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>Secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>cancelinvoicebycustomer</td>
<td></td>
</tr>
<tr>
<td><strong>invoicenumber</strong></td>
<td>Inv- [0-9]</td>
<td>Unique invoice identifier</td>
</tr>
<tr>
<td><strong>invoicestatusreason</strong></td>
<td>alphanumeric</td>
<td>The reason of canceling the invoice</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=8VG63HD1LPBMIR5TPS7R52YV&amp;transtype=cancelinvoicebycustomer&amp;invoicenumber=Inv-80794&amp;invoicestatusreason=ending+contract
</code></pre>
<p>Expected Response</p>
<pre class="language-none"><code class="language-none">textresponse=invoice+has+been+successfully+canceled&amp;invoicenumber=Inv-80794
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=cancelinvoicebycustomer&amp;\
invoicenumber=Inv-39026&amp;\
invoicestatusreason=Cancel Invoice By Customer"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">textresponse=invoice+has+been+successfully+canceled&amp;
invoicenumber=Inv-39026
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultCreateInvoice = <span class="hljs-keyword">await</span> _sparrow.CreateInvoice(
    invoiceDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    currency: <span class="hljs-string">"USD"</span>, 
    invoiceStatus: Sparrow.InvoiceStatus.Active, 
    invoiceAmount: <span class="hljs-number">10.00</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.CancelInvoiceByCustomer(
    invoiceNumber: resultCreateInvoice.InvoiceNumber, 
    invoiceStatusReason: <span class="hljs-string">"Testing"</span>);
</code></pre>
<p>RESULT CreateInvoice:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreateInvoice.TextResponse;    <span class="hljs-comment">// invoice has been successfully created</span>
resultCreateInvoice.InvoiceNumber;    <span class="hljs-comment">// Inv-39704</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.TextResponse;    <span class="hljs-comment">// invoice has been successfully canceled</span>
result.InvoiceNumber;    <span class="hljs-comment">// Inv-39704</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice-cancel-inv-customer-pay-inv-cc" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Paying an Invoice with a Credit Card</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>payinvoice</td>
<td></td>
</tr>
<tr>
<td><strong>invoicenumber​</strong></td>
<td>Inv-[0-9]</td>
<td>Unique invoice identifier</td>
</tr>
<tr>
<td><strong>cardnum</strong></td>
<td></td>
<td>Credit card number</td>
</tr>
<tr>
<td><strong>cardexp</strong></td>
<td>MMYY</td>
<td>Credit card expiration (ie. 0719 = 7/2019)</td>
</tr>
<tr>
<td>cvv</td>
<td></td>
<td>card security code</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td>Billing company</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td>Billing address2</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td>state</td>
<td>2 character abbreviation</td>
<td>Billing state</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
<tr>
<td>country</td>
<td>CC (ISO-3166)</td>
<td>Billing Country (ie. US)</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td>Billing phone number</td>
</tr>
<tr>
<td>fax</td>
<td></td>
<td>Billing fax number</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Billing Email Address</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td>Shipping first name</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td>Shipping last name</td>
</tr>
<tr>
<td>shipcompany</td>
<td></td>
<td>Shipping company</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td>Shipping Address</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td>Shipping Address - line 2</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td>Shipping City</td>
</tr>
<tr>
<td>shipstate</td>
<td>2 character abbreviation</td>
<td>Shipping State</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td>Shipping Zip Code</td>
</tr>
<tr>
<td>shipcountry</td>
<td>CC (ISO - 3166)</td>
<td>Shipping Country, ie US</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td>Shipping Phone Number</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td>Shipping Email</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">transtype=payinvoice&amp;mkey=KewO4GI%2B64I8Vg6xCCuqvAkuAkq9cbJH&amp;invoicenumber=Inv-123456&amp;cardnum=4111111111111111&amp;cardexp=1010&amp;cvv=999&amp;firstname=John&amp;lastname=Smith&amp;address1=888+test+address&amp;city=Los+Angeles&amp;country=US&amp;state=CA&amp;phone=222-444-2938&amp;shipfirstname=John&amp;shiplastname=Smith&amp;shipaddress1=888+test+address&amp;shipcity=Los+Angeles&amp;shipstate=CA&amp;shipphone=2224442938
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$M_KEY</span>&amp;\
transtype=payinvoice&amp;\
invoicenumber=Inv-39025&amp;\
cardnum=4111111111111111&amp;\
cardexp=1019&amp;\
cvv=999&amp;\
firstname=John&amp;\
lastname=Doe&amp;\
company=Sparrow One&amp;\
address1=16100 N 71st Street&amp;\
address2=Suite 170&amp;\
city=Scottsdale&amp;\
state=AZ&amp;\
zip=85254&amp;\
country=US&amp;\
email=john@norepy.com&amp;\
shipfirstname=Jane&amp;\
shiplastname=Doe&amp;\
shipcompany=Sparrow Two&amp;\
shipaddress1=16100 N 72nd Street&amp;\
shipaddress2=Suite 171&amp;\
shipcity=Pheonix&amp;\
shipstate=AZ&amp;\
shipzip=85004&amp;\
shipcountry=US&amp;\
shipphone=6025551234&amp;\
shipemail=jane@noreply.com"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">textresponse=Invoice+has+been+successfully+paid&amp;
transid=10750812&amp;
invoicenumber=Inv-39025
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultCreateInvoice = <span class="hljs-keyword">await</span> _sparrow.CreateInvoice(
    invoiceDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    currency: <span class="hljs-string">"USD"</span>, 
    invoiceStatus: Sparrow.InvoiceStatus.Active, 
    invoiceAmount: <span class="hljs-number">10.00</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.PayInvoiceWithCreditCard(
    invoiceNumber: resultCreateInvoice.InvoiceNumber, 
    creditCard: <span class="hljs-keyword">new</span> Sparrow.CreditCard{ CardNum = <span class="hljs-string">"4111111111111111"</span>, CardExp = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>) });
</code></pre>
<p>RESULT CreateInvoice:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreateInvoice.TextResponse;    <span class="hljs-comment">// invoice has been successfully created</span>
resultCreateInvoice.InvoiceNumber;    <span class="hljs-comment">// Inv-39709</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.TextResponse;    <span class="hljs-comment">// Invoice has been successfully paid</span>
result.TransId;    <span class="hljs-comment">// 11032431</span>
result.InvoiceNumber;    <span class="hljs-comment">// Inv-39709</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


   
<section id="documenter-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice-cancel-inv-customer-pay-inv-cc-pay-inv-ach" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Paying an Invoice with a Bank Account</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>mkey</strong></td>
<td></td>
<td>secured merchant account key</td>
</tr>
<tr>
<td><strong>transtype</strong></td>
<td>payinvoice</td>
<td></td>
</tr>
<tr>
<td><strong>invoicenumber​</strong></td>
<td>Inv-[0-9]</td>
<td>Unique invoice identifier</td>
</tr>
<tr>
<td><strong>bankname</strong></td>
<td></td>
<td>The customer’s bank name</td>
</tr>
<tr>
<td><strong>routing</strong></td>
<td></td>
<td>The customer’s bank routing number</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td></td>
<td>The customer’s bank account number</td>
</tr>
<tr>
<td><strong>achaccounttype</strong></td>
<td>checking / savings</td>
<td>The customer’s type of ACH account</td>
</tr>
<tr>
<td><strong>achaccountsubtype</strong></td>
<td>business / personal</td>
<td>The customer’s ACH account entity</td>
</tr>
<tr>
<td>firstname</td>
<td></td>
<td>Billing first name</td>
</tr>
<tr>
<td>lastname</td>
<td></td>
<td>Billing last name</td>
</tr>
<tr>
<td>company</td>
<td></td>
<td>Billing company</td>
</tr>
<tr>
<td>address1</td>
<td></td>
<td>Billing address</td>
</tr>
<tr>
<td>address2</td>
<td></td>
<td>Billing address2</td>
</tr>
<tr>
<td>city</td>
<td></td>
<td>Billing city</td>
</tr>
<tr>
<td>state</td>
<td>2 character abbreviation</td>
<td>Billing state</td>
</tr>
<tr>
<td>zip</td>
<td></td>
<td>Billing postal code. If the country is US zip code format must be 5 digits or 9 digits. Example xxxxx, xxxxxxxxx or xxxxx-xxxx</td>
</tr>
<tr>
<td>country</td>
<td>CC (ISO-3166)</td>
<td>Billing Country (ie. US)</td>
</tr>
<tr>
<td>phone</td>
<td></td>
<td>Billing phone number</td>
</tr>
<tr>
<td>fax</td>
<td></td>
<td>Billing fax number</td>
</tr>
<tr>
<td>email</td>
<td></td>
<td>Billing Email Address</td>
</tr>
<tr>
<td>shipfirstname</td>
<td></td>
<td>Shipping first name</td>
</tr>
<tr>
<td>shiplastname</td>
<td></td>
<td>Shipping last name</td>
</tr>
<tr>
<td>shipcompany</td>
<td></td>
<td>Shipping company</td>
</tr>
<tr>
<td>shipaddress1</td>
<td></td>
<td>Shipping Address</td>
</tr>
<tr>
<td>shipaddress2</td>
<td></td>
<td>Shipping Address - line 2</td>
</tr>
<tr>
<td>shipcity</td>
<td></td>
<td>Shipping City</td>
</tr>
<tr>
<td>shipstate</td>
<td>2 character abbreviation</td>
<td>Shipping State</td>
</tr>
<tr>
<td>shipzip</td>
<td></td>
<td>Shipping Zip Code</td>
</tr>
<tr>
<td>shipcountry</td>
<td>CC (ISO - 3166)</td>
<td>Shipping Country, ie US</td>
</tr>
<tr>
<td>shipphone</td>
<td></td>
<td>Shipping Phone Number</td>
</tr>
<tr>
<td>shipemail</td>
<td></td>
<td>Shipping Email</td>
</tr>
</tbody>
</table>
<p></p>
<pre class="language-none"><code class="language-none">mkey=8VG63HD1LPBMIR5TPS7R52YV&amp;transtype=payinvoice&amp;invoicenumber=Inv-80782&amp;bankname=Bank&amp;routing=122000496&amp;account=122000496&amp;achaccounttype=checking&amp;achaccountsubtype=personal&amp;firstname=Jake&amp;lastname=Tred&amp;address1=123+Feeed&amp;city=New+York&amp;state=NY&amp;country=US&amp;zip=12345&amp;company=Comp
</code></pre>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <p>Command Line:</p>
<pre class="language-bash"><code class="language-bash">curl -d <span class="hljs-string">"mkey=<span class="hljs-variable">$ACH_M_KEY</span>&amp;\
transtype=payinvoice&amp;\
invoicenumber=Inv-39040&amp;\
bankname=First Test Bank&amp;\
routing=110000000&amp;\
account=1234567890123&amp;\
achaccounttype=checking&amp;\
achaccountsubtype=personal&amp;\
firstname=John&amp;\
lastname=Doe&amp;\
company=Sparrow One&amp;\
address1=16100 N 71st Street&amp;\
address2=Suite 170&amp;\
city=Scottsdale&amp;\
state=AZ&amp;\
zip=85254&amp;\
country=US&amp;\
email=john@norepy.com&amp;\
shipfirstname=Jane&amp;\
shiplastname=Doe&amp;\
shipcompany=Sparrow Two&amp;\
shipaddress1=16100 N 72nd Street&amp;\
shipaddress2=Suite 171&amp;\
shipcity=Pheonix&amp;\
shipstate=AZ&amp;\
shipzip=85004&amp;\
shipcountry=US&amp;\
shipphone=6025551234&amp;\
shipemail=jane@noreply.com"</span> \
https://secure.sparrowone.com/Payments/Services_api.aspx
</code></pre>
<p>Response:</p>
<pre class="language-bash"><code class="language-bash">textresponse=Invoice+has+been+successfully+paid&amp;
transid=10750925&amp;
invoicenumber=Inv-39040
</code></pre>

                 </div>
              </div>
           
              <div class="code-csharp code-div ">
                 <div class="method-example-part">
                   <p>CODE:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">var</span> resultCreateInvoice = <span class="hljs-keyword">await</span> _sparrow.CreateInvoice(
    invoiceDate: <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2019</span>,<span class="hljs-number">10</span>,<span class="hljs-number">21</span>), 
    currency: <span class="hljs-string">"USD"</span>, 
    invoiceStatus: Sparrow.InvoiceStatus.Active, 
    invoiceAmount: <span class="hljs-number">10.00</span>m);
<span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.PayInvoiceWithBankAccount(
    invoiceNumber: resultCreateInvoice.InvoiceNumber, 
    bankAccount: <span class="hljs-keyword">new</span> Sparrow.BankAccount{ BankName = <span class="hljs-string">"First Test Bank"</span>, Routing = <span class="hljs-string">"110000000"</span>, Account = <span class="hljs-string">"1234567890123"</span>, AchAccountType = Sparrow.AchAccountType.Checking, AchAccountSubType = Sparrow.AchAccountSubType.Personal }, 
    contactInfo: <span class="hljs-keyword">new</span> Sparrow.ContactInfo{ FirstName = <span class="hljs-string">"John"</span>, LastName = <span class="hljs-string">"Doe"</span> });
</code></pre>
<p>RESULT CreateInvoice:</p>
<pre class="language-csharp"><code class="language-csharp">resultCreateInvoice.TextResponse;    <span class="hljs-comment">// invoice has been successfully created</span>
resultCreateInvoice.InvoiceNumber;    <span class="hljs-comment">// Inv-39708</span>
</code></pre>
<p>RESULT:</p>
<pre class="language-csharp"><code class="language-csharp">result.TextResponse;    <span class="hljs-comment">// Invoice has been successfully paid</span>
result.TransId;    <span class="hljs-comment">// 11032430</span>
result.InvoiceNumber;    <span class="hljs-comment">// Inv-39708</span>
</code></pre>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           


           
              
<section id="documenter-response-variables" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h2>Response Variables</h2>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-response-variables-transaction-response-variables" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Transaction Response Variables</h3>
<p></p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Format</th>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>status</td>
<td>alphanumeric string</td>
<td></td>
<td>See the table below with statuses list</td>
</tr>
<tr>
<td>response</td>
<td>alphanumeric string</td>
<td></td>
<td>See the table below with responses list</td>
</tr>
<tr>
<td>textresponse</td>
<td>string</td>
<td></td>
<td>Textual response</td>
</tr>
<tr>
<td>authcode</td>
<td>string</td>
<td></td>
<td>Transaction authorization or approval code, depending on the payment processor</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td></td>
<td>Type of transaction</td>
</tr>
<tr>
<td>transid</td>
<td>number</td>
<td></td>
<td>Sparrow transaction ID</td>
</tr>
<tr>
<td>xref</td>
<td>string</td>
<td></td>
<td>External transaction ID from the payment processor</td>
</tr>
<tr>
<td>avsresponse</td>
<td>C</td>
<td></td>
<td>AVS Response Code</td>
</tr>
<tr>
<td>cvvresponse</td>
<td>C</td>
<td></td>
<td>CVV Response Code</td>
</tr>
<tr>
<td>coderesponse</td>
<td>C</td>
<td></td>
<td>Numeric mapping of the processor response</td>
</tr>
<tr>
<td>orderid</td>
<td></td>
<td></td>
<td>The original order ID passed in the transaction request</td>
</tr>
<tr>
<td>customertoken</td>
<td>alphanumeric string</td>
<td></td>
<td>Token of the newly created Data Vault customer</td>
</tr>
<tr>
<td>paymenttoken_#</td>
<td>alphanumeric string</td>
<td></td>
<td>Token of the newly created Data Vault payment information set</td>
</tr>
<tr>
<td>assignmenttoken</td>
<td>alphanumeric string</td>
<td></td>
<td>Token of the newly assigned Data Vault payment plan assignment</td>
</tr>
<tr>
<td>plantoken</td>
<td>alphanumeric string</td>
<td></td>
<td>Token of the newly created Data Vault plan</td>
</tr>
<tr>
<td>codedescription</td>
<td>string</td>
<td></td>
<td>Describes the meaning of the response code</td>
</tr>
<tr>
<td>availablecreditbalance</td>
<td>d.dd</td>
<td></td>
<td>Available card balance</td>
</tr>
<tr>
<td>origtransid</td>
<td>number</td>
<td></td>
<td>Sparrow transaction id of an original transaction. System returns this field if the transaction has been Rejected or Flagged for review by FBI rule</td>
</tr>
<tr>
<td>origresponse</td>
<td>alphanumeric string</td>
<td></td>
<td>Response of an original transaction</td>
</tr>
<tr>
<td>origtextresponse</td>
<td>string</td>
<td></td>
<td>Textual response of an original transaction</td>
</tr>
</tbody>
</table>

         </div>
      </div>
      
   </div>
</section>           


   
<section id="documenter-response-variables-transaction-response-variables-gateway-status" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Gateway Status</h3>
<p></p>
<p>Statuses for Credit Card payments:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Transaction Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Approved</td>
</tr>
<tr>
<td>2</td>
<td>Declined</td>
</tr>
<tr>
<td>3</td>
<td>Error</td>
</tr>
</tbody>
</table>
<p></p>
<p></p>
<p>Statuses for ACH payments:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Transaction Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>00</td>
<td>Approved</td>
</tr>
<tr>
<td>05</td>
<td>Declined</td>
</tr>
<tr>
<td>ER</td>
<td>Error</td>
</tr>
</tbody>
</table>
<p></p>
<p></p>
<p>Statuses for eCheck payments:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Transaction Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>520</td>
<td>Approved</td>
</tr>
<tr>
<td>530, 540</td>
<td>Declined</td>
</tr>
<tr>
<td>550</td>
<td>Error</td>
</tr>
</tbody>
</table>
<p></p>
<p></p>
<p>Statuses for Star Card payments:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Transaction Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>Approved</td>
</tr>
<tr>
<td>D</td>
<td>Declined</td>
</tr>
<tr>
<td>X</td>
<td>Error</td>
</tr>
</tbody>
</table>
<p></p>
<p></p>
<p>Statuses for eWallet payments:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Transaction Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Approved</td>
</tr>
<tr>
<td>2</td>
<td>Declined</td>
</tr>
<tr>
<td>3</td>
<td>Error</td>
</tr>
</tbody>
</table>
<p></p>
<p></p>
<p>Statuses for Cash payments:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Transaction Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>100</td>
<td>Approved</td>
</tr>
<tr>
<td>500</td>
<td>Declined</td>
</tr>
</tbody>
</table>

         </div>
      </div>
      
   </div>
</section>           


   
<section id="documenter-response-variables-transaction-response-variables-gateway-status-status" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Status</h3>
<p></p>
<p>Status field can have the following values:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Operation Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Successful</td>
<td>No Errors</td>
</tr>
<tr>
<td>201</td>
<td>Wait For Response</td>
<td>For Checkout processors only (Eirth Gate, PayGate, etc.). This is a temporary status. It means that the request was sent to the processor and there are no errors, however, the response has not been received yet</td>
</tr>
<tr>
<td>254</td>
<td>Rejected By Accertify</td>
<td>Fraud Control System</td>
</tr>
<tr>
<td>300</td>
<td>Flagged For Review</td>
<td>Fraud Control System</td>
</tr>
<tr>
<td>301</td>
<td>Rejected By Policy</td>
<td>Fraud Control System</td>
</tr>
<tr>
<td>400</td>
<td>Declined</td>
<td>Errors occurred on processor side</td>
</tr>
<tr>
<td>401</td>
<td>Processor Error</td>
<td>Errors occurred on processor side</td>
</tr>
<tr>
<td>500</td>
<td>Internal Error</td>
<td>Unexpected error</td>
</tr>
</tbody>
</table>

         </div>
      </div>
      
   </div>
</section>           


           
              
<section id="documenter-processor-response-codes" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h2>Processor Response Codes</h2>

         </div>
      </div>
      
   </div>
</section>           

   
<section id="documenter-processor-response-codes-avs-response-codes" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>AVS Response Codes</h3>
<p></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>Address match only</td>
</tr>
<tr>
<td>B</td>
<td>-</td>
</tr>
<tr>
<td>C</td>
<td>-</td>
</tr>
<tr>
<td>D</td>
<td>-</td>
</tr>
<tr>
<td>E</td>
<td>Not a mail/phone order</td>
</tr>
<tr>
<td>G</td>
<td>Non-U.S. Issuer does not participate</td>
</tr>
<tr>
<td>I</td>
<td>-</td>
</tr>
<tr>
<td>K</td>
<td>-</td>
</tr>
<tr>
<td>L</td>
<td>-</td>
</tr>
<tr>
<td>M</td>
<td>-</td>
</tr>
<tr>
<td>N</td>
<td>No address or ZIP match</td>
</tr>
<tr>
<td>0</td>
<td>AVS Not Available</td>
</tr>
<tr>
<td>O</td>
<td>-</td>
</tr>
<tr>
<td>P</td>
<td>-</td>
</tr>
<tr>
<td>R</td>
<td>Issuer system unavailable</td>
</tr>
<tr>
<td>S</td>
<td>Service not supported</td>
</tr>
<tr>
<td>T</td>
<td>-</td>
</tr>
<tr>
<td>U</td>
<td>Address unavailable</td>
</tr>
<tr>
<td>W</td>
<td>9-character numeric ZIP match only</td>
</tr>
<tr>
<td>X</td>
<td>Exact match, 9-character numeric ZIP</td>
</tr>
<tr>
<td>Y</td>
<td>Exact match, 5-character numeric ZIP</td>
</tr>
<tr>
<td>Z</td>
<td>5-character Zip match only</td>
</tr>
</tbody>
</table>

         </div>
      </div>
      
   </div>
</section>           


   
<section id="documenter-processor-response-codes-avs-response-codes-cvv-response-codes" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>CVV Response Codes</h3>
<p></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>M</td>
<td>CVV2/CVC2 Match</td>
</tr>
<tr>
<td>N</td>
<td>CVV2/CVC2 No Match</td>
</tr>
<tr>
<td>P</td>
<td>Not Processed</td>
</tr>
<tr>
<td>S</td>
<td>Merchant has indicated that CVV2/CVC2 is not present on card</td>
</tr>
<tr>
<td>U</td>
<td>Issuer is not certified and/or has not provided Visa encryption keys</td>
</tr>
<tr>
<td>R</td>
<td>Retry for AmEx</td>
</tr>
</tbody>
</table>

         </div>
      </div>
      
   </div>
</section>           


   
<section id="documenter-processor-response-codes-avs-response-codes-cvv-response-codes-military-star-responses" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h3>Military Star Responses</h3>
<p></p>
<p>Listed below are possible values that be returned in the textresponse field. Any
messages not indicated below should be reported to your AAFES contact.</p>
<p></p>
<p><strong>Validation Messages</strong></p>
<p>“Internal Error: Amount cannot contain decimals (.)”</p>
<p>This message is returned when the amount field contains at least one decimal.
Correct the field and send the transaction again.</p>
<p></p>
<p>“Internal Error: Amount is not numeric”</p>
<p>This message is returned when the amount field contains non-numeric data.
Correct the field and send the transaction again.</p>
<p></p>
<p>“Internal Error: Amount cannot be zero”</p>
<p>This message is returned when the amount field is equal to zero. Correct the
field and send the transaction again.</p>
<p></p>
<p>“Internal Error: Credit card number is required”</p>
<p>This message is returned when the cardnum field is blank. Correct the field and
send the transaction again.</p>
<p></p>
<p>“Internal Error: Invalid Card Number”</p>
<p>This message is returned when the data in the cardnum field is a invalid card.</p>
<p></p>
<p><strong>Declined Messages</strong></p>
<p>“Declined, Please try another payment method”</p>
<p>This message is returned when the transaction is declined. The response field
will contain a “2”.</p>
<p></p>
<p>“Internal Error: Credit is larger than available amount”</p>
<p>This message is returned when the amount field in a credit transaction is
greater than the amount settled on the previous transactions. Correct the field
and send the transactions again. The response field will contain a “2”.</p>
<p></p>
<p>“Internal Error: Not authorized for given amount”</p>
<p>This message is returned when the amount in a settlement transaction is greater
than the amount that was approved. Correct the field and send the transaction
again. The response field will contain a “2”.</p>
<p></p>
<p><strong>Misc. Messages</strong></p>
<p>“TimeOut: Unable to verify transaction.”</p>
<p>This message is returned when there was a communication timeout. The transaction
will be queued and processed when communication is back online. For an approval,
you will need to make another request. For settlement and credits the
transaction will get processed as soon as communications are back online.</p>
<p></p>
<p>“MQ: This method is not available at this time.”</p>
<p>This message is returned when there was a critical failure in the processing of
the transactions. If this error continues, report it to your AAFES contact. All
transactions will need to be sent again.</p>
<p></p>
<p>“COM: This method is not available at this time.”</p>
<p>This message is returned when there was a critical failure in the communication
of the transaction. If this error continues, report it to your AAFES contact.
All transactions will need to be sent again.</p>
<p></p>
<p>“System is down for maintenance”</p>
<p>This message is returned when the system has been brought down for upgrades or
scheduled maintenance. All transactions will need to be sent again.</p>
<p></p>
<p>“COM: This method is abending, if problem continues notify your AAFES POC.”</p>
<p>This message is returned when there was a critical failure in the processing of
the transactions. If this error continues, report it to your AAFES contact. All
transactions will need to be sent again.</p>
<p></p>
<p>“DB Error: System currently down, try again later”</p>
<p>This message is returned when there is a critical error in accessing a database.
All transaction will need to be sent again.</p>

         </div>
      </div>
      
   </div>
</section>           


           
              
<section id="documenter-code-samples" class="method">
   <div class="method-area">
      <div class="method-copy">
         <div class="method-copy-padding">
            <h1>Code Samples</h1>
<p>Here are all the code samples we support.</p>

         </div>
      </div>
      
        <div class="method-example">
           
              <div class="code-curl code-div active-code">
                 <div class="method-example-part">
                   <pre class="language-bash"><code class="language-bash">curl https://examples.com/v1/charges \
-u example_test_DTbaf9757982a9e738f05d249b:
</code></pre>
<p>Aliquam sed risus <code>-u</code> vitae tellus venenatis vulputate non id ante. Nullam
facilisis placerat ligula non pulvinar. Donec nec purus.</p>
<p>Donec congue pharetra ligula, a porta nulla semper vel. Donec egestas fermentum
augue ac ultricies. Aliquam sed risus vitae tellus venenatis vulputate non id
ante. Nullam facilisis placerat ligula non pulvinar.</p>

                 </div>
              </div>
           
              <div class="code-c# code-div ">
                 <div class="method-example-part">
                   <p>The following is an example of a simple usage of the Sparrow Sdk.</p>
<pre class="language-csharp"><code class="language-csharp"><span class="hljs-keyword">using</span> System.Threading.Tasks;
<span class="hljs-keyword">using</span> SparrowSdk;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">SampleClient</span>
{
    <span class="hljs-keyword">class</span> <span class="hljs-title">Sample</span>
    {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Sparrow _sparrow = <span class="hljs-keyword">new</span> Sparrow(<span class="hljs-string">"SPARROW_API_KEY"</span>);

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">CreateSparrowSale</span>(<span class="hljs-params"></span>)
        </span>{
            <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleSale(<span class="hljs-string">"4111111111111111"</span>, <span class="hljs-string">"01/18"</span>, <span class="hljs-number">9.97</span>m, <span class="hljs-string">"123"</span>);

            <span class="hljs-keyword">if</span> (result.IsSuccess)
            {
                <span class="hljs-keyword">var</span> transactionId = result.TransId;

                <span class="hljs-comment">// Do something ...</span>
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">var</span> textResponse = result.TextResponse;

                <span class="hljs-comment">// Handle the Failure ...</span>
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">CreateSparrowSale_WithNamedArguments</span>(<span class="hljs-params"></span>)
        </span>{
            <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _sparrow.SimpleSale(cardNum: <span class="hljs-string">"4111111111111111"</span>, cardExp: <span class="hljs-string">"01/18"</span>, amount: <span class="hljs-number">9.97</span>m, cvv: <span class="hljs-string">"123"</span>);

            <span class="hljs-keyword">if</span> (result.IsSuccess)
            {
                <span class="hljs-keyword">var</span> transactionId = result.TransId;

                <span class="hljs-comment">// Do something ...</span>
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-keyword">var</span> textResponse = result.TextResponse;

                <span class="hljs-comment">// Handle the Failure ...</span>
            }
        }

    }
}
</code></pre>

                 </div>
              </div>
           
              <div class="code-ruby code-div ">
                 <div class="method-example-part">
                   <pre class="language-ruby"><code class="language-ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">"example"</span>
example.api_key = <span class="hljs-string">"example_test_DTbaf9757982a9e738f05d249b"</span>
</code></pre>
<p>You can also set a per-request key like in the example below. This is often
useful for Connect applications that use multiple API keys during the lifetime
of a process.</p>
<p>Authentication is transparently handled for you in subsequent method calls on
the returned object.</p>
<pre class="language-ruby"><code class="language-ruby">example::Charge.retrieve(
  <span class="hljs-string">"ex_GE47fb22eZvKYlo2Cc0fo87EHa"</span>,
  <span class="hljs-symbol">:api_key</span> =&gt; <span class="hljs-string">"example_test_DTbaf9757982a9e738f05d249b"</span>
)
</code></pre>
<p>A sample test API key is included in all the examples on this page, so you can
test any example right away. To test requests using your account, replace the
sample API key with your actual API key.</p>

                 </div>
              </div>
           
              <div class="code-python code-div ">
                 <div class="method-example-part">
                   <pre class="language-python"><code class="language-python"><span class="hljs-keyword">import</span> example
example.api_key = <span class="hljs-string">"example_test_DTbaf9757982a9e738f05d249b"</span>
</code></pre>
<p>You can also set a per-request key like in the example below. This is often
useful for Connect applications that use multiple API keys during the lifetime
of a process.</p>
<p>Authentication is transparently handled for you in subsequent method calls on
the returned object.</p>
<pre class="language-python"><code class="language-python">example.Charge.retrieve(
   <span class="hljs-string">"ex_GE47fb22eZvKYlo2Cc0fo87EHa"</span>,
   api_key=<span class="hljs-string">"example_test_DTbaf9757982a9e738f05d249b"</span>
)
</code></pre>
<p>A sample test API key is included in all the examples on this page, so you can
test any example right away. To test requests using your account, replace the
sample API key with your actual API key.</p>

                 </div>
              </div>
           
              <div class="code-php code-div ">
                 <div class="method-example-part">
                   <pre class="language-php"><code class="language-php">\example\example::setApiKey(<span class="hljs-string">"example_test_DTbaf9757982a9e738f05d249b"</span>);
</code></pre>
<p>You can also set a per-request key like in the example below. This is often
useful for Connect applications that use multiple API keys during the lifetime
of a process.</p>
<p>Authentication is transparently handled for you in subsequent method calls on
the returned object.</p>
<pre class="language-php"><code class="language-php">\example\Charge::retrieve(
   <span class="hljs-string">"ex_GE47fb22eZvKYlo2Cc0fo87EHa"</span>,
   <span class="hljs-keyword">array</span>(<span class="hljs-string">'api_key'</span> =&gt; <span class="hljs-string">"example_test_DTbaf9757982a9e738f05d249b"</span>)
)
</code></pre>
<p>A sample test API key is included in all the examples on this page, so you can
test any example right away. To test requests using your account, replace the
sample API key with your actual API key.</p>

                 </div>
              </div>
           
        </div>
      
   </div>
</section>           

           
         </div>
      </div>
      <!-- Blockquotes mobile menu -->
      <div id="mobile-menu">
         <div class="mobile-menu-inner">
            <div class="top-links">
               <ul class="links">
                  
                     <li>
                        <a class="current" href="#documenter-getting-started">Getting Started</a>
                        


                     </li>
                  
                     <li>
                        <a  href="#documenter-configuration">Configuration</a>
                        


                     </li>
                  
                     <li>
                        <a  href="#documenter-integration-details">Integration Details</a>
                        


                     </li>
                  
                     <li>
                        <a  href="#documenter-creating-a-sale">Creating a Sale</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-creating-a-sale-creating-a-sale-simple-sale">Simple Sale</a>
          


        </li>
     
        <li>
          <a href="#documenter-creating-a-sale-creating-a-sale-simple-sale-advanced-sale">Advanced Sale</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-separate-auth-capture">Creating an Authorization and Capture</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-separate-auth-capture-separate-auth-capture-simple-auth">Simple Authorization</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-separate-auth-capture-simple-auth-simple-capture">Simple Capture</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-separate-auth-capture-simple-auth-simple-capture-Offline-Capture">Simple Offline Capture</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-separate-auth-capture-simple-auth-simple-capture-Offline-Capture-Voice-capture">Voice Capture</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-separate-auth-capture-simple-auth-simple-capture-Offline-Capture-Voice-capture-incremental-auth">Incremental Authorization</a>
          


        </li>
     
        <li>
          <a href="#documenter-separate-auth-capture-separate-auth-capture-simple-auth-simple-capture-Offline-Capture-Voice-capture-incremental-auth-advanced-capture">Advanced Capture</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-issuing-a-refund">Issuing a Refund</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-issuing-a-refund-issuing-a-refund-Simple-refund">Simple Refund</a>
          


        </li>
     
        <li>
          <a href="#documenter-issuing-a-refund-issuing-a-refund-Simple-refund-advanced-refund">Advanced Refund</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-issuing-a-void">Issuing a Void</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-issuing-a-void-issuing-a-void-simple-void">Simple Void</a>
          


        </li>
     
        <li>
          <a href="#documenter-issuing-a-void-issuing-a-void-simple-void-advanced-void">Advanced Void</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-Creating-a-credit">Creating a Credit</a>
                        


                     </li>
                  
                     <li>
                        <a  href="#documenter-airline-passenger-sale">Airline Passenger Sale</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-airline-passenger-sale-airline-passenger-sale-passenger-sale">Passenger Sale</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-starcard">Military Star Card</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-starcard-starcard-simple-starcard">Simple Star Card</a>
          


        </li>
     
        <li>
          <a href="#documenter-starcard-starcard-simple-starcard-advanced-starcard">Advanced Star Card</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-ach">Automated Clearing House (ACH)/ eCheck</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-ach-ach-simple-ach">Simple ACH</a>
          


        </li>
     
        <li>
          <a href="#documenter-ach-ach-simple-ach-advanced-sale">Advanced ACH</a>
          


        </li>
     
        <li>
          <a href="#documenter-ach-ach-simple-ach-advanced-sale-simple-echeck">Simple eCheck</a>
          


        </li>
     
        <li>
          <a href="#documenter-ach-ach-simple-ach-advanced-sale-simple-echeck-advanced-echeck-sale">Advanced eCheck</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-ewallet">eWallet</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-ewallet-ewallet-ewallet-credit">eWallet Simple Credit</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-fiserv">Fiserv</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-fiserv-fiserv-fiserv-simple">Fiserv Simple Sale</a>
          


        </li>
     
        <li>
          <a href="#documenter-fiserv-fiserv-fiserv-simple-fiserv-advanced">Advanced Fiserv Sale</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-chargeback">Chargeback Entry</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-chargeback-chargeback-mark-chargeback">Mark as Chargeback</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-balance-inquiry">Balance Inquiry</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-balance-inquiry-balance-inquiry-check-balance">Retrieve Card Balance</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-decrypt-custom-field">Decrypt Custom Fields</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-decrypt-custom-field-decrypt-custom-field-decrypt">Decrypt Data</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-cc-verification">Credit Card Verification</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-cc-verification-cc-verification-card-verification">Account Verification</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-datavault">Data Vault</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer">Adding a Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer">Add Customer by Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer-update-payment-type">Update Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type">Adding Payment Types to a Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types">Update Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type">Delete Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer">Delete Data Vault Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer">Retrieve Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer-get-payment-type">Retrieve Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer-get-payment-type-decrypt-payment-type">Decrypt Payment Type</a>
          


        </li>
     
        <li>
          <a href="#documenter-datavault-datavault-adding-a-customer-simple-add-customer-update-payment-type-add-payment-type-update-payment-types-delete-payment-type-delete-customer-get-customer-get-payment-type-decrypt-payment-type-tokenized-payments">Tokenized Payments</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-payment-plans">Creating Payment Plans</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan">Creating a Payment Plan</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan-update-plan">Updating a Payment Plan</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan-update-plan-sequences">Building a Sequence</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan-update-plan-sequences-notifications">Notification Settings</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence">Add or Update a Sequence</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence">Delete a Sequence</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan">Delete a Plan</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan-assign-payment-plan">Assign Payment Plan</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan-assign-payment-plan-update-plan-assignment">Update Payment Plan Assignment</a>
          


        </li>
     
        <li>
          <a href="#documenter-payment-plans-payment-plans-create-plan-update-plan-sequences-notifications-add-update-sequence-delete-sequence-delete-plan-assign-payment-plan-update-plan-assignment-cancel-plan-assignment">Cancel Payment Plan Assignment</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-invoicing">Invoicing</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-invoicing-invoicing-create-merchant-invoice">Creating an Invoice</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-invoicing-create-merchant-invoice-update-invoice">Update Invoice</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-invoicing-create-merchant-invoice-update-invoice-get-invoice">Retrieve Invoice</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice">Cancel Invoice</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice-cancel-inv-customer">Cancel Invoice by Customer</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice-cancel-inv-customer-pay-inv-cc">Pay Invoice with a Credit Card</a>
          


        </li>
     
        <li>
          <a href="#documenter-invoicing-invoicing-create-merchant-invoice-update-invoice-get-invoice-cancel-invoice-cancel-inv-customer-pay-inv-cc-pay-inv-ach">Pay Invoice with a Bank Account</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-response-variables">Response Variables</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-response-variables-response-variables-transaction-response-variables">Transaction Response Variables</a>
          


        </li>
     
        <li>
          <a href="#documenter-response-variables-response-variables-transaction-response-variables-gateway-status">Gateway Status</a>
          


        </li>
     
        <li>
          <a href="#documenter-response-variables-response-variables-transaction-response-variables-gateway-status-status">Status</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-processor-response-codes">Processor Response Codes</a>
                        

  <ol>
     
        <li>
          <a href="#documenter-processor-response-codes-processor-response-codes-avs-response-codes">AVS Response Codes</a>
          


        </li>
     
        <li>
          <a href="#documenter-processor-response-codes-processor-response-codes-avs-response-codes-cvv-response-codes">CVV Response Codes</a>
          


        </li>
     
        <li>
          <a href="#documenter-processor-response-codes-processor-response-codes-avs-response-codes-cvv-response-codes-military-star-responses">Military Star Responses</a>
          


        </li>
     
  </ol>


                     </li>
                  
                     <li>
                        <a  href="#documenter-code-samples">Code Samples</a>
                        


                     </li>
                  
               </ul>
            </div>

         </div>
      </div>
      <script type="text/javascript" src="js/jquery.1.6.4.js"></script>
      <script type="text/javascript" src="js/jquery.scrollTo-1.4.2-min.js"></script>
      <script type="text/javascript" src="js/jquery.easing.js"></script>
      <script type="text/javascript">document.createElement('section');
         var duration = 500, easing = 'swing';
      </script>
      <script type="text/javascript" src="js/slides.min.jquery.js"></script>
      <script type="text/javascript" src="js/script.js"></script>
      <script type="text/javascript" src="js/scroll.js"></script>
      <script type="text/javascript" src="js/common.js"></script>
      <script type="text/javascript" src="js/jquery.mobile-menu.min.js"></script>
      <script type="text/javascript">
         ScrollLoad("scrollholder", "scroll", false);
      </script>
   </body>
</html>